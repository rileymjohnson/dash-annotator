(self.webpackChunkdash_annotator=self.webpackChunkdash_annotator||[]).push([[877],{505:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var r=n(196),o=n.n(r),i=(n(64),n(719)),c=n(173),u=n(68),a=n(574);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var f=["data_type"];function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(l,e);var t,n,r,i=d(l);function l(){var e;p(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(v(e=i.call.apply(i,[this].concat(n))),"_annotators",{pdf:c.default,html:u.default,text:a.default}),e}return t=l,(n=[{key:"render",value:function(){console.log("this",this);var e=this.props,t=e.data_type,n=s(e,f),r=this._annotators[t];if(void 0===r)throw new Error("Invalid data_type. Valid options are: pdf, html, & text.");return o().createElement(r,n)}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.Component);w.defaultProps=i.lG,w.propTypes=i.iG},68:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var r=n(196),o=(n(64),n(100));function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var w=function(e){y(n,e);var t=b(n);function n(){return s(this,n),t.apply(this,arguments)}return h(n,[{key:"annotationStyle",value:function(e,t){var n=t.color,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={position:"absolute",height:e.height+2,top:e.top-this.props.scrollPosition.scrollY,left:e.left-this.props.scrollPosition.scrollX,width:e.width,transform:"translate(2px)",backgroundColor:"none",opacity:1};return r&&(o=l(l({},o),{},{backgroundColor:n||this.props.color||"yellow",zIndex:-1})),o}},{key:"render",value:function(){var e=this;return React.createElement("div",null,e.props.highlights.map((function(t){return t.position.map((function(n,r){return React.createElement("div",{key:r},React.createElement("div",{style:e.annotationStyle(n,t),onClick:function(){return e.props.onClick(t)},onMouseOver:function(){return e.props.onMouseOver(t)}}),React.createElement("div",{style:e.annotationStyle(n,t,!0)}))}))})))}}]),n}(r.Component),O=function(e){y(n,e);var t=b(n);function n(e){var o;return s(this,n),f(m(o=t.call(this,e)),"state",{newAnnotationJustCreated:!1,selection:null,scrollPosition:{scrollY:0,scrollX:0}}),o.iframeRef=(0,r.createRef)(),o}return h(n,[{key:"componentDidMount",value:function(){this.removeIframeEventHandlers()}},{key:"componentWillUnmount",value:function(){this.removeIframeEventHandlers()}},{key:"removeIframeEventHandlers",value:function(){var e,t;null!==(e=this.iframeRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.contentDocument&&(this.iframeRef.current.contentDocument.removeEventListener("scroll",this.onScroll.bind(this)),this.iframeRef.current.contentDocument.removeEventListener("mouseup",this.onMouseUp.bind(this)))}},{key:"setIframeEventHandlers",value:function(){var e,t;null!==(e=this.iframeRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.contentDocument&&(this.iframeRef.current.contentDocument.addEventListener("scroll",this.onScroll.bind(this)),this.iframeRef.current.contentDocument.addEventListener("mouseup",this.onMouseUp.bind(this)))}},{key:"onScroll",value:function(){this.setState({scrollPosition:{scrollY:this.iframeRef.current.contentWindow.scrollY,scrollX:this.iframeRef.current.contentWindow.scrollX}})}},{key:"onMouseUp",value:function(){var e=this.iframeRef.current.contentWindow.getSelection(),t=e.toString();if(t){var n=function(e,t){return Array.from(e).map((function(e){return{left:e.left+t.scrollX,top:e.top+t.scrollY,height:e.height,width:e.width}}))}(e.getRangeAt(0).getClientRects(),this.state.scrollPosition);this.setState({selection:{position:n,text:t},newAnnotationJustCreated:!0}),this.onAnnotationCreated(this.state.selection),this.props.setProps({highlights:[].concat(c(this.props.highlights),[this.state.selection])})}this.setState({selection:null}),e.empty()}},{key:"triggerEvent",value:function(e,t){var n;this.props.setProps({event:{name:e,value:t,_:!(null!==(n=this.props.event)&&void 0!==n&&n._)}})}},{key:"onAnnotationCreated",value:function(e){this.triggerEvent("new_highlight",e)}},{key:"onAnnotationClick",value:function(e){this.triggerEvent("clicked_highlight",e)}},{key:"onAnnotationHover",value:function(e){this.state.newAnnotationJustCreated?this.setState({newAnnotationJustCreated:!1}):this.triggerEvent("hovered_highlight",e)}},{key:"render",value:function(){var e=this,t=this.props.width||"100%",n=this.props.height||"100%";return React.createElement("div",{onMouseLeave:function(){return e.setState({selection:null})},style:{overflow:"hidden",position:"relative",width:t,height:n}},React.createElement("iframe",{srcDoc:this.props.data,width:t,height:n,ref:this.iframeRef,onLoad:this.setIframeEventHandlers.bind(this)}),!!this.props.highlights&&React.createElement(w,{highlights:this.props.highlights,color:this.props.color,scrollPosition:this.state.scrollPosition,onClick:this.onAnnotationClick.bind(this),onMouseOver:this.onAnnotationHover.bind(this)}))}}]),n}(r.Component);O.defaultProps=o.lG,O.propTypes=o.iG},173:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_e});var r=n(196),o=n.n(r),i=(n(64),n(473)),c=n(850),u=n.n(c),a=n(963),l=n(910),f=(n(739),n(379)),s=n.n(f),p=n(795),h=n.n(p),y=n(565),d=n.n(y),b=n(216),v=n.n(b),m=n(589),g=n.n(m),w=n(449),O={};O.styleTagTransform=g(),O.setAttributes=d(),O.insert=function(e){var t=document.querySelector("head"),n=window._lastElementInsertedByStyleLoader;n?n.nextSibling?t.insertBefore(e,n.nextSibling):t.appendChild(e):t.insertBefore(e,t.firstChild),window._lastElementInsertedByStyleLoader=e},O.domAPI=h(),O.insertStyleElement=v();s()(w.Z,O);w.Z&&w.Z.locals&&w.Z.locals;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}var j=["position","id"],E=void 0;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.R=l;var H=function(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var c=E;clearTimeout(n),n=setTimeout((function(){return e.apply(c,o)}),t)}},Y=function(e,t){return e.top>=t.top&&e.bottom<=t.bottom&&e.right<=t.right&&e.left>=t.left},I=function(e,t){return e.page===t.page&&e.left<=t.left&&t.left<=e.left+e.width},U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return e.page===t.page&&Math.abs(e.top-t.top)<n&&Math.abs(e.height-t.height)<n},V=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=e.left+e.width,o=t.left+t.width;return e.page===t.page&&e.left<=t.left&&r<=o&&t.left-r<=n},X=function(e,t){e.width=Math.max(t.width-e.left+t.left,e.width)},N=function(e){for(var t=e.sort((function(e,t){var n=(e.page||0)*e.top-(t.page||0)*t.top;return 0===n?e.left-t.left:n})),n=new Set,r=t.filter((function(e){return t.every((function(t){return r=t,!((n=e).page===r.page&&n.top>r.top&&n.left>r.left&&n.top+n.height<r.top+r.height&&n.left+n.width<r.left+r.width);var n,r}))})),o=0;o<=2;)r.forEach((function(e){r.forEach((function(t){e===t||n.has(e)||n.has(t)||U(e,t)&&(I(e,t)&&(X(e,t),e.height=Math.max(e.height,t.height),n.add(t)),V(e,t)&&(X(e,t),n.add(t)))}))})),o+=1;return r.filter((function(e){return!n.has(e)}))},z=function(e){return(e||{}).ownerDocument||document},G=function(e){return(z(e)||{}).defaultView||window},W=function(e){return e instanceof HTMLElement||e instanceof G(e).HTMLElement},F=function(e){var t=e.closest(".page");return t&&W(t)?{node:t,number:Number(t.dataset.pageNumber)}:null},Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(i,e);var t,n,r,o=_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),L(x(t=o.call(this,e)),"state",{isCollapsed:!0,range:null}),L(x(t),"eventBus",new a.EventBus),L(x(t),"linkService",new a.PDFLinkService({eventBus:t.eventBus,externalLinkTarget:2})),L(x(t),"resizeObserver",null),L(x(t),"containerNode",null),L(x(t),"unsubscribe",(function(){})),L(x(t),"attachRef",(function(e){var n=x(t),r=n.eventBus,o=n.resizeObserver;if(t.containerNode=e,t.unsubscribe(),e){var i,c=e.ownerDocument;r.on("textlayerrendered",t.onTextLayerRendered),r.on("pagesinit",t.onDocumentReady),c.addEventListener("selectionchange",t.onSelectionChange),c.addEventListener("keydown",t.handleKeyDown),null===(i=c.defaultView)||void 0===i||i.addEventListener("resize",t.debouncedScaleValue),o&&o.observe(e),t.unsubscribe=function(){var e;r.off("pagesinit",t.onDocumentReady),r.off("textlayerrendered",t.onTextLayerRendered),c.removeEventListener("selectionchange",t.onSelectionChange),c.removeEventListener("keydown",t.handleKeyDown),null===(e=c.defaultView)||void 0===e||e.removeEventListener("resize",t.debouncedScaleValue),o&&o.disconnect()}}})),L(x(t),"onTextLayerRendered",(function(){t.renderHighlights()})),L(x(t),"onDocumentReady",(function(){t.handleScaleValue()})),L(x(t),"onSelectionChange",(function(){var e=t.containerNode,n=G(e).getSelection();if(n){var r=n.rangeCount>0?n.getRangeAt(0):null;n.isCollapsed?t.setState({isCollapsed:!0}):r&&e&&e.contains(r.commonAncestorContainer)&&(t.setState({isCollapsed:!1,range:r}),t.debouncedAfterSelection())}})),L(x(t),"onScroll",(function(){t.renderHighlights(),t.viewer.container.removeEventListener("scroll",t.onScroll)})),L(x(t),"onMouseDown",(function(e){W(e.target)})),L(x(t),"afterSelection",(function(){var e=t.state,n=e.isCollapsed,r=e.range,o=function(e){var t,n,r=null==e||null===(t=e.startContainer)||void 0===t?void 0:t.parentElement,o=null==e||null===(n=e.endContainer)||void 0===n?void 0:n.parentElement;if(!W(r)||!W(o))return[];var i=F(r),c=F(o);if(null==i||!i.number||null==c||!c.number)return[];if(i.number===c.number)return[i];if(i.number===c.number-1)return[i,c];for(var u=[],a=i.number,l=i.node.ownerDocument;a<=c.number;){var f=F(l.querySelector("[data-page-number='".concat(f,"'")));f&&u.push(f)}return u}(r),i=function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Array.from(e.getClientRects()),o=[],i=0,c=r;i<c.length;i++){var u,a=c[i],l=T(t);try{for(l.s();!(u=l.n()).done;){var f=u.value,s=f.node.getBoundingClientRect();if(Y(a,s)&&a.top>=0&&a.bottom>=0&&a.width>0&&a.height>0&&a.width<s.width&&a.height<s.height){var p={top:a.top+f.node.scrollTop-s.top,left:a.left+f.node.scrollLeft-s.left,width:a.width,height:a.height,page:f.number};o.push(p)}}}catch(e){l.e(e)}finally{l.f()}}return n?N(o):o}(r,o);if(r&&!n&&o&&0!=o.length&&0!==i.length){var c=function(e){var t=Array.from(e).map((function(e){var t=e.left,n=e.top;return{X0:t,X1:t+e.width,Y0:n,Y1:n+e.height,page:e.page}})),n=Number.MAX_SAFE_INTEGER;t.forEach((function(e){var t;n=Math.min(n,null!==(t=e.page)&&void 0!==t?t:n)}));var r=t.filter((function(e){return(e.X0>0||e.X1>0||e.Y0>0||e.Y1>0)&&e.page===n})),o=r.reduce((function(e,t){return{X0:Math.min(e.X0,t.X0),X1:Math.max(e.X1,t.X1),Y0:Math.min(e.Y0,t.Y0),Y1:Math.max(e.Y1,t.Y1),page:n}}),r[0]),i=o.X0,c=o.X1,u=o.Y0;return{left:i,top:u,width:c-i,height:o.Y1-u,page:o.page}}(i);t.props.onSelectionFinished({page:o[0].number,boundingRect:c,rects:i},r.toString())}})),L(x(t),"debouncedAfterSelection",H(t.afterSelection,500)),L(x(t),"handleScaleValue",(function(){t.viewer&&(t.viewer.currentScaleValue=t.props.pdfScaleValue)})),L(x(t),"debouncedScaleValue",H(t.handleScaleValue,500)),"undefined"!=typeof ResizeObserver&&(t.resizeObserver=new ResizeObserver(t.debouncedScaleValue)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){e.pdfDocument!==this.props.pdfDocument?this.init():e.highlights!==this.props.highlights&&this.renderHighlights(this.props)}},{key:"init",value:function(){var e=this.props.pdfDocument;this.findController=this.findController||new a.PDFFindController({linkService:this.linkService,eventBus:this.eventBus}),this.viewer=this.viewer||new a.PDFViewer({container:this.containerNode,eventBus:this.eventBus,findController:this.findController,textLayerMode:2,removePageBorders:!0,linkService:this.linkService,renderer:"canvas",l10n:null}),this.linkService.setDocument(e),this.linkService.setViewer(this.viewer),this.viewer.setDocument(e),console.log("highligher",this)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"findOrCreateHighlightLayer",value:function(e){var t=(this.viewer.getPageView(e-1)||{}).textLayer;if(!t)return null;var n=t.textLayerDiv.querySelector(".PdfHighlighter__highlight-layer");return n||((n=z(t.textLayerDiv).createElement("div")).className=".PdfHighlighter__highlight-layer",t.textLayerDiv.appendChild(n)),n}},{key:"renderHighlights",value:function(e){for(var t=e||this.props,n=t.highlightTransform,r=t.highlights,o=this.props.pdfDocument,i=l.groupBy(l.path(["position","page"]),l.filter(Boolean,r)),c=1;c<=o.numPages;c++){var a=this.findOrCreateHighlightLayer(c);a&&u().render(React.createElement("div",null,(i[String(c)]||[]).map((function(e,t){var r=e.position,o=e.id,i=C(e,j);return n(S({id:o,position:r},i),t)}))),a)}}},{key:"render",value:function(){return React.createElement("div",{onPointerDown:this.onMouseDown},React.createElement("div",{ref:this.attachRef,className:"PdfHighlighter",onContextMenu:function(e){return e.preventDefault()},style:{height:this.props.height,width:this.props.width}},React.createElement("div",{className:"pdfViewer"})))}}])&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);L(Z,"defaultProps",{pdfScaleValue:"auto"});var q=n(299);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=";base64,";function ae(e){for(var t=e.indexOf(ue)+ue.length,n=e.substring(t),r=window.atob(n),o=r.length,i=new Uint8Array(new ArrayBuffer(o)),c=0;c<o;c++)i[c]=r.charCodeAt(c);return i}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(c,e);var t,n,r,i=ne(c);function c(){var e;Q(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(oe(e=i.call.apply(i,[this].concat(n))),"state",{pdfDocument:null,error:null}),ce(oe(e),"documentRef",o().createRef()),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){var e=this.state.pdfDocument;e&&e.destroy()}},{key:"componentDidUpdate",value:function(e){var t=e.data;this.props.data!==t&&this.load()}},{key:"componentDidCatch",value:function(e,t){var n=this.props.onError;n&&n(e),this.setState({pdfDocument:null,error:e})}},{key:"load",value:function(){var e=this,t=(this.documentRef.current||{}).ownerDocument,n=void 0===t?document:t,r=this.props,o=r.data,i=r.cMapUrl,c=r.cMapPacked,u=r.workerSrc,a=this.state.pdfDocument;this.setState({pdfDocument:null,error:null}),"string"==typeof u&&(q.GlobalWorkerOptions.workerSrc=u),Promise.resolve().then((function(){return a&&a.destroy()})).then((function(){if(o)return(0,q.getDocument)(K(K({},e.props),{},{data:ae(o),workerSrc:"https://unpkg.com/pdfjs-dist@2.11.338/build/pdf.worker.min.js",ownerDocument:n,cMapUrl:i,cMapPacked:c})).promise.then((function(t){e.setState({pdfDocument:t})}))})).catch((function(t){return e.componentDidCatch(t)}))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.beforeLoad,r=this.state,i=r.pdfDocument,c=r.error;return o().createElement(o().Fragment,null,o().createElement("span",{ref:this.documentRef}),c?this.renderError():i&&t?t(i):n)}},{key:"renderError",value:function(){var e=this.props.errorMessage;return e?o().cloneElement(e,{error:this.state.error}):null}}])&&ee(t.prototype,n),r&&ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}ce(le,"defaultProps",{workerSrc:"https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js"});var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(i,e);var t,n,r,o=ye(i);function i(){return se(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.position,n=e.onClick,r=e.onMouseOver;return React.createElement("div",null,React.createElement("div",{className:"Highlight__parts"},t.rects.map((function(e,t){return React.createElement("div",{onMouseOver:r,onClick:n,key:t,style:e,className:"Highlight__part"})}))))}}])&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(i,e);var t,n,r,o=Ce(i);function i(){return Ee(this,i),o.apply(this,arguments)}return t=i,n=[{key:"onAnnotationCreated",value:function(e){this.props.setProps({highlights:[e].concat(Ae(this.props.highlights))}),this.triggerEvent("new_highlight",e)}},{key:"onAnnotationClick",value:function(e){this.triggerEvent("clicked_highlight",e)}},{key:"onAnnotationHover",value:function(e){this.triggerEvent("hovered_highlight",e)}},{key:"triggerEvent",value:function(e,t){var n;this.props.setProps({event:{name:e,value:t,_:!(null!==(n=this.props.event)&&void 0!==n&&n._)}})}},{key:"render",value:function(){var e=this;return React.createElement(le,{data:this.props.data},(function(t){return React.createElement(Z,{height:e.props.height,width:e.props.width,pdfDocument:t,onSelectionFinished:function(t,n){return e.onAnnotationCreated({text:n,position:t})},highlightTransform:function(t,n){return React.createElement(ve,{position:we(we({},t.position),{},{rects:t.position.rects.map((function(n){return we(we({},n),{},{background:t.color||e.props.color||"yellow"})}))}),key:n,onClick:function(){e.onAnnotationClick(e.props.highlights[n])},onMouseOver:function(){e.onAnnotationHover(e.props.highlights[n])}})},highlights:e.props.highlights})}))}}],n&&Pe(t.prototype,n),r&&Pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);_e.defaultProps=i.lG,_e.propTypes=i.iG},574:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(196),o=n.n(r),i=(n(64),n(720)),c=n(68);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,r,i=y(u);function u(){return s(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=l(l({},this.props),{},{data:"<pre>".concat(this.props.data,"</pre>")});return o().createElement(c.default,e)}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.Component);v.defaultProps=i.lG,v.propTypes=i.iG},449:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(537),o=n.n(r),i=n(645),c=n.n(i)()(o());c.push([e.id,".Highlight__parts {\r\n  opacity: 1;\r\n}\r\n\r\n.PdfHighlighter {\r\n  position: absolute;\r\n  overflow: auto;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.Highlight__part {\r\n  cursor: pointer;\r\n  position: absolute;\r\n  background: rgba(255, 226, 143, 1);\r\n  transition: background 0.3s;\r\n}\r\n\r\n.textLayer {\r\n  z-index: 2;\r\n  opacity: 1;\r\n  mix-blend-mode: multiply;\r\n  display: flex;\r\n}\r\n\r\n.annotationLayer {\r\n  position: absolute;\r\n  top: 0;\r\n\r\n  z-index: 3;\r\n}\r\n\r\nhtml body .textLayer > div {\r\n  opacity: 1;\r\n  mix-blend-mode: multiply;\r\n}\r\n\r\n.textLayer ::selection {\r\n  background: rgba(252, 232, 151, 1);\r\n  mix-blend-mode: multiply;\r\n}\r\n\r\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\r\n  .textLayer {opacity: 0.5;}\r\n}\r\n\r\n/* Internet Explorer support method */\r\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\r\n  .textLayer {opacity: 0.5 }\r\n}\r\n\r\n/* Microsoft Edge Browser 12+ (All) - @supports method */\r\n@supports (-ms-ime-align:auto) {\r\n  .textLayer {opacity: 0.5 }\r\n}","",{version:3,sources:["webpack://./src/lib/styles.css"],names:[],mappings:"AAAA;EACE,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,WAAW;EACX,YAAY;AACd;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,kCAAkC;EAClC,2BAA2B;AAC7B;;AAEA;EACE,UAAU;EACV,UAAU;EACV,wBAAwB;EACxB,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,MAAM;;EAEN,UAAU;AACZ;;AAEA;EACE,UAAU;EACV,wBAAwB;AAC1B;;AAEA;EACE,kCAAkC;EAClC,wBAAwB;AAC1B;;AAEA;EACE,YAAY,YAAY,CAAC;AAC3B;;AAEA,qCAAqC;AACrC;EACE,YAAY,aAAa;AAC3B;;AAEA,wDAAwD;AACxD;EACE,YAAY,aAAa;AAC3B",sourcesContent:[".Highlight__parts {\r\n  opacity: 1;\r\n}\r\n\r\n.PdfHighlighter {\r\n  position: absolute;\r\n  overflow: auto;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.Highlight__part {\r\n  cursor: pointer;\r\n  position: absolute;\r\n  background: rgba(255, 226, 143, 1);\r\n  transition: background 0.3s;\r\n}\r\n\r\n.textLayer {\r\n  z-index: 2;\r\n  opacity: 1;\r\n  mix-blend-mode: multiply;\r\n  display: flex;\r\n}\r\n\r\n.annotationLayer {\r\n  position: absolute;\r\n  top: 0;\r\n\r\n  z-index: 3;\r\n}\r\n\r\nhtml body .textLayer > div {\r\n  opacity: 1;\r\n  mix-blend-mode: multiply;\r\n}\r\n\r\n.textLayer ::selection {\r\n  background: rgba(252, 232, 151, 1);\r\n  mix-blend-mode: multiply;\r\n}\r\n\r\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\r\n  .textLayer {opacity: 0.5;}\r\n}\r\n\r\n/* Internet Explorer support method */\r\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\r\n  .textLayer {opacity: 0.5 }\r\n}\r\n\r\n/* Microsoft Edge Browser 12+ (All) - @supports method */\r\n@supports (-ms-ime-align:auto) {\r\n  .textLayer {opacity: 0.5 }\r\n}"],sourceRoot:""}]);const u=c},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}}]);
//# sourceMappingURL=DashAnnotator.js.map