/*! For license information please see async-DashAnnotator.js.LICENSE.txt */
(self.webpackChunkdash_annotator=self.webpackChunkdash_annotator||[]).push([[630],{505:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var r=n(196),i=n.n(r),s=n(719),a=n(526),o=n(68),l=n(574);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var u=["data_type"];function h(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(c,t);var e,n,r,s=g(c);function c(){var t;d(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(y(t=s.call.apply(s,[this].concat(n))),"_annotators",{"application/pdf":a.default,"text/html":o.default,"text/plain":l.default}),t}return e=c,(n=[{key:"render",value:function(){var t=this.props,e=t.data_type,n=h(t,u);if(!Object.hasOwn(this._annotators,e))throw new Error("Invalid 'data_type'. Valid options are: application/pdf', 'text/html', & 'text/plain'.");var r=this._annotators[e];return i().createElement(r,n)}}])&&p(e.prototype,n),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(r.Component);_.defaultProps=s.lG,_.propTypes=s.iG},68:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>S});var r=n(196),i=n(910),s=n(100),a=n(740);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,s=[],a=!0,o=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(s.push(r.value),!e||s.length!==e);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function f(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(l,t);var e,n,s,o=v(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).htmlIframe=(0,r.createRef)(),console.log(_(e)),e}return e=l,n=[{key:"componentDidMount",value:function(){this.removeIframeEventHandlers()}},{key:"componentDidUpdate",value:function(t){t.data!==this.props.data&&this.props.setProps({highlights:[]}),this.removeIframeEventHandlers()}},{key:"componentWillUnmount",value:function(){this.removeIframeEventHandlers()}},{key:"removeIframeEventHandlers",value:function(){this.getDocument()&&this.getDocument().removeEventListener("mouseup",this.onMouseUp.bind(this))}},{key:"setIframeEventHandlers",value:function(){this.getDocument()&&this.getDocument().addEventListener("mouseup",this.onMouseUp.bind(this))}},{key:"iframeOnLoad",value:function(){var t=this;this.setIframeEventHandlers(),this.props.highlights.sort((function(t,e){return i.has("position",e)-i.has("position",t)})).forEach((function(e){e.position.forEach((function(n){var r=n.parentXpath,i=n.offset,s=n.textLength,a=t.getNodeFromXpath(r);a.normalize();var o,l,c=i,u=p(a.childNodes);try{for(u.s();!(l=u.n()).done;){var h=l.value;if(c-=h.textContent.length,o=h,c<0)break}}catch(t){u.e(t)}finally{u.f()}void 0!==o&&(i>0&&(o=o.splitText(c+o.length)),o.splitText(s),t.createHighlightElement(o,e.id,e.color))}))}));var e=i.groupBy(i.path(["dataset","id"]),this.getMarks()),n=Object.entries(e).map((function(e){var n=d(e,2),r=n[0],i=n[1];return t.getDataFromMarks(i,r)}));this.props.setProps({highlights:n})}},{key:"getNodeFromXpath",value:function(t){var e,n=d(t.matchAll("^(.*)/TEXT\\[([0-9]+)\\]$"),1)[0];if(void 0!==n){var r=d(n,3);r[0],t=r[1],e=r[2]}var i=this.getDocument().evaluate(t,this.getDocument(),null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(void 0===e)return i;var s,a=p(i.childNodes);try{for(a.s();!(s=a.n()).done;){var o=s.value;if(3===o.nodeType&&1==e--)return o}}catch(t){a.e(t)}finally{a.f()}}},{key:"getXpathFromNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t===e)return"";if("HTML"===t.tagName)return"/HTML[1]";var n,r=0,i=p(t.parentNode.childNodes);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(s===t){var a=this.getXpathFromNode(t.parentNode,e),o=3===t.nodeType?"TEXT":t.tagName;return"".concat(a,"/").concat(o,"[").concat(r+1,"]")}s.tagName===t.tagName&&r++}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"createHighlightElement",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getDocument().createElement("mark");i.className="highlight",i.innerHTML=t.textContent,i.dataset.id=e,i.style.backgroundColor=r||this.props.color,i.style.pointerEvents="none",i.addEventListener("click",(function(){n.triggerEvent("clicked_highlight",e)})),i.addEventListener("mouseover",(function(){n.triggerEvent("hovered_highlight",e)})),t.parentNode.replaceChild(i,t),setTimeout((function(){i.style.pointerEvents="auto"}),500)}},{key:"getDataFromMarks",value:function(t,e){var n=this,r=this.props.color,i="";return{id:e,position:Array.from(t).map((function(t){var e=t.parentNode,s=0;i+=t.textContent,""!==t.style.backgroundColor&&(r=t.style.backgroundColor);var a,o=p(e.childNodes);try{for(o.s();!(a=o.n()).done;){var l=a.value;if(l===t)break;s+=l.textContent.length}}catch(t){o.e(t)}finally{o.f()}return{parentXpath:n.getXpathFromNode(e),textLength:t.textContent.length,offset:s,id:t.dataset.id}})),text:i,color:r}}},{key:"getDocument",value:function(){var t,e;return null===(t=this.htmlIframe)||void 0===t||null===(e=t.current)||void 0===e?void 0:e.contentDocument}},{key:"getMarks",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==t?this.getDocument().querySelectorAll('mark.highlight[data-id="'.concat(t,'"]')):this.getDocument().querySelectorAll("mark.highlight")}},{key:"getHighlightDataById",value:function(t){var e=this.getMarks(t);return this.getDataFromMarks(e,t)}},{key:"onMouseUp",value:function(){var t=this.htmlIframe.current.contentWindow.getSelection();if(""!==t.toString()){var e=t.getRangeAt(0);this.createHighlightFromRange(e)}t.removeAllRanges()}},{key:"createHighlightFromRange",value:function(t){for(var e,n=this,r=this.getDocument().createNodeIterator(t.commonAncestorContainer,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return t.intersectsNode(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1),i=(0,a.Ox)(),s=[];e=r.nextNode();)s.push(e);if(s.forEach((function(e){e===t.endContainer&&e.splitText(t.endOffset),e===t.startContainer&&(e=e.splitText(t.startOffset)),n.createHighlightElement(e,i)})),s.length>0){var o={highlights:[].concat(h(this.props.highlights),[this.getHighlightDataById(i)])};this.props.setProps(o),this.triggerEvent("new_highlight",i,o)}}},{key:"highlight",value:function(t,e){for(var n,r,i=t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&").replace(" "," ?"),s=new RegExp(i,"gi"),o=[],l="",c=this.getDocument().createNodeIterator(this.getDocument().body,NodeFilter.SHOW_TEXT,null,!1);n=c.nextNode();)o.push({textNode:n,start:l.length}),l+=n.nodeValue;if(0!==o.length)for(;r=s.exec(l);){var u=r,h=u.index,f=u[0].length,g=h+f;if(0!==f){var m,y=(0,a.Ox)(),v=p(o.entries());try{for(v.s();!(m=v.n()).done;){var b=d(m.value,2),_=b[0],A=b[1],S=A.start,w=A.textNode,x=w.nodeValue.length;if(!(S+x<=h)){if(S>=g)break;S<h?o.splice(_+1,0,{textNode:w.splitText(h-S),start:h}):(S+x>g&&o.splice(_+1,0,{textNode:w.splitText(g-S),start:g}),this.createHighlightElement(w,y,e))}}}catch(t){v.e(t)}finally{v.f()}}else s.lastIndex++}}},{key:"triggerEvent",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.props.setProps(c({event:{name:t,value:e,_:!(null!==(n=this.props.event)&&void 0!==n&&n._)}},r))}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.data;return React.createElement("div",{style:{width:e,height:n}},React.createElement("iframe",{ref:this.htmlIframe,srcDoc:r,onLoad:this.iframeOnLoad.bind(this),frameBorder:"0",sandbox:"",width:"100%",height:"100%"}))}}],n&&m(e.prototype,n),s&&m(e,s),Object.defineProperty(e,"prototype",{writable:!1}),l}(r.Component);S.defaultProps=s.lG,S.propTypes=s.iG},526:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>Nt});var r=n(196),i=n.n(r),s=n(473),a=n(850),o=n.n(a),l=n(963),c=n(299);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(s,t);var e,n,r,i=y(s);function s(){return f(this,s),i.apply(this,arguments)}return e=s,(n=[{key:"render",value:function(){var t=this.props,e=t.position,n=t.onClick,r=t.onMouseOver,i=t.onMouseOut,s=t.color,a=t.id;return React.createElement("div",{"data-id":a,onMouseLeave:i},e.rects.map((function(t,e){return React.createElement("div",{onMouseOver:r,onClick:n,key:e,style:d({background:s},t),className:"highlight"})})))}}])&&g(e.prototype,n),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.Component),A=n(740),S=n(910),w=n(379),x=n.n(w),P=n(795),E=n.n(P),C=n(565),T=n.n(C),M=n(216),k=n.n(M),R=n(589),O=n.n(R),L=n(335),D={};D.styleTagTransform=O(),D.setAttributes=T(),D.insert=function(t){var e=document.querySelector("head"),n=window._lastElementInsertedByStyleLoader;n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.insertBefore(t,e.firstChild),window._lastElementInsertedByStyleLoader=t},D.domAPI=E(),D.insertStyleElement=k();x()(L.Z,D);L.Z&&L.Z.locals&&L.Z.locals;function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){$(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(){j=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new w(r||[]);return s._invoke=function(t,e,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return P()}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=_(a,n);if(o){if(o===u)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function h(){}function d(){}function p(){}var f={};o(f,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(x([])));m&&m!==e&&n.call(m,i)&&(f=m);var y=p.prototype=h.prototype=Object.create(f);function v(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(i,s,a,o){var l=c(t[i],t,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==I(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,o)}),(function(t){r("throw",t,a,o)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,o)}))}o(l.arg)}var i;this._invoke=function(t,n){function s(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(s,s):s()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=p,o(y,"constructor",p),o(p,"constructor",d),d.displayName=o(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(b.prototype),o(b.prototype,s,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new b(l(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),o(y,a,"Generator"),o(y,i,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=e,s?(this.method="next",this.next=s.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function B(t,e,n,r,i,s,a){try{var o=t[s](a),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,i)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){B(s,r,i,a,o,"next",t)}function o(t){B(s,r,i,a,o,"throw",t)}a(void 0)}))}}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=G(t);if(e){var i=G(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return z(this,n)}}function z(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var K=S.pipe(S.pluck("str"),S.join("")),J=S.pipe(S.pluck("str"),S.transduce(S.map(S.length),S.add,0)),Q=function(t,e){return S.pipe(S.split(""),S.map((function(t){return t.charCodeAt()})),S.map(S.prop(S.__,e.widths)))(t)},Z=function(t,e){return S.pipe(S.pluck(t),S.apply(Math.min))(e)},tt=S.pipe(S.pluck("str"),S.map(S.length),S.scan(S.add,0),S.slice(1,1/0)),et=function(t,e){return t.top>=e.top&&t.bottom<=e.bottom&&t.right<=e.right&&t.left>=e.left},nt=function(t){return(t||{}).ownerDocument||document},rt=function(t){return(nt(t)||{}).defaultView||window},it=function(t){return t instanceof HTMLElement||t instanceof rt(t).HTMLElement},st=function(t){var e=t.closest(".page");return e&&it(e)?{node:e,number:Number(e.dataset.pageNumber)}:null},at=function(t){return[t.left,t.top,t.left+t.width,t.top+t.height]},ot=function(t){return(t[2]-t[0])*(t[3]-t[1])},lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(p,t);var e,n,r,i,s,a,u,h,d=W(p);function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),$(q(e=d.call(this,t)),"eventBus",new l.EventBus),$(q(e),"linkService",new l.PDFLinkService({eventBus:e.eventBus,externalLinkTarget:2})),$(q(e),"resizeObserver",null),$(q(e),"containerNode",null),$(q(e),"unsubscribe",(function(){})),$(q(e),"attachRef",(function(t){var n=q(e),r=n.eventBus,i=n.resizeObserver;if(e.containerNode=t,e.unsubscribe(),t){var s,a=t.ownerDocument;r.on("textlayerrendered",e.onTextLayerRendered),r.on("pagesinit",e.onDocumentReady),a.addEventListener("mouseup",e.onMouseUp),null===(s=a.defaultView)||void 0===s||s.addEventListener("resize",e.debouncedScaleValue),i&&i.observe(t),e.unsubscribe=function(){var t;r.off("pagesinit",e.onDocumentReady),r.off("textlayerrendered",e.onTextLayerRendered),a.removeEventListener("mouseup",e.onMouseUp),null===(t=a.defaultView)||void 0===t||t.removeEventListener("resize",e.debouncedScaleValue),i&&i.disconnect()}}})),$(q(e),"onTextLayerRendered",(function(){e.renderHighlights()})),$(q(e),"onDocumentReady",(function(){e.handleScaleValue()})),$(q(e),"onMouseUp",(function(){var t=e.containerNode,n=rt(t).getSelection();if(n){var r=n.rangeCount>0?n.getRangeAt(0):null;n.isCollapsed||r&&t&&t.contains(r.commonAncestorContainer)&&setTimeout((function(){n.removeAllRanges();var t=function(t){var e,n,r=null==t||null===(e=t.startContainer)||void 0===e?void 0:e.parentElement,i=null==t||null===(n=t.endContainer)||void 0===n?void 0:n.parentElement;if(!it(r)||!it(i))return[];var s=st(r),a=st(i);if(null==s||!s.number||null==a||!a.number)return[];if(s.number===a.number)return[s];if(s.number===a.number-1)return[s,a];for(var o=[],l=s.node.ownerDocument;s.number<=a.number;){var c=st(l.querySelector("[data-page-number='".concat(s.number,"'")));c&&o.push(c)}return o}(r),i=function(t,e){for(var n=[],r=0,i=Array.from(t.getClientRects());r<i.length;r++){var s,a=i[r],o=X(e);try{for(o.s();!(s=o.n()).done;){var l=s.value,c=l.node.getBoundingClientRect();if(et(a,c)&&a.top>=0&&a.bottom>=0&&a.width>0&&a.height>0&&a.width<c.width&&a.height<c.height){var u={top:a.top+l.node.scrollTop-c.top,left:a.left+l.node.scrollLeft-c.left,width:a.width,height:a.height,page:l.number};n.push(u)}}}catch(t){o.e(t)}finally{o.f()}}return n}(r,t);console.log("rects",i),r&&t&&0!==t.length&&0!==i.length&&e.props.onSelectionFinished({page:t[0].number,rects:i.map((function(t){return e.relativeRectCoordsToAbsolute(t,!0)}))},r.toString())}),300)}})),$(q(e),"onMouseDown",(function(t){it(t.target)})),$(q(e),"handleScaleValue",(function(){e.viewer&&(e.viewer.currentScaleValue="auto")})),$(q(e),"debouncedScaleValue",(0,A.Ds)(e.handleScaleValue,500)),"undefined"!=typeof ResizeObserver&&(e.resizeObserver=new ResizeObserver(e.debouncedScaleValue)),e}return e=p,n=[{key:"componentDidMount",value:function(){this.init(),document.querySelector(":root").style.setProperty("--pdf-selection-color",this.props.color)}},{key:"componentDidUpdate",value:function(t){t.pdfDocument!==this.props.pdfDocument?this.init():t.highlights!==this.props.highlights&&this.renderHighlights(this.props),document.querySelector(":root").style.setProperty("--pdf-selection-color",this.props.color)}},{key:"getPage",value:(h=U(j().mark((function t(e){var n;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.props.pdfDocument,t.abrupt("return",n.getPage(e+1));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"getPageTextBlocks",value:(u=U(j().mark((function t(e){var n,r;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPage(e);case 2:return n=t.sent,t.next=5,n.getTextContent();case 5:return r=t.sent,t.abrupt("return",r.items.map((function(t){return N({page:e},t)})));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"calculateXShiftValue",value:(a=U(j().mark((function t(e,n){var r,i,s,a,o,l,c,u,h,d,p=arguments;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.str,i=e.width,s=e.page,a=e.fontName,o=!(p.length>2&&void 0!==p[2])||p[2],t.next=4,this.getPage(s);case 4:return l=t.sent,c=l.commonObjs.get(a),u=Q(r,c),h=S.sum(u),d=o?S.drop:S.dropLast,t.abrupt("return",S.pipe(d(n),S.sum,S.subtract(h),S.divide(S.__,h),S.multiply(i),S.negate)(u));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"textBlockRectToHighlightRect",value:function(t,e){var n=t.page,r=t.width,i=t.height,s=t.transform,a=this.viewer.getPageView(n).viewport,o=a.scale,l=a.viewBox,c=this.props.pdfDocument;return this.relativeRectCoordsToAbsolute({left:s[4]*o,top:(l[3]-s[5]-i)*o,height:i*o*e,width:r*o,page:Math.min(n+1,c.numPages-1)},!0)}},{key:"search",value:(s=U(j().mark((function t(e){var n,r,i,s,a,o,l,u,h,d,p,f,g,m,y,v,b,_,w,x,P,E,C,T,M=this,k=arguments;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=k.length>1&&void 0!==k[1]?k[1]:[],r=k.length>2&&void 0!==k[2]?k[2]:0,i=k.length>3&&void 0!==k[3]?k[3]:[],s=k.length>4&&void 0!==k[4]?k[4]:1.1,a=J(n.filter((function(t){return t.page!==r-2}))),!(e.length<a+2)){t.next=61;break}o=K(n),l=(0,A.IW)(e,o),u=X(l),t.prev=10,u.s();case 12:if((h=u.n()).done){t.next=37;break}return d=h.value,p=d[0],f=d.index,g=f+p.length,m=tt(n),y=S.findIndex(S.lt(f),m),v=S.findIndex(S.lte(g),m)+1,b=n.slice(y,v),_=f-m[y-1],w=m[v-1]-g,t.next=25,this.calculateXShiftValue(b.at(0),_);case 25:return x=t.sent,t.next=28,this.calculateXShiftValue(b.at(-1),w,!1);case 28:P=t.sent,b.at(0).width+=x,b.at(0).transform[4]-=x,b.at(-1).width+=P,E=Z("page",b)+1,C=b.map((function(t){return M.textBlockRectToHighlightRect(t,s)})),i.push({text:p,position:{page:E,rects:C}});case 35:t.next=12;break;case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(10),u.e(t.t0);case 42:return t.prev=42,u.f(),t.finish(42);case 45:if(r!==this.props.pdfDocument.numPages){t.next=50;break}return T=[],i.forEach((function(t,e){i.slice(e).forEach((function(e){if(t!==e&&t.text.toLowerCase()===e.text.toLowerCase()){var n,r=X(t.position.rects);try{for(r.s();!(n=r.n()).done;){var i,s=n.value,a=X(e.position.rects);try{for(a.s();!(i=a.n()).done;){var o=i.value,l=at(s),u=at(o),h=ot(u),d=c.Util.intersect(l,u);null!==d&&ot(d)/h>.9&&T.push(e)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){r.e(t)}finally{r.f()}}}))})),T=Array.from(new Set(T)),t.abrupt("return",i.filter((function(t){return!T.includes(t)})));case 50:return t.t1=this,t.t2=e,t.t3=n.filter((function(t){return t.page!==r-2})),t.next=55,this.getPageTextBlocks(r);case 55:return t.t4=t.sent,t.t5=t.t3.concat.call(t.t3,t.t4),t.t6=r+1,t.t7=i,t.t8=s,t.abrupt("return",t.t1.search.call(t.t1,t.t2,t.t5,t.t6,t.t7,t.t8));case 61:return t.t9=this,t.t10=e,t.t11=n,t.next=66,this.getPageTextBlocks(r);case 66:return t.t12=t.sent,t.t13=t.t11.concat.call(t.t11,t.t12),t.t14=r+1,t.t15=i,t.t16=s,t.abrupt("return",t.t9.search.call(t.t9,t.t10,t.t13,t.t14,t.t15,t.t16));case 72:case"end":return t.stop()}}),t,this,[[10,39,42,45]])}))),function(t){return s.apply(this,arguments)})},{key:"init",value:function(){var t=this.props.pdfDocument;this.viewer=this.viewer||new l.PDFViewer({container:this.containerNode,eventBus:this.eventBus,textLayerMode:2,removePageBorders:!0,linkService:this.linkService,renderer:"canvas",l10n:null}),this.linkService.setDocument(t),this.linkService.setViewer(this.viewer),this.viewer.setDocument(t),this.searchForHighlights()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"searchForHighlights",value:(i=U(j().mark((function t(){var e,n,r=this;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=this.props.highlights.filter((function(t){return!Object.hasOwn(t,"position")}))).length>0)){t.next=6;break}return t.next=4,Promise.allSettled(e.map((function(t){var e=t.text;return r.search(e)})));case 4:n=t.sent,this.props.onNewSearchResults(n.map((function(t,n){return t.value.map((function(t){return N({color:e[n].color},t)}))})).flat());case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"relativeRectCoordsToAbsolute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?S.divide:S.multiply,r=this.viewer.getPageView(t.page-1),i=r.width,s=r.height;return{left:n(t.left,i),top:n(t.top,s),width:n(t.width,i),height:n(t.height,s),page:t.page}}},{key:"renderHighlights",value:function(t){for(var e=this,n=(t||this.props).highlights,r=this.props.pdfDocument,i=S.groupBy(S.path(["position","page"]),S.filter(Boolean,n)),s=1;s<=r.numPages;s++){var a=this.viewer.getPageView(s-1)||{},l=a.textLayer,c=a.width,u=a.height;if(l&&null!==c&&null!==u){var h=l.textLayerDiv.querySelector(".highlight-layer");h||((h=nt(l.textLayerDiv).createElement("div")).className="highlight-layer",l.textLayerDiv.appendChild(h)),h&&o().render(React.createElement("div",null,(i[String(s)]||[]).map((function(t,n){return React.createElement(_,{id:t.id,color:t.color||e.props.color,position:N(N({},t.position),{},{rects:t.position.rects.map((function(t){return e.relativeRectCoordsToAbsolute(t)}))}),key:n,onClick:function(){e.props.onAnnotationClick(t)},onMouseOver:function(){e.props.onAnnotationHover(t)},onMouseOut:function(){e.props.onAnnotationOut()}})}))),h)}}}},{key:"render",value:function(){return React.createElement("div",{onPointerDown:this.onMouseDown,className:"pdf-annotator"},React.createElement("div",{ref:this.attachRef,onContextMenu:function(t){return t.preventDefault()},style:{height:this.props.height,width:this.props.width}},React.createElement("div",null)))}}],n&&V(e.prototype,n),r&&V(e,r),Object.defineProperty(e,"prototype",{writable:!1}),p}(r.PureComponent);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ft(t,e)}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vt(t);if(e){var i=vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mt(this,n)}}function mt(t,e){if(e&&("object"===ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yt(t)}function yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vt(t){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vt(t)}function bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _t=";base64,";function At(t){for(var e=t.indexOf(_t)+_t.length,n=t.substring(e),r=window.atob(n),i=r.length,s=new Uint8Array(new ArrayBuffer(i)),a=0;a<i;a++)s[a]=r.charCodeAt(a);return s}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(a,t);var e,n,r,s=gt(a);function a(){var t;dt(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return bt(yt(t=s.call.apply(s,[this].concat(n))),"state",{pdfDocument:null,error:null}),bt(yt(t),"documentRef",i().createRef()),t}return e=a,(n=[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){var t=this.state.pdfDocument;t&&t.destroy()}},{key:"componentDidUpdate",value:function(t){var e=t.data;this.props.data!==e&&this.load()}},{key:"componentDidCatch",value:function(t){var e=this.props.onError;e&&e(t),this.setState({pdfDocument:null,error:t})}},{key:"load",value:function(){var t=this,e=(this.documentRef.current||{}).ownerDocument,n=void 0===e?document:e,r=this.props,i=r.data,s=r.cMapUrl,a=r.cMapPacked,o=r.workerSrc,l=this.state.pdfDocument;this.setState({pdfDocument:null,error:null}),"string"==typeof o&&(c.GlobalWorkerOptions.workerSrc=o),Promise.resolve().then((function(){return l&&l.destroy()})).then((function(){i&&(0,c.getDocument)(ht(ht({},t.props),{},{data:At(i),fontExtraProperties:!0,ownerDocument:n,workerSrc:o,cMapUrl:s,cMapPacked:a})).promise.then((function(e){t.setState({pdfDocument:e})}))})).catch((function(e){return t.componentDidCatch(e)}))}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.beforeLoad,r=this.state,s=r.pdfDocument,a=r.error;return i().createElement(i().Fragment,null,i().createElement("span",{ref:this.documentRef}),a?this.renderError():s&&e?e(s):n)}},{key:"renderError",value:function(){var t=this.props.errorMessage;return t?i().cloneElement(t,{error:this.state.error}):null}}])&&pt(e.prototype,n),r&&pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.Component);function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function xt(){xt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new w(r||[]);return s._invoke=function(t,e,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return P()}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=_(a,n);if(o){if(o===u)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function h(){}function d(){}function p(){}var f={};o(f,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(x([])));m&&m!==e&&n.call(m,i)&&(f=m);var y=p.prototype=h.prototype=Object.create(f);function v(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(i,s,a,o){var l=c(t[i],t,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==wt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,o)}),(function(t){r("throw",t,a,o)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,o)}))}o(l.arg)}var i;this._invoke=function(t,n){function s(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(s,s):s()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=p,o(y,"constructor",p),o(p,"constructor",d),d.displayName=o(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(b.prototype),o(b.prototype,s,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new b(l(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),o(y,a,"Generator"),o(y,i,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=e,s?(this.method="next",this.next=s.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){Ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t,e,n,r,i,s,a){try{var o=t[s](a),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,i)}function Mt(t){return function(t){if(Array.isArray(t))return kt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ot(t,e){return Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ot(t,e)}function Lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ft(t);if(e){var i=Ft(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dt(this,n)}}function Dt(t,e){if(e&&("object"===wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return It(t)}function It(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(t)}bt(St,"defaultProps",{workerSrc:"https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js"}),window.Util=c.Util,window.R=S;var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ot(t,e)}(l,t);var e,n,i,s,a,o=Lt(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).state={lastHoveredHighlight:null},console.log(It(e)),e.highlighter=(0,r.createRef)(),e}return e=l,n=[{key:"onAnnotationCreated",value:function(t){this.props.setProps({highlights:[t].concat(Mt(this.props.highlights))}),this.triggerEvent("new_highlight",t.id)}},{key:"onAnnotationClick",value:function(t){var e=t.id;this.triggerEvent("clicked_highlight",e)}},{key:"onAnnotationHover",value:function(t){var e=t.id;e!==this.state.lastHoveredHighlight&&(this.setState({lastHoveredHighlight:e}),this.triggerEvent("hovered_highlight",e))}},{key:"onAnnotationOut",value:function(){null!==this.state.lastHoveredHighlight&&this.setState({lastHoveredHighlight:null})}},{key:"onNewSearchResults",value:(s=xt().mark((function t(e){var n;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.props.highlights.filter((function(t){return Object.hasOwn(t,"position")})),n=[].concat(Mt(e.map((function(t){return Et(Et({},t),{},{id:(0,A.Ox)()})}))),Mt(n)),this.triggerEvent("new_search_results",null,{highlights:n});case 3:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=s.apply(t,e);function a(t){Tt(i,n,r,a,o,"next",t)}function o(t){Tt(i,n,r,a,o,"throw",t)}a(void 0)}))},function(t){return a.apply(this,arguments)})},{key:"triggerEvent",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.props.setProps(Et({event:{name:t,value:e,_:!(null!==(n=this.props.event)&&void 0!==n&&n._)}},r))}},{key:"render",value:function(){var t=this;console.log(this);var e=this.props,n=e.data,r=e.color,i=e.width,s=e.height,a=e.highlights;return React.createElement(St,{data:n},(function(e){return React.createElement(lt,{ref:t.highlighter,color:r,height:s,width:i,pdfDocument:e,onAnnotationClick:t.onAnnotationClick.bind(t),onAnnotationHover:t.onAnnotationHover.bind(t),onAnnotationOut:t.onAnnotationOut.bind(t),onNewSearchResults:t.onNewSearchResults.bind(t),onSelectionFinished:function(e,n){return t.onAnnotationCreated({id:(0,A.Ox)(),text:n,position:e,color:r})},highlights:a})}))}}],n&&Rt(e.prototype,n),i&&Rt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(r.Component);Nt.defaultProps=s.lG,Nt.propTypes=s.iG},574:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var r=n(196),i=n.n(r),s=n(720),a=n(68);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(o,t);var e,n,r,s=f(o);function o(){return h(this,o),s.apply(this,arguments)}return e=o,(n=[{key:"render",value:function(){var t=c(c({},this.props),{},{data:"<pre>".concat(this.props.data,"</pre>")});return i().createElement(a.default,t)}}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(r.Component);y.defaultProps=s.lG,y.propTypes=s.iG},740:(t,e,n)=>{"use strict";n.d(e,{Ds:()=>d,IW:()=>h,Ox:()=>c});var r=n(910);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var s=void 0;function a(){a=function(t,e){return new n(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function n(t,r,i){var s=new RegExp(t,r);return e.set(s,i||e.get(t)),l(s,n.prototype)}function r(t,n){var r=e.get(n);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return o(n,RegExp),n.prototype.exec=function(e){var n=t.exec.call(this,e);return n&&(n.groups=r(n,this)),n},n.prototype[Symbol.replace]=function(n,s){if("string"==typeof s){var a=e.get(this);return t[Symbol.replace].call(this,n,s.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+a[e]})))}if("function"==typeof s){var o=this;return t[Symbol.replace].call(this,n,(function(){var t=arguments;return"object"!=i(t[t.length-1])&&(t=[].slice.call(t)).push(r(t,o)),s.apply(this,t)}))}return t[Symbol.replace].call(this,n,s)},a.apply(this,arguments)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}var c=function(){return Date.now().toString(36)+Math.floor(Math.pow(10,12)+9*Math.random()*Math.pow(10,12)).toString(36)},u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),h=function(t,e){var n=u(t);return n=n.replace(a(/(\s)/gi,{s:1}),"$<s>?"),n=new RegExp(n,"gi"),e.matchAll(n)},d=function(t,e){var n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=s;clearTimeout(n),n=setTimeout((function(){return t.apply(o,i)}),e)}}},335:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(537),i=n.n(r),s=n(645),a=n.n(s)()(i());a.push([t.id,":root{--pdf-selection-color: yellow}.pdf-annotator>div{position:absolute;overflow:auto}.pdf-annotator>div>div{padding-bottom:0;margin:unset 0}.pdf-annotator>div>div .page{margin:0 auto 10px;position:relative}.pdf-annotator>div>div .page .canvasWrapper{overflow:hidden;position:absolute}.pdf-annotator>div>div .page .canvasWrapper canvas{margin:0;display:block}.pdf-annotator>div>div .page .canvasWrapper canvas [hidden]{display:none}.pdf-annotator>div>div .page .textLayer{mix-blend-mode:multiply;position:absolute}.pdf-annotator>div>div .page .textLayer>.highlight-layer{opacity:1}.pdf-annotator>div>div .page .textLayer>.highlight-layer .highlight{cursor:pointer;position:absolute;z-index:1}.pdf-annotator>div>div .page .textLayer span,.pdf-annotator>div>div .page .textLayer br{color:rgba(0,0,0,0);position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}.pdf-annotator>div>div .page .textLayer span.markedContent{top:0;height:0}.pdf-annotator>div>div .page .textLayer br ::selection{background:rgba(0,0,0,0)}.pdf-annotator>div>div .page .textLayer ::selection{background:var(--pdf-selection-color)}.pdf-annotator>div>div .page .annotationLayer{display:none}","",{version:3,sources:["webpack://./src/lib/styles.scss"],names:[],mappings:"AAAA,MACE,6BAAA,CAGF,mBACE,iBAAA,CACA,aAAA,CAEA,uBACE,gBAAA,CACA,cAAA,CAEA,6BACE,kBAAA,CACA,iBAAA,CAEA,4CACE,eAAA,CACA,iBAAA,CAEA,mDACE,QAAA,CACA,aAAA,CAEA,4DACE,YAAA,CAKN,wCACE,uBAAA,CACA,iBAAA,CAEA,yDACE,SAAA,CAEA,oEACE,cAAA,CACA,iBAAA,CACA,SAAA,CAIJ,wFACE,mBAAA,CACA,iBAAA,CACA,eAAA,CACA,WAAA,CACA,sBAAA,CAGF,2DACE,KAAA,CACA,QAAA,CAGF,uDACE,wBAAA,CAGF,oDACE,qCAAA,CAIJ,8CACE,YAAA",sourcesContent:[":root {\r\n  --pdf-selection-color: yellow;\r\n}\r\n\r\n.pdf-annotator > div {\r\n  position: absolute;\r\n  overflow: auto;\r\n\r\n  & > div {\r\n    padding-bottom: 0;\r\n    margin: unset 0;\r\n\r\n    .page {\r\n      margin: 0 auto 10px;\r\n      position: relative;\r\n\r\n      .canvasWrapper {\r\n        overflow: hidden;\r\n        position: absolute;\r\n    \r\n        canvas {\r\n          margin: 0;\r\n          display: block;\r\n    \r\n          [hidden] {\r\n            display: none;\r\n          }\r\n        }\r\n      }\r\n\r\n      .textLayer {\r\n        mix-blend-mode: multiply;\r\n        position: absolute;\r\n      \r\n        & > .highlight-layer {\r\n          opacity: 1;\r\n      \r\n          .highlight {\r\n            cursor: pointer;\r\n            position: absolute;\r\n            z-index: 1;\r\n          }\r\n        }\r\n      \r\n        span, br {\r\n          color: transparent;\r\n          position: absolute;\r\n          white-space: pre;\r\n          cursor: text;\r\n          transform-origin: 0% 0%;\r\n        }\r\n        \r\n        span.markedContent {\r\n          top: 0;\r\n          height: 0;\r\n        }\r\n      \r\n        br ::selection {\r\n          background: transparent;\r\n        }\r\n      \r\n        & ::selection {\r\n          background: var(--pdf-selection-color);\r\n        }\r\n      }\r\n\r\n      .annotationLayer {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n"],sourceRoot:""}]);const o=a},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);r&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([s]).join("\n")}return[e].join("\n")}},299:(module,__unused_webpack_exports,__webpack_require__)=>{var factory;globalThis,factory=()=>(()=>{"use strict";var __webpack_modules__=[,(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=u,e.arraysToBytes=function(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let n=0;for(let r=0;r<e;r++)n+=u(t[r]);let r=0;const i=new Uint8Array(n);for(let n=0;n<e;n++){let e=t[n];e instanceof Uint8Array||(e="string"==typeof e?c(e):new Uint8Array(e));const s=e.byteLength;i.set(e,r),r+=s}return i},e.assert=function(t,e){t||a(e)},e.bytesToString=function(t){"object"==typeof t&&null!==t&&void 0!==t.length||a("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const s=Math.min(i+n,e),a=t.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")},e.createPromiseCapability=function(){const t=Object.create(null);let e=!1;return Object.defineProperty(t,"settled",{get:()=>e}),t.promise=new Promise((function(n,r){t.resolve=function(t){e=!0,n(t)},t.reject=function(t){e=!0,r(t)}})),t},e.createValidAbsoluteUrl=function(t,e=null,n=null){if(!t)return null;try{if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e&&e.length>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=f(t)}catch(t){}}const r=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(t){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,(t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return i},e.info=function(t){i>=r.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.objectFromMap=function(t){const e=Object.create(null);for(const[n,r]of t)e[n]=r;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(i=t)},e.shadow=o,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=c,e.stringToPDFString=function(t){if(t[0]>="ï"){let e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{const n=new TextDecoder(e,{fatal:!0}),r=c(t);return n.decode(r)}catch(t){s(`stringToPDFString: "${t}".`)}}const e=[];for(let n=0,r=t.length;n<r;n++){const r=p[t.charCodeAt(n)];e.push(r?String.fromCharCode(r):t.charAt(n))}return e.join("")},e.stringToUTF16BEString=function(t){const e=["þÿ"];for(let n=0,r=t.length;n<r;n++){const r=t.charCodeAt(n);e.push(String.fromCharCode(r>>8&255),String.fromCharCode(255&r))}return e.join("")},e.stringToUTF8String=f,e.unreachable=a,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=s,n(2),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.LINE_FACTOR=1.35,e.LINE_DESCENT_FACTOR=.35,e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.AnnotationEditorPrefix="pdfjs_internal_editor_",e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},e.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"},e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const r={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=r,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let i=r.WARNINGS;function s(t){i>=r.WARNINGS&&console.log(`Warning: ${t}`)}function a(t){throw new Error(t)}function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}const l=function(){function t(e,n){this.constructor===t&&a("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();function c(t){"string"!=typeof t&&a("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=255&t.charCodeAt(r);return n}function u(t){return void 0!==t.length?t.length:void 0!==t.byteLength?t.byteLength:void a("Invalid argument for arrayByteLength")}e.BaseException=l,e.PasswordException=class extends l{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends l{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends l{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends l{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends l{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends l{constructor(t){super(t,"FormatError")}},e.AbortException=class extends l{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return o(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return o(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return o(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const h=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class d{static makeHexColor(t,e,n){return`#${h[t]}${h[e]}${h[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[2],e[2]=n,n=e[1],e[1]=e[3],e[3]=n,t[1]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}static getAxialAlignedBoundingBox(t,e){const n=d.applyTransform(t,e),r=d.applyTransform(t.slice(2,4),e),i=d.applyTransform([t[0],t[3]],e),s=d.applyTransform([t[2],t[1]],e);return[Math.min(n[0],r[0],i[0],s[0]),Math.min(n[1],r[1],i[1],s[1]),Math.max(n[0],r[0],i[0],s[0]),Math.max(n[1],r[1],i[1],s[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],i=t[2]*e[0]+t[3]*e[2],s=t[2]*e[1]+t[3]*e[3],a=(n+s)/2,o=Math.sqrt((n+s)**2-4*(n*s-i*r))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const i=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return i>s?null:[n,i,r,s]}static bezierBoundingBox(t,e,n,r,i,s,a,o){const l=[],c=[[],[]];let u,h,d,p,f,g,m,y;for(let c=0;c<2;++c)if(0===c?(h=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*a,d=3*n-3*t):(h=6*e-12*r+6*s,u=-3*e+9*r-9*s+3*o,d=3*r-3*e),Math.abs(u)<1e-12){if(Math.abs(h)<1e-12)continue;p=-d/h,0<p&&p<1&&l.push(p)}else m=h*h-4*d*u,y=Math.sqrt(m),m<0||(f=(-h+y)/(2*u),0<f&&f<1&&l.push(f),g=(-h-y)/(2*u),0<g&&g<1&&l.push(g));let v,b=l.length;const _=b;for(;b--;)p=l[b],v=1-p,c[0][b]=v*v*v*t+3*v*v*p*n+3*v*p*p*i+p*p*p*a,c[1][b]=v*v*v*e+3*v*v*p*r+3*v*p*p*s+p*p*p*o;return c[0][_]=t,c[1][_]=e,c[0][_+1]=a,c[1][_+1]=o,c[0].length=c[1].length=_+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=d;const p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(t){return decodeURIComponent(escape(t))}},(t,e,n)=>{n(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:n}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=t,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=n}function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let n;if("string"==typeof t||t instanceof URL)n={url:t};else if((0,_util.isArrayBuffer)(t))n={data:t};else if(t instanceof PDFDataRangeTransport)n={range:t};else{if("object"!=typeof t)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");n=t}const r=Object.create(null);let i=null,s=null;for(const t in n){const e=n[t];switch(t){case"url":if("undefined"!=typeof window)try{r[t]=new URL(e,window.location).href;continue}catch(t){(0,_util.warn)(`Cannot create valid URL: "${t}".`)}else if("string"==typeof e||e instanceof URL){r[t]=e.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":i=e;continue;case"worker":s=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)r[t]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"==typeof e)r[t]=(0,_util.stringToBytes)(e);else if("object"!=typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)(e))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");r[t]=new Uint8Array(e)}else r[t]=new Uint8Array(e)}continue}r[t]=e}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,r.enableXfa=!0===r.enableXfa,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),"string"!=typeof r.cMapUrl&&(r.cMapUrl=null),"string"!=typeof r.standardFontDataUrl&&(r.standardFontDataUrl=null),"boolean"!=typeof r.useWorkerFetch&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof r.useSystemFonts&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),"object"==typeof r.ownerDocument&&null!==r.ownerDocument||(r.ownerDocument=globalThis.document),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!s){const t={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};s=t.port?PDFWorker.fromPort(t):new PDFWorker(t),e._worker=s}const a=e.docId;return s.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(s,r,i,a),n=new Promise((function(t){let e;i?e=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},i):r.data||(e=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),t(e)}));return Promise.all([t,n]).then((function([t,n]){if(e.destroyed)throw new Error("Loading aborted");const i=new _message_handler.MessageHandler(a,t,s.port),o=new WorkerTransport(i,e,n,r);e._transport=o,i.send("Ready",null)}))})).catch(e._capability.reject),e}async function _fetchDocument(t,e,n,r){if(t.destroyed)throw new Error("Worker was destroyed");n&&(e.length=n.length,e.initialData=n.initialData,e.progressiveDone=n.progressiveDone,e.contentDispositionFilename=n.contentDispositionFilename);const i=await t.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(e.data&&(e.data=null),t.destroyed)throw new Error("Worker was destroyed");return i}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await(this._transport?.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,n,r,i=!1){this._pageIndex=t,this._pageInfo=e,this._ownerDocument=r,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:t="display"}={}){const e=this._transport.getRenderingIntent(t);let n=this._annotationPromises.get(e.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,e.renderingIntent),this._annotationPromises.set(e.cacheKey,n),n=n.then((t=>{for(const e of t)void 0!==e.titleObj&&Object.defineProperty(e,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),e.titleObj.str)}),void 0!==e.contentsObj&&Object.defineProperty(e,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),e.contentsObj.str)});return t}))),n}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:r=_util.AnnotationMode.ENABLE,transform:i=null,imageLayer:s=null,canvasFactory:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&r===_util.AnnotationMode.ENABLE&&(r=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&r===_util.AnnotationMode.ENABLE&&(r=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const d=this._transport.getRenderingIntent(n,r,h);this.pendingCleanup=!1,l||(l=this._transport.getOptionalContentConfig());let p=this._intentStates.get(d.cacheKey);p||(p=Object.create(null),this._intentStates.set(d.cacheKey,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const f=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),g=!!(d.renderingIntent&_util.RenderingIntentFlag.PRINT);p.displayReadyCapability||(p.displayReadyCapability=(0,_util.createPromiseCapability)(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(d));const m=t=>{p.renderTasks.delete(y),(this.cleanupAfterRender||g)&&(this.pendingCleanup=!0),this._tryCleanup(),t?(y.capability.reject(t),this._abortOperatorList({intentState:p,reason:t instanceof Error?t:new Error(t)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},y=new InternalRenderTask({callback:m,params:{canvasContext:t,viewport:e,transform:i,imageLayer:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:f,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:u});(p.renderTasks||=new Set).add(y);const v=y.task;return Promise.all([p.displayReadyCapability.promise,l]).then((([t,e])=>{this.pendingCleanup?m():(this._stats&&this._stats.time("Rendering"),y.initializeGraphics({transparency:t,optionalContentConfig:e}),y.operatorListChanged())})).catch(m),v}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}={}){const r=this._transport.getRenderingIntent(t,e,n,!0);let i,s=this._intentStates.get(r.cacheKey);return s||(s=Object.create(null),this._intentStates.set(r.cacheKey,s)),s.opListReadCapability||(i=Object.create(null),i.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(i))},s.opListReadCapability=(0,_util.createPromiseCapability)(),(s.renderTasks||=new Set).add(i),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(r)),s.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==t,includeMarkedContent:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>_xfa_text.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,n){const r=e.getReader(),i={items:[],styles:Object.create(null)};!function e(){r.read().then((function({value:n,done:r}){r?t(i):(Object.assign(i.styles,n.styles),i.items.push(...n.items),e())}),n)}()}))}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageMap:n}){const r=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:n}).getReader(),i=this._intentStates.get(e);i.streamReader=r;const s=()=>{r.read().then((({value:t,done:e})=>{e?i.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,i),s())}),(t=>{if(i.streamReader=null,!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(const t of i.renderTasks)t.operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(t);else{if(!i.opListReadCapability)throw t;i.opListReadCapability.reject(t)}}}))};s()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(!n){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException)return void(t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:e,force:!0}),t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(t.streamReader.cancel(new _util.AbortException(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,e){const n={data:structuredClone(t,e)};this._deferred.then((()=>{for(const t of this._listeners)t.call(this,n)}))}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const n=this._listeners.indexOf(e);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let n;try{if(n=new URL(t),!n.origin||"null"===n.origin)return!1}catch(t){return!1}const r=new URL(e,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))};class PDFWorker{static#e=new WeakMap;constructor({name:t=null,port:e=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#e.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return PDFWorker.#e.set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),n=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",i),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||r()};e.addEventListener("error",i),n.on("test",(t=>{e.removeEventListener("error",i),this.destroyed?r():t?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())})),n.on("ready",(t=>{if(e.removeEventListener("error",i),this.destroyed)r();else try{s()}catch(t){this._setupFakeWorker()}}));const s=()=>{const t=new Uint8Array;n.send("test",t,[t.buffer])};return void s()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const n="fake"+PDFWorkerUtil.fakeWorkerId++,r=new _message_handler.MessageHandler(n+"_worker",n,e);t.setup(r,e);const i=new _message_handler.MessageHandler(n,n+"_worker",e);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#e.has(t.port)?this.#e.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#n=null;#r=new Map;#i=new Map;#s=null;constructor(t,e,n,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,r.useWorkerFetch||(this.CMapReaderFactory=new r.CMapReaderFactory({baseUrl:r.cMapUrl,isCompressed:r.cMapPacked}),this.StandardFontDataFactory=new r.StandardFontDataFactory({baseUrl:r.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#n}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,n=null,r=!1){let i=_util.RenderingIntentFlag.DISPLAY,s=null;switch(t){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=(i&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}return r&&(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:`${i}_${_annotation_storage.AnnotationStorage.getHash(s)}`,annotationStorageMap:s}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const e of this.#r.values())t.push(e._destroy());this.#r.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#s=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:n}){n?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const n=(0,_util.createPromiseCapability)(),r=this._fullReader;return r.headersReady.then((()=>{r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),r.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),n.reject),n.promise})),t.on("GetRangeReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then((function({value:t,done:n}){n?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{n.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(t,this))})),t.on("DocException",(function(t){let n;switch(t.name){case"PasswordException":n=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":n=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}e._capability.reject(n)})),t.on("PasswordRequest",(t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),e.onPassword){const n=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{e.onPassword(n,t.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||this.#r.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,n,r])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(n){case"Font":const i=this._params;if("error"in r){const t=r.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(e,t);break}let s=null;i.pdfBug&&globalThis.FontInspector?.enabled&&(s={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const a=new _font_loader.FontFaceObject(r,{isEvalSupported:i.isEvalSupported,disableFontFace:i.disableFontFace,ignoreErrors:i.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:s});this.fontLoader.bind(a).catch((n=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!i.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(e,a)}));break;case"FontPath":case"Image":this.commonObjs.resolve(e,r);break;default:throw new Error(`Got unknown common object type ${n}`)}})),t.on("obj",(([t,e,n,r])=>{if(this.destroyed)return;const i=this.#r.get(e);if(!i.objs.has(t))switch(n){case"Image":i.objs.resolve(t,r);const e=8e6;if(r){let t;if(r.bitmap){const{bitmap:e,width:n,height:s}=r;t=n*s*4,i._bitmaps.add(e)}else t=r.data?.length||0;t>e&&(i.cleanupAfterRender=!0)}break;case"Pattern":i.objs.resolve(t,r);break;default:throw new Error(`Got unknown object type ${n}`)}})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("DocStats",(t=>{this.destroyed||(this.#n=Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))})),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#i.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(e,t,this,this._params.ownerDocument,this._params.pdfBug);return this.#r.set(e,n),n}));return this.#i.set(e,r),r}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#s||=this.messageHandler.sendWithPromise("GetMetadata",null).then((t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const t of this.#r.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#s=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}class PDFObjects{#a=Object.create(null);#o(t){const e=this.#a[t];return e||(this.#a[t]={capability:(0,_util.createPromiseCapability)(),data:null})}get(t,e=null){if(e){const n=this.#o(t);return n.capability.promise.then((()=>e(n.data))),null}const n=this.#a[t];if(!n?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){return this.#a[t]?.capability.settled||!1}resolve(t,e=null){const n=this.#o(t);n.data=e,n.capability.resolve()}clear(){this.#a=Object.create(null)}}class RenderTask{#l=null;constructor(t){this.#l=t,this.onContinue=null}get promise(){return this.#l.capability.promise}cancel(){this.#l.cancel()}get separateAnnots(){const{separateAnnots:t}=this.#l.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#l;return t.form||t.canvas&&e?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#c=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:s,pageIndex:a,canvasFactory:o,useRequestAnimationFrame:l=!1,pdfBug:c=!1,pageColors:u=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=o,this._pdfBug=c,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#c.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#c.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:i,imageLayer:s,background:a}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,s,e,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#c.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#c.delete(this._canvas),this.callback())))}}const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=n(1),i=n(6),s=n(10);class a{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this._storage.get(t);return void 0===n?e:Object.assign(e,n)}getRawValue(t){return this._storage.get(t)}remove(t){if(this._storage.delete(t),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this._storage.values())if(t instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this._storage.get(t);let r=!1;if(void 0!==n)for(const[t,i]of Object.entries(e))n[t]!==i&&(r=!0,n[t]=i);else r=!0,this._storage.set(t,e);r&&this.#u(),e instanceof i.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this._storage.has(t)}getAll(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}get size(){return this._storage.size}#u(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new o(this)}get serializable(){if(0===this._storage.size)return null;const t=new Map;for(const[e,n]of this._storage){const r=n instanceof i.AnnotationEditor?n.serialize():n;r&&t.set(e,r)}return t}static getHash(t){if(!t)return"";const e=new s.MurmurHash3_64;for(const[n,r]of t)e.update(`${n}:${JSON.stringify(r)}`);return e.hexdigest()}}e.AnnotationStorage=a;class o extends a{#h=null;constructor(t){super(),this.#h=structuredClone(t.serializable)}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#h}}e.PrintAnnotationStorage=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=n(7),i=n(1);class s{#d=this.focusin.bind(this);#p=this.focusout.bind(this);#f=!1;#g=!1;#m=!1;#y=s._zIndex++;static _colorManager=new r.ColorManager;static _zIndex=1;constructor(t){this.constructor===s&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null;const[e,n]=this.parent.viewportBaseDimensions;this.x=t.x/e,this.y=t.y/n,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#y}focusin(t){this.#f?this.#f=!1:this.parent.setSelected(this)}focusout(t){this.isAttachedToDOM&&(t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove()))}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(t){const e=this.parent.div.getBoundingClientRect();this.startX=t.clientX-e.x,this.startY=t.clientY-e.y,t.dataTransfer.setData("text/plain",this.id),t.dataTransfer.effectAllowed="move"}setAt(t,e,n,r){const[i,s]=this.parent.viewportBaseDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/i,this.y=(e+r)/s,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(t,e){const[n,r]=this.parent.viewportBaseDimensions;[t,e]=this.screenToPageTranslation(t,e),this.x+=t/n,this.y+=e/r,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(t,e){const{rotation:n}=this.parent.viewport;switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}setDims(t,e){const[n,r]=this.parent.viewportBaseDimensions;this.div.style.width=100*t/n+"%",this.div.style.height=100*e/r+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#d),this.div.addEventListener("focusout",this.#p);const[t,e]=this.getInitialTranslation();return this.translate(t,e),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(t){const e=r.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#f=!0)}getRect(t,e){const[n,r]=this.parent.viewportBaseDimensions,[i,s]=this.parent.pageDimensions,a=i*t/n,o=s*e/r,l=this.x*i,c=this.y*s,u=this.width*i,h=this.height*s;switch(this.rotation){case 0:return[l+a,s-c-o-h,l+a+u,s-c-o];case 90:return[l+o,s-c+a,l+o+h,s-c+a+u];case 180:return[l-a-u,s-c+o,l-a,s-c+o+h];case 270:return[l-o-h,s-c-a-u,l-o,s-c-a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,i,s]=t,a=i-n,o=s-r;switch(this.rotation){case 0:return[n,e-s,a,o];case 90:return[n,e-r,o,a];case 180:return[i,e-r,a,o];case 270:return[i,e-s,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#d)}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(t,e){const n=new this.prototype.constructor({parent:e,id:e.getNextId()});n.rotation=t.rotation;const[r,i]=e.pageDimensions,[s,a,o,l]=n.getRectInCurrentCoords(t.rect,i);return n.x=s/r,n.y=a/i,n.width=o/r,n.height=l/i,n}remove(){this.div.removeEventListener("focusin",this.#d),this.div.removeEventListener("focusout",this.#p),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(t,e){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}e.AnnotationEditor=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=function(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))},e.opacityToHex=function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var r=n(1),i=n(8);class s{#v=0;getId(){return`${r.AnnotationEditorPrefix}${this.#v++}`}}class a{#b=[];#_=!1;#A;#S=-1;constructor(t=128){this.#A=t}add({cmd:t,undo:e,mustExec:n,type:r=NaN,overwriteIfSameType:i=!1,keepUndo:s=!1}){if(n&&t(),this.#_)return;const a={cmd:t,undo:e,type:r};if(-1===this.#S)return this.#b.length>0&&(this.#b.length=0),this.#S=0,void this.#b.push(a);if(i&&this.#b[this.#S].type===r)return s&&(a.undo=this.#b[this.#S].undo),void(this.#b[this.#S]=a);const o=this.#S+1;o===this.#A?this.#b.splice(0,1):(this.#S=o,o<this.#b.length&&this.#b.splice(o)),this.#b.push(a)}undo(){-1!==this.#S&&(this.#_=!0,this.#b[this.#S].undo(),this.#_=!1,this.#S-=1)}redo(){this.#S<this.#b.length-1&&(this.#S+=1,this.#_=!0,this.#b[this.#S].cmd(),this.#_=!1)}hasSomethingToUndo(){return-1!==this.#S}hasSomethingToRedo(){return this.#S<this.#b.length-1}destroy(){this.#b=null}}e.CommandManager=a;class o{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const e=o.platform.isMac;for(const[n,r]of t)for(const t of n){const n=t.startsWith("mac+");e&&n?(this.callbacks.set(t.slice(4),r),this.allKeys.add(t.split("+").at(-1))):e||n||(this.callbacks.set(t,r),this.allKeys.add(t.split("+").at(-1)))}}static get platform(){const t="undefined"!=typeof navigator?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}#w(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#w(e));n&&(n.bind(t)(),e.stopPropagation(),e.preventDefault())}}e.KeyboardManager=o;class l{#x=null;copy(t){t&&(Array.isArray(t)?this.#x=t.map((t=>t.serialize())):this.#x=[t.serialize()],this.#x=this.#x.filter((t=>!!t)),0===this.#x.length&&(this.#x=null))}paste(){return this.#x}isEmpty(){return null===this.#x}destroy(){this.#x=null}}class c{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(t),(0,r.shadow)(this,"_colors",t)}convert(t){const e=(0,i.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[t,n]of this._colors)if(n.every(((t,n)=>t===e[n])))return c._colorsMapping.get(t);return e}getHexCode(t){const e=this._colors.get(t);return e?r.Util.makeHexColor(...e):t}}e.ColorManager=c;class u{#P=null;#E=new Map;#C=new Map;#T=new l;#M=new a;#k=0;#R=null;#O=null;#L=new s;#D=!1;#I=r.AnnotationEditorType.NONE;#F=new Set;#N=this.keydown.bind(this);#j=this.onEditingAction.bind(this);#B=this.onPageChanging.bind(this);#U={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#V=null;static _keyboardManager=new o([[["ctrl+a","mac+meta+a"],u.prototype.selectAll],[["ctrl+c","mac+meta+c"],u.prototype.copy],[["ctrl+v","mac+meta+v"],u.prototype.paste],[["ctrl+x","mac+meta+x"],u.prototype.cut],[["ctrl+z","mac+meta+z"],u.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],u.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],u.prototype.delete],[["Escape","mac+Escape"],u.prototype.unselectAll]]);constructor(t,e){this.#V=t,this.#O=e,this.#O._on("editingaction",this.#j),this.#O._on("pagechanging",this.#B)}destroy(){this.#H(),this.#O._off("editingaction",this.#j),this.#O._off("pagechanging",this.#B);for(const t of this.#C.values())t.destroy();this.#C.clear(),this.#E.clear(),this.#P=null,this.#F.clear(),this.#T.destroy(),this.#M.destroy()}onPageChanging({pageNumber:t}){this.#k=t-1}focusMainContainer(){this.#V.focus()}#W(){this.#V.addEventListener("keydown",this.#N)}#H(){this.#V.removeEventListener("keydown",this.#N)}keydown(t){this.getActive()?.shouldGetKeyboardEvents()||u._keyboardManager.exec(this,t)}onEditingAction(t){["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)&&this[t.name]()}#z(t){Object.entries(t).some((([t,e])=>this.#U[t]!==e))&&this.#O.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#U,t)})}#q(t){this.#O.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#W(),this.#z({isEditing:this.#I!==r.AnnotationEditorType.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#M.hasSomethingToUndo(),hasSomethingToRedo:this.#M.hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:this.#T.isEmpty()})):(this.#H(),this.#z({isEditing:!1}))}registerEditorTypes(t){this.#R=t;for(const t of this.#R)this.#q(t.defaultPropertiesToUpdate)}getId(){return this.#L.getId()}addLayer(t){this.#C.set(t.pageIndex,t),this.#D?t.enable():t.disable()}removeLayer(t){this.#C.delete(t.pageIndex)}updateMode(t){if(this.#I=t,t===r.AnnotationEditorType.NONE)this.setEditingState(!1),this.#$();else{this.setEditingState(!0),this.#X();for(const e of this.#C.values())e.updateMode(t)}}updateToolbar(t){t!==this.#I&&this.#O.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){for(const n of this.#F)n.updateParams(t,e);for(const n of this.#R)n.updateDefaultParams(t,e)}#X(){if(!this.#D){this.#D=!0;for(const t of this.#C.values())t.enable()}}#$(){if(this.unselectAll(),this.#D){this.#D=!1;for(const t of this.#C.values())t.disable()}}getEditors(t){const e=[];for(const n of this.#E.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#E.get(t)}addEditor(t){this.#E.set(t.id,t)}removeEditor(t){this.#E.delete(t.id),this.unselect(t)}#Y(t){const e=this.#C.get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)}setActiveEditor(t){this.#P!==t&&(this.#P=t,t&&this.#q(t.propertiesToUpdate))}toggleSelected(t){if(this.#F.has(t))return this.#F.delete(t),t.unselect(),void this.#z({hasSelectedEditor:this.hasSelection});this.#F.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#z({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#F)e!==t&&e.unselect();this.#F.clear(),this.#F.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#z({hasSelectedEditor:!0})}isSelected(t){return this.#F.has(t)}unselect(t){t.unselect(),this.#F.delete(t),this.#z({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#F.size}undo(){this.#M.undo(),this.#z({hasSomethingToUndo:this.#M.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()})}redo(){this.#M.redo(),this.#z({hasSomethingToUndo:!0,hasSomethingToRedo:this.#M.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(t){this.#M.add(t),this.#z({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}#G(){if(0===this.#E.size)return!0;if(1===this.#E.size)for(const t of this.#E.values())return t.isEmpty();return!1}delete(){if(this.#P&&this.#P.commitOrRemove(),!this.hasSelection)return;const t=[...this.#F];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#Y(e)},mustExec:!0})}copy(){if(this.#P&&this.#P.commitOrRemove(),this.hasSelection){const t=[];for(const e of this.#F)e.isEmpty()||t.push(e);if(0===t.length)return;this.#T.copy(t),this.#z({hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(this.#T.isEmpty())return;this.unselectAll();const t=this.#C.get(this.#k),e=this.#T.paste().map((e=>t.deserialize(e)));this.addCommands({cmd:()=>{for(const t of e)this.#Y(t);this.#K(e)},undo:()=>{for(const t of e)t.remove()},mustExec:!0})}#K(t){this.#F.clear();for(const e of t)e.isEmpty()||(this.#F.add(e),e.select());this.#z({hasSelectedEditor:!0})}selectAll(){for(const t of this.#F)t.commit();this.#K(this.#E.values())}unselectAll(){if(this.#P)this.#P.commitOrRemove();else if(0!==this.#K.size){for(const t of this.#F)t.unselect();this.#F.clear(),this.#z({hasSelectedEditor:!1})}}isActive(t){return this.#P===t}getActive(){return this.#P}getMode(){return this.#I}}e.AnnotationEditorUIManager=u},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getColorValues=function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,m(r))}e.remove()},e.getCurrentTransform=function(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform();return[e,n,r,i,s,a]},e.getCurrentTransformInverse=function(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform().invertSelf();return[e,n,r,i,s,a]},e.getFilenameFromUrl=function(t){const e=t.indexOf("#"),n=t.indexOf("?"),r=Math.min(e>0?e:t.length,n>0?n:t.length);return t.substring(t.lastIndexOf("/",r)+1,r)},e.getPdfFilenameFromUrl=function(t,e="document.pdf"){if("string"!=typeof t)return e;if(p(t))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let s=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch(t){}return s||e},e.getRGB=m,e.getXfaPageViewport=function(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new h({viewBox:s,scale:e,rotation:n})},e.isDataScheme=p,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=f,e.loadScript=function(t,e=!1){return new Promise(((n,r)=>{const i=document.createElement("script");i.src=t,i.onload=function(t){e&&i.remove(),n(t)},i.onerror=function(){r(new Error(`Cannot load script at: ${i.src}`))},(document.head||document.documentElement).append(i)}))};var r=n(9),i=n(1);e.AnnotationPrefix="pdfjs_internal_id_";class s{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=s;class a extends r.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function o(t,e=!1){if(f(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);return e?new Uint8Array(await n.arrayBuffer()):(0,i.stringToBytes)(await n.text())}return new Promise(((n,r)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),e&&(s.responseType="arraybuffer"),s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(200===s.status||0===s.status){let t;if(e&&s.response?t=new Uint8Array(s.response):!e&&s.responseText&&(t=(0,i.stringToBytes)(s.responseText)),t)return void n(t)}r(new Error(s.statusText))}},s.send(null)}))}e.DOMCanvasFactory=a;class l extends r.BaseCMapReaderFactory{_fetchData(t,e){return o(t,this.isCompressed).then((t=>({cMapData:t,compressionType:e})))}}e.DOMCMapReaderFactory=l;class c extends r.BaseStandardFontDataFactory{_fetchData(t){return o(t,!0)}}e.DOMStandardFontDataFactory=c;class u extends r.BaseSVGFactory{_createSVG(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}e.DOMSVGFactory=u;class h{constructor({viewBox:t,scale:e,rotation:n,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=r,this.offsetY=i;const a=(t[2]+t[0])/2,o=(t[3]+t[1])/2;let l,c,u,h,d,p,f,g;switch((n%=360)<0&&(n+=360),n){case 180:l=-1,c=0,u=0,h=1;break;case 90:l=0,c=1,u=1,h=0;break;case 270:l=0,c=-1,u=-1,h=0;break;case 0:l=1,c=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(u=-u,h=-h),0===l?(d=Math.abs(o-t[1])*e+r,p=Math.abs(a-t[0])*e+i,f=Math.abs(t[3]-t[1])*e,g=Math.abs(t[2]-t[0])*e):(d=Math.abs(a-t[0])*e+r,p=Math.abs(o-t[1])*e+i,f=Math.abs(t[2]-t[0])*e,g=Math.abs(t[3]-t[1])*e),this.transform=[l*e,c*e,u*e,h*e,d-l*e*a-u*e*o,p-c*e*a-h*e*o],this.width=f,this.height=g}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new h({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(t,e){return i.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=i.Util.applyTransform([t[0],t[1]],this.transform),n=i.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return i.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=h;class d extends i.BaseException{constructor(t,e){super(t,"RenderingCancelledException"),this.type=e}}function p(t){const e=t.length;let n=0;for(;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function f(t,e){try{const{protocol:n}=e?new URL(t,e):new URL(t);return"http:"===n||"https:"===n}catch(t){return!1}}let g;function m(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):((0,i.warn)(`Not a valid color format: "${t}"`),[0,0,0])}e.RenderingCancelledException=d,e.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(t){t in this.started&&(0,i.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,i.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const t of this.times){const n=t.name;n.length>e&&(e=n.length)}for(const n of this.times){const r=n.end-n.start;t.push(`${n.name.padEnd(e)} ${r}ms\n`)}return t.join("")}},e.PDFDateString=class{static toDateObject(t){if(!t||"string"!=typeof t)return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=g.exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(e[3],10);i=i>=1&&i<=31?i:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,a+=u):"+"===l&&(s-=c,a-=u),new Date(Date.UTC(n,r,i,s,a,o))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=n(1);class i{constructor(){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d")}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=i;class s{constructor({baseUrl:t=null,isCompressed:e=!1}){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(e,n).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}_fetchData(t,e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=s;class a{constructor({baseUrl:t=null}){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=a;class o{constructor(){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=n(1);const i=3285377520,s=4294901760,a=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?4294967295&t:i,this.h2=t?4294967295&t:i}update(t){let e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(let r=0,i=t.length;r<i;r++){const i=t.charCodeAt(r);i<=255?e[n++]=i:(e[n++]=i>>>8,e[n++]=255&i)}}else{if(!(0,r.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),n=e.byteLength}const i=n>>2,o=n-4*i,l=new Uint32Array(e.buffer,0,i);let c=0,u=0,h=this.h1,d=this.h2;const p=3432918353,f=461845907,g=11601,m=13715;for(let t=0;t<i;t++)1&t?(c=l[t],c=c*p&s|c*g&a,c=c<<15|c>>>17,c=c*f&s|c*m&a,h^=c,h=h<<13|h>>>19,h=5*h+3864292196):(u=l[t],u=u*p&s|u*g&a,u=u<<15|u>>>17,u=u*f&s|u*m&a,d^=u,d=d<<13|d>>>19,d=5*d+3864292196);switch(c=0,o){case 3:c^=e[4*i+2]<<16;case 2:c^=e[4*i+1]<<8;case 1:c^=e[4*i],c=c*p&s|c*g&a,c=c<<15|c>>>17,c=c*f&s|c*m&a,1&i?h^=c:d^=c}this.h1=h,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;t^=e>>>1,t=3981806797*t&s|36045*t&a,e=4283543511*e&s|(2950163797*(e<<16|t>>>16)&s)>>>16,t^=e>>>1,t=444984403*t&s|60499*t&a,e=3301882366*e&s|(3120437893*(e<<16|t>>>16)&s)>>>16,t^=e>>>1;const n=(t>>>0).toString(16),r=(e>>>0).toString(16);return n.padStart(8,"0")+r.padStart(8,"0")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=n(1);class i{constructor({docId:t,onUnsupportedFeature:e,ownerDocument:n=globalThis.document,styleElement:s=null}){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=t,this._onUnsupportedFeature=e,this._document=n,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}insertRule(t){let e=this.styleElement;e||(e=this.styleElement=this._document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(e));const n=e.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(t){if(t.attached||t.missingFile)return;if(t.attached=!0,this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${e.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent([e],[t],r)}))}}_queueLoadingCallback(t){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,e,n){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let s;e.FontLoader=s,e.FontLoader=s=class extends i{constructor(t){super(t),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;return("undefined"==typeof navigator||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(t=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingContext,n={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function(){for((0,r.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(n),n}get _loadTestFont(){return(0,r.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e,n){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function s(t,e,n,r){return t.substring(0,e)+r+t.substring(e+n)}let a,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=s(d,976,h.length,h);const p=1482184792;let f=i(d,16);for(a=0,o=h.length-3;a<o;a+=4)f=f-p+i(h,a)|0;a<h.length&&(f=f-p+i(h+"XXX",a)|0),d=s(d,16,4,(0,r.string32)(f));const g=`@font-face {font-family:"${h}";src:url(data:font/opentype;base64,${btoa(d)});}`;this.insertRule(g);const m=[];for(const t of e)m.push(t.loadedName);m.push(h);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const t of m){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,y.append(e)}this._document.body.append(y),function t(e,n){if(u++,u>30)return(0,r.warn)("Load test font never loaded."),void n();c.font="30px "+e,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(h,(()=>{y.remove(),n.complete()}))}},e.FontFaceObject=class{constructor(t,{isEvalSupported:e=!0,disableFontFace:n=!1,ignoreErrors:r=!1,onUnsupportedFeature:i,fontRegistry:s=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e,this.disableFontFace=!0===n,this.ignoreErrors=!0===r,this._onUnsupportedFeature=i,this.fontRegistry=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,r.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,e),n}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const t=[];for(const e of n){const n=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",n,");\n")}return this.compiledGlyphs[e]=new Function("c","size",t.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const r of n)"scale"===r.cmd&&(r.args=[e,-e]),t[r.cmd].apply(t,r.args)}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(8),i=n(1),s=n(13),a=n(14),o=n(3);const l=4096,c=o.isNodeJS&&"undefined"==typeof Path2D?-1:1e3,u=16;class h{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return void 0!==this.cache[t]?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function d(t,e,n,i,s,a,o,l,c,u){const[h,d,p,f,g,m]=(0,r.getCurrentTransform)(t);if(0===d&&0===p){const r=o*h+g,y=Math.round(r),v=l*f+m,b=Math.round(v),_=(o+c)*h+g,A=Math.abs(Math.round(_)-y)||1,S=(l+u)*f+m,w=Math.abs(Math.round(S)-b)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(f),y,b),t.drawImage(e,n,i,s,a,0,0,A,w),t.setTransform(h,d,p,f,g,m),[A,w]}if(0===h&&0===f){const r=l*p+g,y=Math.round(r),v=o*d+m,b=Math.round(v),_=(l+u)*p+g,A=Math.abs(Math.round(_)-y)||1,S=(o+c)*d+m,w=Math.abs(Math.round(S)-b)||1;return t.setTransform(0,Math.sign(d),Math.sign(p),0,y,b),t.drawImage(e,n,i,s,a,0,0,w,A),t.setTransform(h,d,p,f,g,m),[w,A]}return t.drawImage(e,n,i,s,a,o,l,c,u),[Math.hypot(h,d)*c,Math.hypot(p,f)*u]}class p{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=i.Util.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=i.Util.applyTransform(e,t),r=i.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,n[0],r[0]),this.minY=Math.min(this.minY,n[1],r[1]),this.maxX=Math.max(this.maxX,n[0],r[0]),this.maxY=Math.max(this.maxY,n[1],r[1])}updateScalingPathMinMax(t,e){i.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,r,s,a,o,l,c,u){const h=i.Util.bezierBoundingBox(e,n,r,s,a,o,l,c);if(u)return u[0]=Math.min(u[0],h[0],h[2]),u[1]=Math.max(u[1],h[0],h[2]),u[2]=Math.min(u[2],h[1],h[3]),void(u[3]=Math.max(u[3],h[1],h[3]));this.updateRectMinMax(t,h)}getPathBoundingBox(t=s.PathType.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===s.PathType.STROKE){e||(0,i.unreachable)("Stroke bounding box must include transform.");const t=i.Util.singularValueDecompose2dScale(e),r=t[0]*this.lineWidth/2,s=t[1]*this.lineWidth/2;n[0]-=r,n[1]-=s,n[2]+=r,n[3]+=s}return n}updateClipFromPath(){const t=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=s.PathType.FILL,e=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function f(t,e,n=null){if("undefined"!=typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const r=e.height,s=e.width,a=r%u,o=(r-a)/u,l=0===a?o:o+1,c=t.createImageData(s,u);let h,d=0;const p=e.data,f=c.data;let g,m,y,v,b,_,A,S;if(n)switch(n.length){case 1:b=n[0],_=n[0],A=n[0],S=n[0];break;case 4:b=n[0],_=n[1],A=n[2],S=n[3]}if(e.kind===i.ImageKind.GRAYSCALE_1BPP){const e=p.byteLength,n=new Uint32Array(f.buffer,0,f.byteLength>>2),r=n.length,v=s+7>>3;let b=4294967295,_=i.FeatureTest.isLittleEndian?4278190080:255;for(S&&255===S[0]&&0===S[255]&&([b,_]=[_,b]),g=0;g<l;g++){for(y=g<o?u:a,h=0,m=0;m<y;m++){const t=e-d;let r=0;const i=t>v?s:8*t-7,a=-8&i;let o=0,l=0;for(;r<a;r+=8)l=p[d++],n[h++]=128&l?b:_,n[h++]=64&l?b:_,n[h++]=32&l?b:_,n[h++]=16&l?b:_,n[h++]=8&l?b:_,n[h++]=4&l?b:_,n[h++]=2&l?b:_,n[h++]=1&l?b:_;for(;r<i;r++)0===o&&(l=p[d++],o=128),n[h++]=l&o?b:_,o>>=1}for(;h<r;)n[h++]=0;t.putImageData(c,0,g*u)}}else if(e.kind===i.ImageKind.RGBA_32BPP){const e=!!(b||_||A);for(m=0,v=s*u*4,g=0;g<o;g++){if(f.set(p.subarray(d,d+v)),d+=v,e)for(let t=0;t<v;t+=4)b&&(f[t+0]=b[f[t+0]]),_&&(f[t+1]=_[f[t+1]]),A&&(f[t+2]=A[f[t+2]]);t.putImageData(c,0,m),m+=u}if(g<l){if(v=s*a*4,f.set(p.subarray(d,d+v)),e)for(let t=0;t<v;t+=4)b&&(f[t+0]=b[f[t+0]]),_&&(f[t+1]=_[f[t+1]]),A&&(f[t+2]=A[f[t+2]]);t.putImageData(c,0,m)}}else{if(e.kind!==i.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);{const e=!!(b||_||A);for(y=u,v=s*y,g=0;g<l;g++){for(g>=o&&(y=a,v=s*y),h=0,m=v;m--;)f[h++]=p[d++],f[h++]=p[d++],f[h++]=p[d++],f[h++]=255;if(e)for(let t=0;t<h;t+=4)b&&(f[t+0]=b[f[t+0]]),_&&(f[t+1]=_[f[t+1]]),A&&(f[t+2]=A[f[t+2]]);t.putImageData(c,0,g*u)}}}}function g(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const n=e.height,r=e.width,i=n%u,s=(n-i)/u,o=0===i?s:s+1,l=t.createImageData(r,u);let c=0;const h=e.data,d=l.data;for(let e=0;e<o;e++){const n=e<s?u:i;({srcPos:c}=(0,a.applyMaskImageData)({src:h,srcPos:c,dest:d,width:r,height:n})),t.putImageData(l,0,e*u)}}function m(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,i=n.length;r<i;r++){const i=n[r];void 0!==t[i]&&(e[i]=t[i])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function y(t,e){t.strokeStyle=t.fillStyle=e||"#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function v(t,e,n,r){const i=t.length;for(let s=3;s<i;s+=4){const i=t[s];if(0===i)t[s-3]=e,t[s-2]=n,t[s-1]=r;else if(i<255){const a=255-i;t[s-3]=t[s-3]*i+e*a>>8,t[s-2]=t[s-2]*i+n*a>>8,t[s-1]=t[s-1]*i+r*a>>8}}}function b(t,e,n){const r=t.length;for(let i=3;i<r;i+=4){const r=n?n[t[i]]:t[i];e[i]=e[i]*r*.00392156862745098|0}}function _(t,e,n){const r=t.length;for(let i=3;i<r;i+=4){const r=77*t[i-3]+152*t[i-2]+28*t[i-1];e[i]=n?e[i]*n[r>>8]>>8:e[i]*r>>16}}function A(t,e,n,r){const i=r[0],s=r[1],a=r[2]-i,o=r[3]-s;0!==a&&0!==o&&(function(t,e,n,r,i,s,a,o,l,c,u){const h=!!s,d=h?s[0]:0,p=h?s[1]:0,f=h?s[2]:0;let g;g="Luminosity"===i?_:b;const m=Math.min(r,Math.ceil(1048576/n));for(let i=0;i<r;i+=m){const s=Math.min(m,r-i),y=t.getImageData(o-c,i+(l-u),n,s),b=e.getImageData(o,i+l,n,s);h&&v(y.data,d,p,f),g(y.data,b.data,a),e.putImageData(b,o,i+l)}}(e.context,n,a,o,e.subtype,e.backdrop,e.transferMap,i,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}function S(t,e){const n=i.Util.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:n[0]<=s||n[1]<=s}const w=["butt","round","square"],x=["miter","round","bevel"],P={},E={};class C{constructor(t,e,n,r,i,s,a,o){this.ctx=t,this.current=new p(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=s,this.cachedCanvases=new h(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=o?.background||null,this.foregroundColor=o?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=i||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const t=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const e=this.backgroundColor=this.ctx.fillStyle;let n=!0,i=o;if(this.ctx.fillStyle=o,i=this.ctx.fillStyle,n="string"==typeof i&&/^#[0-9A-Fa-f]{6}$/.test(i),"#000000"===t&&"#ffffff"===e||t===e||!n)this.foregroundColor=this.backgroundColor=null;else{const[n,s,a]=(0,r.getRGB)(i),o=t=>(t/=255)<=.03928?t/12.92:((t+.055)/1.055)**2.4,l=Math.round(.2126*o(n)+.7152*o(s)+.0722*o(a));this.selectColor=(n,r,i)=>{const s=.2126*o(n)+.7152*o(r)+.0722*o(i);return Math.round(s)===l?e:t}}}if(this.ctx.fillStyle=this.backgroundColor||o,this.ctx.fillRect(0,0,s,a),this.ctx.restore(),n){const t=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),y(this.ctx,this.foregroundColor),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx),this.imageLayer&&((0,r.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(t,e,n,r){const s=t.argsArray,a=t.fnArray;let o=e||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"==typeof n,u=c?Date.now()+15:0;let h=0;const d=this.commonObjs,p=this.objs;let f;for(;;){if(void 0!==r&&o===r.nextBreakPoint)return r.breakIt(o,n),o;if(f=a[o],f!==i.OPS.dependency)this[f].apply(this,s[o]);else for(const t of s[o]){const e=t.startsWith("g_")?d:p;if(!e.has(t))return e.get(t,n),o}if(o++,o===l)return o;if(c&&++h>10){if(Date.now()>u)return n(),o;h=0}}}#J(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#J(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(t,e){const n=t.width,r=t.height;let i,s,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=n,c=r,u="prescale1";for(;a>2&&l>1||o>2&&c>1;){let e=l,n=c;a>2&&l>1&&(e=Math.ceil(l/2),a/=l/e),o>2&&c>1&&(n=Math.ceil(c/2),o/=c/n),i=this.cachedCanvases.getCanvas(u,e,n),s=i.context,s.clearRect(0,0,e,n),s.drawImage(t,0,0,l,c,0,0,e,n),t=i.canvas,l=e,c=n,u="prescale1"===u?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,o=this.current.fillColor,l=this.current.patternFill,c=(0,r.getCurrentTransform)(e);let u,h,p,f;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer,n=c.slice(0,4);h=JSON.stringify(l?n:[n,o]),u=this._cachedBitmapsMap.get(e),u||(u=new Map,this._cachedBitmapsMap.set(e,u));const r=u.get(h);if(r&&!l)return{canvas:r,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};p=r}p||(f=this.cachedCanvases.getCanvas("maskCanvas",n,a),g(f.context,t));let m=i.Util.transform(c,[1/n,0,0,-1/a,0,0]);m=i.Util.transform(m,[1,0,0,1,0,-a]);const y=i.Util.applyTransform([0,0],m),v=i.Util.applyTransform([n,a],m),b=i.Util.normalizeRect([y[0],y[1],v[0],v[1]]),_=Math.round(b[2]-b[0])||1,A=Math.round(b[3]-b[1])||1,w=this.cachedCanvases.getCanvas("fillCanvas",_,A),x=w.context,P=Math.min(y[0],v[0]),E=Math.min(y[1],v[1]);x.translate(-P,-E),x.transform(...m),p||(p=this._scaleImage(f.canvas,(0,r.getCurrentTransformInverse)(x)),p=p.img,u&&l&&u.set(h,p)),x.imageSmoothingEnabled=S((0,r.getCurrentTransform)(x),t.interpolate),d(x,p,0,0,p.width,p.height,0,0,n,a),x.globalCompositeOperation="source-in";const C=i.Util.transform((0,r.getCurrentTransformInverse)(x),[1,0,0,1,-P,-E]);return x.fillStyle=l?o.getPattern(e,this,C,s.PathType.FILL):o,x.fillRect(0,0,n,a),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,w.canvas)),{canvas:w.canvas,offsetX:Math.round(P),offsetY:Math.round(E)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=w[t]}setLineJoin(t){this.ctx.lineJoin=x[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let e=0,n=t.length;e<n;e++){const n=t[e],r=n[0],i=n[1];switch(r){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),m(this.suspendedCtx,s),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,r,i,s,a){e.transform(t,n,r,i,s,a),this.__originalTransform(t,n,r,i,s,a)},t.setTransform=function(t,n,r,i,s,a){e.setTransform(t,n,r,i,s,a),this.__originalSetTransform(t,n,r,i,s,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,r,i,s,a){e.bezierCurveTo(t,n,r,i,s,a),this.__originalBezierCurveTo(t,n,r,i,s,a)},t.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask;A(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,r,i,s){this.ctx.transform(t,e,n,r,i,s),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,a=this.current;let o,l,c=a.x,u=a.y;const h=(0,r.getCurrentTransform)(s),d=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],p=d?n.slice(0):null;for(let n=0,r=0,f=t.length;n<f;n++)switch(0|t[n]){case i.OPS.rectangle:c=e[r++],u=e[r++];const t=e[r++],n=e[r++],f=c+t,g=u+n;s.moveTo(c,u),0===t||0===n?s.lineTo(f,g):(s.lineTo(f,u),s.lineTo(f,g),s.lineTo(c,g)),d||a.updateRectMinMax(h,[c,u,f,g]),s.closePath();break;case i.OPS.moveTo:c=e[r++],u=e[r++],s.moveTo(c,u),d||a.updatePathMinMax(h,c,u);break;case i.OPS.lineTo:c=e[r++],u=e[r++],s.lineTo(c,u),d||a.updatePathMinMax(h,c,u);break;case i.OPS.curveTo:o=c,l=u,c=e[r+4],u=e[r+5],s.bezierCurveTo(e[r],e[r+1],e[r+2],e[r+3],c,u),a.updateCurvePathMinMax(h,o,l,e[r],e[r+1],e[r+2],e[r+3],c,u,p),r+=6;break;case i.OPS.curveTo2:o=c,l=u,s.bezierCurveTo(c,u,e[r],e[r+1],e[r+2],e[r+3]),a.updateCurvePathMinMax(h,o,l,c,u,e[r],e[r+1],e[r+2],e[r+3],p),c=e[r+2],u=e[r+3],r+=4;break;case i.OPS.curveTo3:o=c,l=u,c=e[r+2],u=e[r+3],s.bezierCurveTo(e[r],e[r+1],c,u,c,u),a.updateCurvePathMinMax(h,o,l,e[r],e[r+1],c,u,c,u,p),r+=4;break;case i.OPS.closePath:s.closePath()}d&&a.updateScalingPathMinMax(h,p),a.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(t){t=void 0===t||t;const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof n&&n?.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),s.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t){t=void 0===t||t;const e=this.ctx,n=this.current.fillColor;let i=!1;this.current.patternFill&&(e.save(),e.fillStyle=n.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),s.PathType.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),i&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=P}eoClip(){this.pendingClip=E}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||i.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,i.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const s=n.loadedName||"sans-serif";let a="normal";n.black?a="900":n.bold&&(a="bold");const o=n.italic?"italic":"normal",l=`"${s}", ${n.fallbackName}`;let c=e;e<16?c=16:e>100&&(c=100),this.current.fontSizeScale=e/c,this.ctx.font=`${o} ${a} ${c}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,r,i,s){this.current.textMatrix=[t,e,n,r,i,s],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&i.TextRenderingMode.FILL_STROKE_MASK,d=!!(c&i.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile;let f;(l.disableFontFace||d||p)&&(f=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||p?(a.save(),a.translate(e,n),a.beginPath(),f(a,u),s&&a.setTransform(...s),h!==i.TextRenderingMode.FILL&&h!==i.TextRenderingMode.FILL_STROKE||a.fill(),h!==i.TextRenderingMode.STROKE&&h!==i.TextRenderingMode.FILL_STROKE||a.stroke(),a.restore()):(h!==i.TextRenderingMode.FILL&&h!==i.TextRenderingMode.FILL_STROKE||a.fillText(t,e,n),h!==i.TextRenderingMode.STROKE&&h!==i.TextRenderingMode.FILL_STROKE||a.strokeText(t,e,n)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(a),x:e,y:n,fontSize:u,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){n=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(0===a)return;const o=this.ctx,l=e.fontSizeScale,c=e.charSpacing,u=e.wordSpacing,h=e.fontDirection,d=e.textHScale*h,p=t.length,f=n.vertical,g=f?1:-1,m=n.defaultVMetrics,y=a*e.fontMatrix[0],v=e.textRenderingMode===i.TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;let b;if(o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),h>0?o.scale(d,-1):o.scale(d,1),e.patternFill){o.save();const t=e.fillColor.getPattern(o,this,(0,r.getCurrentTransformInverse)(o),s.PathType.FILL);b=(0,r.getCurrentTransform)(o),o.restore(),o.fillStyle=t}let _=e.lineWidth;const A=e.textMatrixScale;if(0===A||0===_){const t=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;t!==i.TextRenderingMode.STROKE&&t!==i.TextRenderingMode.FILL_STROKE||(_=this.getSinglePixelWidth())}else _/=A;1!==l&&(o.scale(l,l),_/=l),o.lineWidth=_;let S,w=0;for(S=0;S<p;++S){const e=t[S];if("number"==typeof e){w+=g*e*a/1e3;continue}let r=!1;const i=(e.isSpace?u:0)+c,s=e.fontChar,d=e.accent;let p,_,A,x=e.width;if(f){const t=e.vmetric||m,n=-(e.vmetric?t[1]:.5*x)*y,r=t[2]*y;x=t?-t[0]:x,p=n/l,_=(w+r)/l}else p=w/l,_=0;if(n.remeasure&&x>0){const t=1e3*o.measureText(s).width/a*l;if(x<t&&this.isFontSubpixelAAEnabled){const e=x/t;r=!0,o.save(),o.scale(e,1),p/=e}else x!==t&&(p+=(x-t)/2e3*a/l)}if(this.contentVisible&&(e.isInFont||n.missingFile))if(v&&!d)o.fillText(s,p,_);else if(this.paintChar(s,p,_,b),d){const t=p+a*d.offset.x/l,e=_-a*d.offset.y/l;this.paintChar(d.fontChar,t,e,b)}A=f?x*y-i*h:x*y+i*h,w+=A,r&&o.restore()}f?e.y-=w:e.x+=w*d,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,r=n.font,s=n.fontSize,a=n.fontDirection,o=r.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,u=n.textHScale*a,h=n.fontMatrix||i.FONT_IDENTITY_MATRIX,d=t.length;let p,f,g,m;if(n.textRenderingMode!==i.TextRenderingMode.INVISIBLE&&0!==s){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(u,a),p=0;p<d;++p){if(f=t[p],"number"==typeof f){m=o*f*s/1e3,this.ctx.translate(m,0),n.x+=m*u;continue}const a=(f.isSpace?c:0)+l,d=r.charProcOperatorList[f.operatorListId];d?(this.contentVisible&&(this.processingType3=f,this.save(),e.scale(s,s),e.transform(...h),this.executeOperatorList(d),this.restore()),g=i.Util.applyTransform([f.width,0],h)[0]*s+a,e.translate(g,0),n.x+=g*u):(0,i.warn)(`Type3 character "${f.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,r,i,s){this.ctx.rect(n,r,i-n,s-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const n=t[1],i=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),a={createCanvasGraphics:t=>new C(t,this.commonObjs,this.objs,this.canvasFactory)};e=new s.TilingPattern(t,n,this.ctx,a,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const r=this.selectColor?.(t,e,n)||i.Util.makeHexColor(t,e,n);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(t,e,n){const r=this.selectColor?.(t,e,n)||i.Util.makeHexColor(t,e,n);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=(0,s.getShadingPattern)(this.objs.get(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),s.PathType.SHADING);const a=(0,r.getCurrentTransformInverse)(e);if(a){const t=e.canvas,n=t.width,r=t.height,s=i.Util.applyTransform([0,0],a),o=i.Util.applyTransform([0,r],a),l=i.Util.applyTransform([n,0],a),c=i.Util.applyTransform([n,r],a),u=Math.min(s[0],o[0],l[0],c[0]),h=Math.min(s[1],o[1],l[1],c[1]),d=Math.max(s[0],o[0],l[0],c[0]),p=Math.max(s[1],o[1],l[1],c[1]);this.ctx.fillRect(u,h,d-u,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform(...t),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),e)){const t=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],t,n),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||(0,i.info)("TODO: Support non-isolated groups."),t.knockout&&(0,i.warn)("Knockout groups not supported.");const n=(0,r.getCurrentTransform)(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=i.Util.getAxialAlignedBoundingBox(t.bbox,(0,r.getCurrentTransform)(e));const a=[0,0,e.canvas.width,e.canvas.height];s=i.Util.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),c=Math.floor(s[1]);let u=Math.max(Math.ceil(s[2])-o,1),h=Math.max(Math.ceil(s[3])-c,1),d=1,p=1;u>l&&(d=u/l,u=l),h>l&&(p=h/l,h=l),this.current.startNewPathAndClipBox([0,0,u,h]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(f,u,h),y=g.context;y.scale(1/d,1/p),y.translate(-o,-c),y.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:y,offsetX:o,offsetY:c,scaleX:d,scaleY:p,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,c),e.scale(d,p),e.save()),m(e,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const n=i.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(t,e,n,s,a){if(this.#J(),y(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(e)&&4===e.length){const s=e[2]-e[0],o=e[3]-e[1];if(a&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=s,e[3]=o;const[a,l]=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,u=Math.ceil(s*this.outputScaleX*c),h=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,h);const{canvas:d,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.setTransform(a,0,0,-l,0,o*l),y(this.ctx,this.foregroundColor)}else y(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],s,o),this.ctx.clip(),this.endPath()}this.current=new p(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(t){const{width:e,height:n}=t;if(e>c||n>c)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let s,a,o,l=new Uint8Array(i*(n+1));const u=e+7&-8;let h=new Uint8Array(u*n),d=0;for(const e of t.data){let t=128;for(;t>0;)h[d++]=e&t?0:255,t>>=1}let p=0;for(d=0,0!==h[d]&&(l[0]=1,++p),a=1;a<e;a++)h[d]!==h[d+1]&&(l[a]=h[d]?2:1,++p),d++;for(0!==h[d]&&(l[a]=2,++p),s=1;s<n;s++){d=s*u,o=s*i,h[d-u]!==h[d]&&(l[o]=h[d]?1:8,++p);let t=(h[d]?4:0)+(h[d-u]?8:0);for(a=1;a<e;a++)t=(t>>2)+(h[d+1]?4:0)+(h[d-u+1]?8:0),r[t]&&(l[o+a]=r[t],++p),d++;if(h[d-u]!==h[d]&&(l[o+a]=h[d]?2:4,++p),p>1e3)return null}for(d=u*(n-1),o=s*i,0!==h[d]&&(l[o]=8,++p),a=1;a<e;a++)h[d]!==h[d+1]&&(l[o+a]=h[d]?4:8,++p),d++;if(0!==h[d]&&(l[o+a]=4,++p),p>1e3)return null;const f=new Int32Array([0,i,-1,0,-i,0,0,0,1]),g=new Path2D;for(s=0;p&&s<=n;s++){let t=s*i;const n=t+e;for(;t<n&&!l[t];)t++;if(t===n)continue;g.moveTo(t%i,s);const r=t;let a=l[t];do{const e=f[a];do{t+=e}while(!l[t]);const n=l[t];5!==n&&10!==n?(a=n,l[t]=0):(a=n&51*a>>4,l[t]&=a>>2|a<<2),g.lineTo(t%i,t/i|0),l[t]||--p}while(r!==t);--s}return h=null,l=null,function(t){t.save(),t.scale(1/e,-1/n),t.translate(0,-n),t.fill(g),t.beginPath(),t.restore()}}(t)),r.compiled))return void r.compiled(n);const i=this._createMaskCanvas(t),s=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,a,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=(0,r.getCurrentTransform)(l);l.transform(e,n,s,a,0,0);const u=this._createMaskCanvas(t);l.setTransform(1,0,0,1,0,0);for(let t=0,r=o.length;t<r;t+=2){const r=i.Util.transform(c,[e,n,s,a,o[t],o[t+1]]),[h,d]=i.Util.applyTransform([0,0],r);l.drawImage(u.canvas,h,d)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const a of t){const{data:t,width:o,height:l,transform:c}=a,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save(),g(h,this.getObject(t,a)),h.globalCompositeOperation="source-in",h.fillStyle=i?n.getPattern(h,this,(0,r.getCurrentTransformInverse)(e),s.PathType.FILL):n,h.fillRect(0,0,o,l),h.restore(),e.save(),e.transform(...c),e.scale(1,-1),d(e,u.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,n,r){if(!this.contentVisible)return;const s=this.getObject(t);if(!s)return void(0,i.warn)("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let t=0,i=r.length;t<i;t+=2)l.push({transform:[e,0,0,n,r[t],r[t+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;let a;if(this.save(),s.scale(1/e,-1/n),"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)a=t;else{const r=this.cachedCanvases.getCanvas("inlineImage",e,n);f(r.context,t,this.current.transferMaps),a=r.canvas}const o=this._scaleImage(a,(0,r.getCurrentTransformInverse)(s));s.imageSmoothingEnabled=S((0,r.getCurrentTransform)(s),t.interpolate);const[l,c]=d(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,e,n);if(this.imageLayer){const[e,s]=i.Util.applyTransform([0,-n],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:t,left:e,top:s,width:l,height:c})}this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,s=t.width,a=t.height,o=this.cachedCanvases.getCanvas("inlineImage",s,a);f(o.context,t,this.current.transferMaps);for(const l of e){if(n.save(),n.transform(...l.transform),n.scale(1,-1),d(n,o.canvas,l.x,l.y,l.w,l.h,0,-1,1,1),this.imageLayer){const[e,n]=i.Util.applyTransform([l.x,l.y],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:t,left:e,top:n,width:s,height:a})}n.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===E?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=(0,r.getCurrentTransform)(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:t}=this.current,e=(0,r.getCurrentTransform)(this.ctx);let n,i;if(0===e[1]&&0===e[2]){const r=Math.abs(e[0]),s=Math.abs(e[3]);if(0===t)n=1/r,i=1/s;else{const e=r*t,a=s*t;n=e<1?1/e:1,i=a<1?1/a:1}}else{const r=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[1]),a=Math.hypot(e[2],e[3]);if(0===t)n=a/r,i=s/r;else{const e=t*r;n=a>e?a/e:1,i=s>e?s/e:1}}this._cachedScaleForStroking=[n,i]}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,s]=this.getScaleForStroking();if(e.lineWidth=n||1,1===i&&1===s)return void e.stroke();let a,o,l;t&&(a=(0,r.getCurrentTransform)(e),o=e.getLineDash().slice(),l=e.lineDashOffset),e.scale(i,s);const c=Math.max(i,s);e.setLineDash(e.getLineDash().map((t=>t/c))),e.lineDashOffset/=c,e.stroke(),t&&(e.setTransform(...a),e.setLineDash(o),e.lineDashOffset=l)}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}e.CanvasGraphics=C;for(const t in i.OPS)void 0!==C.prototype[t]&&(C.prototype[i.OPS[t]]=C.prototype[t])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new c(t);case"Mesh":return new d(t);case"Dummy":return new p}throw new Error(`Unknown IR type: ${t[0]}`)};var r=n(1),i=n(8),s=n(3);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function o(t,e){if(!e||s.isNodeJS)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}e.PathType=a;class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class c extends l{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,n,s){let l;if(s===a.STROKE||s===a.FILL){const a=e.current.getClippedPathBoundingBox(s,(0,i.getCurrentTransform)(t))||[0,0,0,0],c=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,h=e.cachedCanvases.getCanvas("pattern",c,u,!0),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),n=r.Util.transform(n,[1,0,0,1,a[0],a[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),o(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),l=t.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(n);try{l.setTransform(p)}catch(t){(0,r.warn)(`RadialAxialShadingPattern.getPattern: "${t?.message}".`)}}else o(t,this._bbox),l=this._createGradient(t);return l}}function u(t,e,n,r,i,s,a,o){const l=e.coords,c=e.colors,u=t.data,h=4*t.width;let d;l[n+1]>l[r+1]&&(d=n,n=r,r=d,d=s,s=a,a=d),l[r+1]>l[i+1]&&(d=r,r=i,i=d,d=a,a=o,o=d),l[n+1]>l[r+1]&&(d=n,n=r,r=d,d=s,s=a,a=d);const p=(l[n]+e.offsetX)*e.scaleX,f=(l[n+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,m=(l[r+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,v=(l[i+1]+e.offsetY)*e.scaleY;if(f>=v)return;const b=c[s],_=c[s+1],A=c[s+2],S=c[a],w=c[a+1],x=c[a+2],P=c[o],E=c[o+1],C=c[o+2],T=Math.round(f),M=Math.round(v);let k,R,O,L,D,I,F,N;for(let t=T;t<=M;t++){if(t<m){let e;e=t<f?0:(f-t)/(f-m),k=p-(p-g)*e,R=b-(b-S)*e,O=_-(_-w)*e,L=A-(A-x)*e}else{let e;e=t>v?1:m===v?0:(m-t)/(m-v),k=g-(g-y)*e,R=S-(S-P)*e,O=w-(w-E)*e,L=x-(x-C)*e}let e;e=t<f?0:t>v?1:(f-t)/(f-v),D=p-(p-y)*e,I=b-(b-P)*e,F=_-(_-E)*e,N=A-(A-C)*e;const n=Math.round(Math.min(k,D)),r=Math.round(Math.max(k,D));let i=h*t+4*n;for(let t=n;t<=r;t++)e=(k-t)/(k-D),e<0?e=0:e>1&&(e=1),u[i++]=R-(R-I)*e|0,u[i++]=O-(O-F)*e|0,u[i++]=L-(L-N)*e|0,u[i++]=255}}function h(t,e,n){const r=e.coords,i=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(s=0;s<l;s++){let e=s*o;for(let s=0;s<c;s++,e++)u(t,n,r[e],r[e+1],r[e+o],i[e],i[e+1],i[e+o]),u(t,n,r[e+o+1],r[e+1],r[e+o],i[e+o+1],i[e+1],i[e+o])}break;case"triangles":for(s=0,a=r.length;s<a;s+=3)u(t,n,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class d extends l{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const r=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-r,a=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(s*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=s/o,u=a/l,d={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-i,scaleX:1/c,scaleY:1/u},p=o+4,f=l+4,g=n.getCanvas("mesh",p,f,!1),m=g.context,y=m.createImageData(o,l);if(e){const t=y.data;for(let n=0,r=t.length;n<r;n+=4)t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=255}for(const t of this._figures)h(y,t,d);return m.putImageData(y,2,2),{canvas:g.canvas,offsetX:r-2*c,offsetY:i-2*u,scaleX:c,scaleY:u}}getPattern(t,e,n,s){let l;if(o(t,this._bbox),s===a.SHADING)l=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(t));else if(l=r.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=r.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*t[0],l[1]*t[1]]}const c=this._createMeshCanvas(l,s===a.SHADING?null:this._background,e.cachedCanvases);return s!==a.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class p extends l{getPattern(){return"hotpink"}}const f=1,g=2;class m{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(t,e,n,r,i){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,s=this.xstep,a=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,u=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+l);const h=n[0],d=n[1],p=n[2],f=n[3],g=r.Util.singularValueDecompose2dScale(this.matrix),m=r.Util.singularValueDecompose2dScale(this.baseTransform),y=[g[0]*m[0],g[1]*m[1]],v=this.getSizeAndScale(s,this.ctx.canvas.width,y[0]),b=this.getSizeAndScale(a,this.ctx.canvas.height,y[1]),_=t.cachedCanvases.getCanvas("pattern",v.size,b.size,!0),A=_.context,S=u.createCanvasGraphics(A);S.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(S,o,c);let w=h,x=d,P=p,E=f;return h<0&&(w=0,P+=Math.abs(h)),d<0&&(x=0,E+=Math.abs(d)),A.translate(-v.scale*w,-b.scale*x),S.transform(v.scale,0,0,b.scale,0,0),A.save(),this.clipBbox(S,w,x,P,E),S.baseTransform=(0,i.getCurrentTransform)(S.ctx),S.executeOperatorList(e),S.endDrawing(),{canvas:_.canvas,scaleX:v.scale,scaleY:b.scale,offsetX:w,offsetY:x}}getSizeAndScale(t,e,n){t=Math.abs(t);const r=Math.max(m.MAX_PATTERN_SIZE,e);let i=Math.ceil(t*n);return i>=r?i=r:n=i/t,{scale:n,size:i}}clipBbox(t,e,n,r,s){const a=r-e,o=s-n;t.ctx.rect(e,n,a,o),t.current.updateRectMinMax((0,i.getCurrentTransform)(t.ctx),[e,n,r,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,s=t.current;switch(e){case f:const t=this.ctx;i.fillStyle=t.fillStyle,i.strokeStyle=t.strokeStyle,s.fillColor=t.fillStyle,s.strokeColor=t.strokeStyle;break;case g:const a=r.Util.makeHexColor(n[0],n[1],n[2]);i.fillStyle=a,i.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new r.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let s=n;i!==a.SHADING&&(s=r.Util.transform(s,e.baseTransform),this.matrix&&(s=r.Util.transform(s,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");try{c.setTransform(l)}catch(t){(0,r.warn)(`TilingPattern.getPattern: "${t?.message}".`)}return c}}e.TilingPattern=m},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function({src:t,srcPos:e=0,dest:n,destPos:i=0,width:s,height:a,inverseDecode:o=!1}){const l=r.FeatureTest.isLittleEndian?4278190080:255,[c,u]=o?[0,l]:[l,0],h=s>>3,d=7&s,p=t.length;n=new Uint32Array(n.buffer);for(let r=0;r<a;r++){for(const r=e+h;e<r;e++){const r=e<p?t[e]:255;n[i++]=128&r?u:c,n[i++]=64&r?u:c,n[i++]=32&r?u:c,n[i++]=16&r?u:c,n[i++]=8&r?u:c,n[i++]=4&r?u:c,n[i++]=2&r?u:c,n[i++]=1&r?u:c}if(0===d)continue;const r=e<p?t[e++]:255;for(let t=0;t<d;t++)n[i++]=r&1<<7-t?u:c}return{srcPos:e,destPos:i}};var r=n(1)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=void 0===n.workerPort?null:n.workerPort,n.workerSrc=void 0===n.workerSrc?"":n.workerSrc},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=n(1);const i=1,s=2,a=1,o=2,l=3,c=4,u=5,h=6,d=7,p=8;function f(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new r.AbortException(t.message);case"MissingPDFException":return new r.MissingPDFException(t.message);case"PasswordException":return new r.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new r.UnknownErrorException(t.message,t.details);default:return new r.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this._processStreamMessage(e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===i)n.resolve(e.data);else{if(e.callback!==s)throw new Error("Unexpected callback case");n.reject(f(e.reason))}return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,a=e.sourceName;new Promise((function(t){t(r(e.data))})).then((function(r){n.postMessage({sourceName:t,targetName:a,callback:i,callbackId:e.callbackId,data:r})}),(function(r){n.postMessage({sourceName:t,targetName:a,callback:s,callbackId:e.callbackId,reason:f(r)})}))}else e.streamId?this._createStreamSink(e):r(e.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,s=(0,r.createPromiseCapability)();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(t){s.reject(t)}return s.promise}sendWithStream(t,e,n,i){const s=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:n=>{const a=(0,r.createPromiseCapability)();return this.streamControllers[s]={controller:n,startCall:a,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:s,data:e,desiredSize:n.desiredSize},i),a.promise},pull:t=>{const e=(0,r.createPromiseCapability)();return this.streamControllers[s].pullCall=e,c.postMessage({sourceName:o,targetName:l,stream:h,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,r.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,r.createPromiseCapability)();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:a,streamId:s,reason:f(t)}),e.promise}},n)}_createStreamSink(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,a=this,o=this.actionHandler[t.action],h={enqueue(t,a=1,o){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=a,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:c,streamId:e,chunk:t},o)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:l,streamId:e}),delete a.streamSinks[e])},error(t){(0,r.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:u,streamId:e,reason:f(t)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,new Promise((function(e){e(o(t.data,h))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:p,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:i,stream:p,streamId:e,reason:f(t)})}))}_processStreamMessage(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,g=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case p:t.success?g.startCall.resolve():g.startCall.reject(f(t.reason));break;case d:t.success?g.pullCall.resolve():g.pullCall.reject(f(t.reason));break;case h:if(!m){s.postMessage({sourceName:n,targetName:i,stream:d,streamId:e,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull&&m.onPull())})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:d,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:i,stream:d,streamId:e,reason:f(t)})}));break;case c:if((0,r.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:if((0,r.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,e);break;case u:(0,r.assert)(g,"error should have stream controller"),g.controller.error(f(t.reason)),this._deleteStreamController(g,e);break;case o:t.success?g.cancelCall.resolve():g.cancelCall.reject(f(t.reason)),this._deleteStreamController(g,e);break;case a:if(!m)break;new Promise((function(e){e(m.onCancel&&m.onCancel(f(t.reason)))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:o,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:i,stream:o,streamId:e,reason:f(t)})})),m.sinkCapability.reject(f(t.reason)),m.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,e){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1);e.Metadata=class{#Q;#Z;constructor({parsedData:t,rawData:e}){this.#Q=t,this.#Z=e}getRaw(){return this.#Z}get(t){return this.#Q.get(t)??null}getAll(){return(0,r.objectFromMap)(this.#Q)}has(t){return this.#Q.has(t)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=n(1);const i=Symbol("INTERNAL");class s{#tt=!0;constructor(t,e){this.name=t,this.intent=e}get visible(){return this.#tt}_setVisible(t,e){t!==i&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#tt=e}}e.OptionalContentConfig=class{#et=!0;#nt=new Map;#rt=null;#it=null;constructor(t){if(this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,this.#it=t.order;for(const e of t.groups)this.#nt.set(e.id,new s(e.name,e.intent));if("OFF"===t.baseState)for(const t of this.#nt.values())t._setVisible(i,!1);for(const e of t.on)this.#nt.get(e)._setVisible(i,!0);for(const e of t.off)this.#nt.get(e)._setVisible(i,!1);this.#rt=new Map;for(const[t,e]of this.#nt)this.#rt.set(t,e.visible)}}#st(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const e=t[i];let s;if(Array.isArray(e))s=this.#st(e);else{if(!this.#nt.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;s=this.#nt.get(e).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}isVisible(t){if(0===this.#nt.size)return!0;if(!t)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return this.#nt.has(t.id)?this.#nt.get(t.id).visible:((0,r.warn)(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this.#st(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#nt.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(this.#nt.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#nt.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(!this.#nt.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#nt.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(!this.#nt.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#nt.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(this.#nt.get(e).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,r.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){this.#nt.has(t)?(this.#nt.get(t)._setVisible(i,!!e),this.#et=null):(0,r.warn)(`Optional content group not found: ${t}`)}get hasInitialVisibility(){if(null!==this.#et)return this.#et;for(const[t,e]of this.#nt){const n=this.#rt.get(t);if(e.visible!==n)return this.#et=!1}return this.#et=!0}getOrder(){return this.#nt.size?this.#it?this.#it.slice():[...this.#nt.keys()]:null}getGroups(){return this.#nt.size>0?(0,r.objectFromMap)(this.#nt):null}getGroup(t){return this.#nt.get(t)||null}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=n(1),i=n(8);e.PDFDataTransportStream=class{constructor(t,e){(0,r.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;const n=t.initialData;if(n?.length>0){const t=new Uint8Array(n).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{const n=this._rangeReaders.some((function(n){return n._begin===t.begin&&(n._enqueue(e),!0)}));(0,r.assert)(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){if(void 0===t.total){const e=this._rangeReaders[0];e?.onProgress&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;e?.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new s(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new a(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}};class s{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=(0,i.isPdfFile)(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class a{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(t){const e=[],r={items:e,styles:Object.create(null)};return function t(r){if(!r)return;let i=null;const s=r.name;if("#text"===s)i=r.value;else{if(!n.shouldBuildText(s))return;r?.attributes?.textContent?i=r.attributes.textContent:r.value&&(i=r.value)}if(null!==i&&e.push({str:i}),r.children)for(const e of r.children)t(e)}(t),r}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=n(9);const i=function(t){return new Promise(((e,n)=>{__webpack_require__(172).readFile(t,((t,r)=>{!t&&r?e(new Uint8Array(r)):n(new Error(t))}))}))};class s extends r.BaseCanvasFactory{_createCanvas(t,e){return __webpack_require__(414).createCanvas(t,e)}}e.NodeCanvasFactory=s;class a extends r.BaseCMapReaderFactory{_fetchData(t,e){return i(t).then((t=>({cMapData:t,compressionType:e})))}}e.NodeCMapReaderFactory=a;class o extends r.BaseStandardFontDataFactory{_fetchData(t){return i(t)}}e.NodeStandardFontDataFactory=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=n(7),i=n(1),s=n(23),a=n(24);class o{#at;#ot=!1;#lt=this.pointerup.bind(this);#ct=this.pointerdown.bind(this);#ut=new Map;#ht=!1;#dt=!1;#pt;static _initialized=!1;constructor(t){o._initialized||(o._initialized=!0,s.FreeTextEditor.initialize(t.l10n),a.InkEditor.initialize(t.l10n),t.uiManager.registerEditorTypes([s.FreeTextEditor,a.InkEditor])),this.#pt=t.uiManager,this.annotationStorage=t.annotationStorage,this.pageIndex=t.pageIndex,this.div=t.div,this.#at=t.accessibilityManager,this.#pt.addLayer(this)}updateToolbar(t){this.#pt.updateToolbar(t)}updateMode(t=this.#pt.getMode()){this.#ft(),t===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#pt.unselectAll()}addInkEditorIfNeeded(t){if(t||this.#pt.getMode()===i.AnnotationEditorType.INK){if(!t)for(const t of this.#ut.values())if(t.isEmpty())return void t.setInBackground();this.#gt({offsetX:0,offsetY:0}).setInBackground()}}setEditingState(t){this.#pt.setEditingState(t)}addCommands(t){this.#pt.addCommands(t)}enable(){this.div.style.pointerEvents="auto";for(const t of this.#ut.values())t.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const t of this.#ut.values())t.disableEditing()}setActiveEditor(t){this.#pt.getActive()!==t&&this.#pt.setActiveEditor(t)}enableClick(){this.div.addEventListener("pointerdown",this.#ct),this.div.addEventListener("pointerup",this.#lt)}disableClick(){this.div.removeEventListener("pointerdown",this.#ct),this.div.removeEventListener("pointerup",this.#lt)}attach(t){this.#ut.set(t.id,t)}detach(t){this.#ut.delete(t.id),this.#at?.removePointerInTextLayer(t.contentDiv)}remove(t){this.#pt.removeEditor(t),this.detach(t),this.annotationStorage.remove(t.id),t.div.style.display="none",setTimeout((()=>{t.div.style.display="",t.div.remove(),t.isAttachedToDOM=!1,document.activeElement===document.body&&this.#pt.focusMainContainer()}),0),this.#dt||this.addInkEditorIfNeeded(!1)}#mt(t){t.parent!==this&&(this.attach(t),t.pageIndex=this.pageIndex,t.parent?.detach(t),t.parent=this,t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(this.#mt(t),this.#pt.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}this.moveEditorInDOM(t),t.onceAdded(),this.addToAnnotationStorage(t)}moveEditorInDOM(t){this.#at?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addToAnnotationStorage(t){t.isEmpty()||this.annotationStorage.has(t.id)||this.annotationStorage.setValue(t.id,t)}addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}addANewEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!0})}addUndoableEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#pt.getId()}#yt(t){switch(this.#pt.getMode()){case i.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(t);case i.AnnotationEditorType.INK:return new a.InkEditor(t)}return null}deserialize(t){switch(t.annotationType){case i.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(t,this);case i.AnnotationEditorType.INK:return a.InkEditor.deserialize(t,this)}return null}#gt(t){const e=this.getNextId(),n=this.#yt({parent:this,id:e,x:t.offsetX,y:t.offsetY});return n&&this.add(n),n}setSelected(t){this.#pt.setSelected(t)}toggleSelected(t){this.#pt.toggleSelected(t)}isSelected(t){return this.#pt.isSelected(t)}unselect(t){this.#pt.unselect(t)}pointerup(t){const e=r.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#ht&&(this.#ht=!1,this.#ot?this.#gt(t):this.#ot=!0)}pointerdown(t){const e=r.KeyboardManager.platform.isMac;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;this.#ht=!0;const n=this.#pt.getActive();this.#ot=!n||n.isEmpty()}drop(t){const e=t.dataTransfer.getData("text/plain"),n=this.#pt.getEditor(e);if(!n)return;t.preventDefault(),t.dataTransfer.dropEffect="move",this.#mt(n);const r=this.div.getBoundingClientRect(),i=t.clientX-r.x,s=t.clientY-r.y;n.translate(i-n.startX,s-n.startY),this.moveEditorInDOM(n),n.div.focus()}dragover(t){t.preventDefault()}destroy(){this.#pt.getActive()?.parent===this&&this.#pt.setActiveEditor(null);for(const t of this.#ut.values())this.#at?.removePointerInTextLayer(t.contentDiv),t.isAttachedToDOM=!1,t.div.remove(),t.parent=null;this.div=null,this.#ut.clear(),this.#pt.removeLayer(this)}#ft(){this.#dt=!0;for(const t of this.#ut.values())t.isEmpty()&&t.remove();this.#dt=!1}render(t){this.viewport=t.viewport,(0,r.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const t of this.#pt.getEditors(this.pageIndex))this.add(t);this.updateMode()}update(t){this.viewport=t.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[t,e,n,r]=this.viewport.viewBox;return[n-t,r-e]}get viewportBaseDimensions(){const{width:t,height:e,rotation:n}=this.viewport;return n%180==0?[t,e]:[e,t]}setDimensions(){const{width:t,height:e,rotation:n}=this.viewport,r=n%180!=0,i=Math.floor(t)+"px",s=Math.floor(e)+"px";this.div.style.width=r?s:i,this.div.style.height=r?i:s,this.div.setAttribute("data-main-rotation",n)}}e.AnnotationEditorLayer=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=n(1),i=n(7),s=n(6);class a extends s.AnnotationEditor{#vt=this.editorDivBlur.bind(this);#bt=this.editorDivFocus.bind(this);#_t=this.editorDivKeydown.bind(this);#At;#St="";#wt=!1;#xt;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.prototype.commitOrRemove]]);static _type="freetext";constructor(t){super({...t,name:"freeTextEditor"}),this.#At=t.color||a._defaultColor||s.AnnotationEditor._defaultLineColor,this.#xt=t.fontSize||a._defaultFontSize}static initialize(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map((e=>[e,t.get(e)])));const e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case r.AnnotationEditorParamsType.FREETEXT_SIZE:a._defaultFontSize=e;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:a._defaultColor=e}}updateParams(t,e){switch(t){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Pt(e);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Et(e)}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,a._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,a._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#xt],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#At]]}#Pt(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#xt)*this.parent.scaleFactor),this.#xt=t,this.#Ct()},n=this.#xt;this.parent.addCommands({cmd:()=>{e(t)},undo:()=>{e(n)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Et(t){const e=this.#At;this.parent.addCommands({cmd:()=>{this.#At=t,this.editorDiv.style.color=t},undo:()=>{this.#At=e,this.editorDiv.style.color=e},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){return[-a._internalPadding*this.parent.scaleFactor,-(a._internalPadding+this.#xt)*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",this.#_t),this.editorDiv.addEventListener("focus",this.#bt),this.editorDiv.addEventListener("blur",this.#vt))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#_t),this.editorDiv.removeEventListener("focus",this.#bt),this.editorDiv.removeEventListener("blur",this.#vt),this.div.focus(),this.isEditing=!1)}focusin(t){super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}#Tt(){const t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n].firstChild;"#text"===r?.nodeName?e.push(r.data):e.push("")}return e.join("\n")}#Ct(){const[t,e]=this.parent.viewportBaseDimensions,n=this.div.getBoundingClientRect();this.width=n.width/t,this.height=n.height/e}commit(){super.commit(),this.#wt||(this.#wt=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#St=this.#Tt().trimEnd(),this.#Ct()}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(t){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(t){a._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),a._l10nPromise.get("editor_free_text_aria_label").then((t=>this.editorDiv?.setAttribute("aria-label",t))),a._l10nPromise.get("free_text_default_content").then((t=>this.editorDiv?.setAttribute("default-content",t))),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#xt}px * var(--scale-factor))`,n.color=this.#At,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parent.viewportBaseDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r);for(const t of this.#St.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(t,e){const n=super.deserialize(t,e);return n.#xt=t.fontSize,n.#At=r.Util.makeHexColor(...t.color),n.#St=t.value,n}serialize(){if(this.isEmpty())return null;const t=a._internalPadding*this.parent.scaleFactor,e=this.getRect(t,t),n=s.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:r.AnnotationEditorType.FREETEXT,color:n,fontSize:this.#xt,value:this.#St,pageIndex:this.parent.pageIndex,rect:e,rotation:this.rotation}}}e.FreeTextEditor=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return s.fitCurve}});var r=n(1),i=n(6),s=n(25),a=n(7);const o=16;class l extends i.AnnotationEditor{#Mt=0;#kt=0;#Rt=0;#Ot=this.canvasPointermove.bind(this);#Lt=this.canvasPointerleave.bind(this);#Dt=this.canvasPointerup.bind(this);#It=this.canvasPointerdown.bind(this);#Ft=!1;#Nt=!1;#jt=null;#Bt=null;#Ut=0;#Vt=0;#Ht=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map((e=>[e,t.get(e)])))}static updateDefaultParams(t,e){switch(t){case r.AnnotationEditorParamsType.INK_THICKNESS:l._defaultThickness=e;break;case r.AnnotationEditorParamsType.INK_COLOR:l._defaultColor=e;break;case r.AnnotationEditorParamsType.INK_OPACITY:l._defaultOpacity=e/100}}updateParams(t,e){switch(t){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#Wt(e);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#Et(e);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#zt(e)}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,l._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,l._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*l._defaultOpacity)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||l._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||l._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??l._defaultOpacity))]]}#Wt(t){const e=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=t,this.#qt()},undo:()=>{this.thickness=e,this.#qt()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Et(t){const e=this.color;this.parent.addCommands({cmd:()=>{this.color=t,this.#Gt()},undo:()=>{this.color=e,this.#Gt()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#zt(t){t/=100;const e=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=t,this.#Gt()},undo:()=>{this.opacity=e,this.#Gt()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(this.#$t(),this.#Xt()),this.isAttachedToDOM||(this.parent.add(this),this.#Yt()),this.#qt())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Bt.disconnect(),this.#Bt=null,super.remove())}enableEditMode(){this.#Ft||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#It),this.canvas.addEventListener("pointerup",this.#Dt))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#It),this.canvas.removeEventListener("pointerup",this.#Dt))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Kt(){const{width:t,height:e,rotation:n}=this.parent.viewport;switch(n){case 90:return[0,t,t,e];case 180:return[t,e,t,e];case 270:return[e,0,t,e];default:return[0,0,t,e]}}#Jt(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,a.opacityToHex)(this.opacity)}`}#Qt(t,e){this.isEditing=!0,this.#Nt||(this.#Nt=!0,this.#Yt(),this.thickness||=l._defaultThickness,this.color||=l._defaultColor||i.AnnotationEditor._defaultLineColor,this.opacity??=l._defaultOpacity),this.currentPath.push([t,e]),this.#jt=null,this.#Jt(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.#Ht=()=>{this.#Ht&&(this.#jt&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#Gt(),this.ctx.lineTo(...this.#jt),this.#jt=null,this.ctx.stroke()),window.requestAnimationFrame(this.#Ht))},window.requestAnimationFrame(this.#Ht)}#Zt(t,e){const[n,r]=this.currentPath.at(-1);t===n&&e===r||(this.currentPath.push([t,e]),this.#jt=[t,e])}#te(t,e){this.ctx.closePath(),this.#Ht=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height);const[n,r]=this.currentPath.at(-1);let i;if(t===n&&e===r||this.currentPath.push([t,e]),1!==this.currentPath.length)i=(0,s.fitCurve)(this.currentPath,30,null);else{const n=[t,e];i=[[n,n.slice(),n.slice(),n]]}const a=l.#ee(i);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(i),this.bezierPath2D.push(a),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#$t(),this.#Xt()),this.#qt())},mustExec:!0})}#Gt(){if(this.isEmpty())return void this.#ne();this.#Jt();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#ne();for(const t of this.bezierPath2D)e.stroke(t)}commit(){this.#Ft||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Ft=!0,this.div.classList.add("disabled"),this.#qt(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(t){super.focusin(t),this.enableEditMode()}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#Ft&&(this.setInForeground(),"mouse"!==t.type&&this.div.focus(),t.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#Lt),this.canvas.addEventListener("pointermove",this.#Ot),this.#Qt(t.offsetX,t.offsetY))}canvasPointermove(t){t.stopPropagation(),this.#Zt(t.offsetX,t.offsetY)}canvasPointerup(t){0===t.button&&this.isInEditMode()&&0!==this.currentPath.length&&(t.stopPropagation(),this.#re(t),this.setInBackground())}canvasPointerleave(t){this.#re(t),this.setInBackground()}#re(t){this.#te(t.offsetX,t.offsetY),this.canvas.removeEventListener("pointerleave",this.#Lt),this.canvas.removeEventListener("pointermove",this.#Ot),this.parent.addToAnnotationStorage(this)}#$t(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",l._l10nPromise.get("editor_ink_canvas_aria_label").then((t=>this.canvas?.setAttribute("aria-label",t))),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Xt(){this.#Bt=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),this.#Bt.observe(this.div)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),l._l10nPromise.get("editor_ink_aria_label").then((t=>this.div?.setAttribute("aria-label",t)));const[n,r,i,s]=this.#Kt();if(this.setAt(n,r,0,0),this.setDims(i,s),this.#$t(),this.width){const[n,r]=this.parent.viewportBaseDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this.#Nt=!0,this.#Yt(),this.setDims(this.width*n,this.height*r),this.#Gt(),this.#ie(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#Xt(),this.div}#Yt(){if(!this.#Nt)return;const[t,e]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#ne()}setDimensions(t,e){const n=Math.round(t),r=Math.round(e);if(this.#Ut===n&&this.#Vt===r)return;this.#Ut=n,this.#Vt=r,this.canvas.style.visibility="hidden",this.#Mt&&Math.abs(this.#Mt-t/e)>.01&&(e=Math.ceil(t/this.#Mt),this.setDims(t,e));const[i,s]=this.parent.viewportBaseDimensions;this.width=t/i,this.height=e/s,this.#Ft&&this.#se(t,e),this.#Yt(),this.#Gt(),this.canvas.style.visibility="visible"}#se(t,e){const n=this.#ae(),r=(t-n)/this.#Rt,i=(e-n)/this.#kt;this.scaleFactor=Math.min(r,i)}#ne(){const t=this.#ae()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#ee(t){const e=new Path2D;for(let n=0,r=t.length;n<r;n++){const[r,i,s,a]=t[n];0===n&&e.moveTo(...r),e.bezierCurveTo(i[0],i[1],s[0],s[1],a[0],a[1])}return e}#oe(t,e,n,r){const i=[],s=this.thickness/2;let a,o;for(const l of this.paths){a=[],o=[];for(let i=0,c=l.length;i<c;i++){const[c,u,h,d]=l[i],p=t*(c[0]+e)+s,f=r-t*(c[1]+n)-s,g=t*(u[0]+e)+s,m=r-t*(u[1]+n)-s,y=t*(h[0]+e)+s,v=r-t*(h[1]+n)-s,b=t*(d[0]+e)+s,_=r-t*(d[1]+n)-s;0===i&&(a.push(p,f),o.push(p,f)),a.push(g,m,y,v,b,_),this.#le(p,f,g,m,y,v,b,_,4,o)}i.push({bezier:a,points:o})}return i}#le(t,e,n,r,i,s,a,o,l,c){if(this.#ce(t,e,n,r,i,s,a,o))c.push(a,o);else{for(let u=1;u<l-1;u++){const h=u/l,d=1-h;let p=h*t+d*n,f=h*e+d*r,g=h*n+d*i,m=h*r+d*s;p=h*p+d*g,f=h*f+d*m,g=h*g+d*(h*i+d*a),m=h*m+d*(h*s+d*o),p=h*p+d*g,f=h*f+d*m,c.push(p,f)}c.push(a,o)}}#ce(t,e,n,r,i,s,a,o){const l=(3*n-2*t-a)**2,c=(3*r-2*e-o)**2,u=(3*i-t-2*a)**2,h=(3*s-e-2*o)**2;return Math.max(l,u)+Math.max(c,h)<=10}#ue(){let t=1/0,e=-1/0,n=1/0,i=-1/0;for(const s of this.paths)for(const[a,o,l,c]of s){const s=r.Util.bezierBoundingBox(...a,...o,...l,...c);t=Math.min(t,s[0]),n=Math.min(n,s[1]),e=Math.max(e,s[2]),i=Math.max(i,s[3])}return[t,n,e,i]}#ae(){return this.#Ft?Math.ceil(this.thickness*this.parent.scaleFactor):0}#qt(t=!1){if(this.isEmpty())return;if(!this.#Ft)return void this.#Gt();const e=this.#ue(),n=this.#ae();this.#Rt=Math.max(o,e[2]-e[0]),this.#kt=Math.max(o,e[3]-e[1]);const r=Math.ceil(n+this.#Rt*this.scaleFactor),i=Math.ceil(n+this.#kt*this.scaleFactor),[s,a]=this.parent.viewportBaseDimensions;this.width=r/s,this.height=i/a,this.#Mt=r/i,this.#ie();const l=this.translationX,c=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#Yt(),this.#Gt(),this.#Ut=r,this.#Vt=i,this.setDims(r,i);const u=t?n/this.scaleFactor/2:0;this.translate(l-this.translationX-u,c-this.translationY-u)}#ie(){const{style:t}=this.div;this.#Mt>=1?(t.minHeight="16px",t.minWidth=`${Math.round(this.#Mt*o)}px`):(t.minWidth="16px",t.minHeight=`${Math.round(o/this.#Mt)}px`)}static deserialize(t,e){const n=super.deserialize(t,e);n.thickness=t.thickness,n.color=r.Util.makeHexColor(...t.color),n.opacity=t.opacity;const[i,s]=e.pageDimensions,a=n.width*i,l=n.height*s,c=e.scaleFactor,u=t.thickness/2;n.#Mt=a/l,n.#Ft=!0,n.#Ut=Math.round(a),n.#Vt=Math.round(l);for(const{bezier:e}of t.paths){const t=[];n.paths.push(t);let r=c*(e[0]-u),i=c*(l-e[1]-u);for(let n=2,s=e.length;n<s;n+=6){const s=c*(e[n]-u),a=c*(l-e[n+1]-u),o=c*(e[n+2]-u),h=c*(l-e[n+3]-u),d=c*(e[n+4]-u),p=c*(l-e[n+5]-u);t.push([[r,i],[s,a],[o,h],[d,p]]),r=d,i=p}const s=this.#ee(t);n.bezierPath2D.push(s)}const h=n.#ue();return n.#Rt=Math.max(o,h[2]-h[0]),n.#kt=Math.max(o,h[3]-h[1]),n.#se(a,l),n}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],n=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:this.#oe(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,e),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}e.InkEditor=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const r=n(26);e.fitCurve=r},t=>{function e(t,i,s,a,o){var c,u,h,d,p,f,g,m,y,v,b,_,A;if(2===t.length)return _=l.vectorLen(l.subtract(t[0],t[1]))/3,[c=[t[0],l.addArrays(t[0],l.mulItems(i,_)),l.addArrays(t[1],l.mulItems(s,_)),t[1]]];if(u=function(t){var e,n,r,i=[];return t.forEach(((t,s)=>{e=s?n+l.vectorLen(l.subtract(t,r)):0,i.push(e),n=e,r=t})),i=i.map((t=>t/n))}(t),[c,d,f]=n(t,u,u,i,s,o),0===d||d<a)return[c];if(d<a*a)for(h=u,p=d,g=f,A=0;A<20;A++){if(h=r(c,t,h),[c,d,f]=n(t,u,h,i,s,o),d<a)return[c];if(f===g){let t=d/p;if(t>.9999&&t<1.0001)break}p=d,g=f}return b=[],(m=l.subtract(t[f-1],t[f+1])).every((t=>0===t))&&(m=l.subtract(t[f-1],t[f]),[m[0],m[1]]=[-m[1],m[0]]),y=l.normalize(m),v=l.mulItems(y,-1),b=(b=b.concat(e(t.slice(0,f+1),i,y,a,o))).concat(e(t.slice(f),v,s,a,o))}function n(t,e,n,r,i,o){var u,h,d;return u=function(t,e,n,r){var i,s,a,o,u,h,d,p,f,g,m,y,v,b,_,A,S,w=t[0],x=t[t.length-1];for(i=[w,null,null,x],s=l.zeros_Xx2x2(e.length),v=0,b=e.length;v<b;v++)S=1-(A=e[v]),(a=s[v])[0]=l.mulItems(n,3*A*(S*S)),a[1]=l.mulItems(r,3*S*(A*A));for(o=[[0,0],[0,0]],u=[0,0],v=0,b=t.length;v<b;v++)A=e[v],a=s[v],o[0][0]+=l.dot(a[0],a[0]),o[0][1]+=l.dot(a[0],a[1]),o[1][0]+=l.dot(a[0],a[1]),o[1][1]+=l.dot(a[1],a[1]),_=l.subtract(t[v],c.q([w,w,x,x],A)),u[0]+=l.dot(a[0],_),u[1]+=l.dot(a[1],_);return h=o[0][0]*o[1][1]-o[1][0]*o[0][1],d=o[0][0]*u[1]-o[1][0]*u[0],p=u[0]*o[1][1]-u[1]*o[0][1],f=0===h?0:p/h,g=0===h?0:d/h,y=l.vectorLen(l.subtract(w,x)),f<(m=1e-6*y)||g<m?(i[1]=l.addArrays(w,l.mulItems(n,y/3)),i[2]=l.addArrays(x,l.mulItems(r,y/3))):(i[1]=l.addArrays(w,l.mulItems(n,f)),i[2]=l.addArrays(x,l.mulItems(r,g))),i}(t,n,r,i),[h,d]=function(t,e,n){var r,i,o,u,h,d,p,f;i=0,o=Math.floor(t.length/2);const g=s(e,10);for(h=0,d=t.length;h<d;h++)p=t[h],f=a(0,n[h],g,10),(r=(u=l.subtract(c.q(e,f),p))[0]*u[0]+u[1]*u[1])>i&&(i=r,o=h);return[i,o]}(t,u,e),o&&o({bez:u,points:t,params:e,maxErr:h,maxPoint:d}),[u,h,d]}function r(t,e,n){return n.map(((n,r)=>i(t,e[r],n)))}function i(t,e,n){var r=l.subtract(c.q(t,n),e),i=c.qprime(t,n),s=l.mulMatrix(r,i),a=l.sum(l.squareItems(i))+2*l.mulMatrix(r,c.qprimeprime(t,n));return 0===a?n:n-s/a}var s=function(t,e){for(var n,r=[0],i=t[0],s=0,a=1;a<=e;a++)n=c.q(t,a/e),s+=l.vectorLen(l.subtract(n,i)),r.push(s),i=n;return r=r.map((t=>t/s))};function a(t,e,n,r){if(e<0)return 0;if(e>1)return 1;for(var i,s,a,o,l=1;l<=r;l++)if(e<=n[l]){a=(l-1)/r,s=l/r,o=(e-(i=n[l-1]))/(n[l]-i)*(s-a)+a;break}return o}function o(t,e){return l.normalize(l.subtract(t,e))}class l{static zeros_Xx2x2(t){for(var e=[];t--;)e.push([0,0]);return e}static mulItems(t,e){return t.map((t=>t*e))}static mulMatrix(t,e){return t.reduce(((t,n,r)=>t+n*e[r]),0)}static subtract(t,e){return t.map(((t,n)=>t-e[n]))}static addArrays(t,e){return t.map(((t,n)=>t+e[n]))}static addItems(t,e){return t.map((t=>t+e))}static sum(t){return t.reduce(((t,e)=>t+e))}static dot(t,e){return l.mulMatrix(t,e)}static vectorLen(t){return Math.hypot(...t)}static divItems(t,e){return t.map((t=>t/e))}static squareItems(t){return t.map((t=>t*t))}static normalize(t){return this.divItems(t,this.vectorLen(t))}}class c{static q(t,e){var n=1-e,r=l.mulItems(t[0],n*n*n),i=l.mulItems(t[1],3*n*n*e),s=l.mulItems(t[2],3*n*e*e),a=l.mulItems(t[3],e*e*e);return l.addArrays(l.addArrays(r,i),l.addArrays(s,a))}static qprime(t,e){var n=1-e,r=l.mulItems(l.subtract(t[1],t[0]),3*n*n),i=l.mulItems(l.subtract(t[2],t[1]),6*n*e),s=l.mulItems(l.subtract(t[3],t[2]),3*e*e);return l.addArrays(l.addArrays(r,i),s)}static qprimeprime(t,e){return l.addArrays(l.mulItems(l.addArrays(l.subtract(t[2],l.mulItems(t[1],2)),t[0]),6*(1-e)),l.mulItems(l.addArrays(l.subtract(t[3],l.mulItems(t[2],2)),t[1]),6*e))}}t.exports=function(t,n,r){if(!Array.isArray(t))throw new TypeError("First argument should be an array");if(t.forEach((e=>{if(!Array.isArray(e)||e.some((t=>"number"!=typeof t))||e.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")})),(t=t.filter(((e,n)=>0===n||!e.every(((e,r)=>e===t[n-1][r]))))).length<2)return[];const i=t.length,s=o(t[1],t[0]),a=o(t[i-2],t[i-1]);return e(t,s,a,n,r)},t.exports.fitCubic=e,t.exports.createTangent=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r=n(1),i=n(8),s=n(5),a=n(28),o=n(29);const l=1e3,c=new WeakSet;function u(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class h{static create(t){switch(t.data.annotationType){case r.AnnotationType.LINK:return new p(t);case r.AnnotationType.TEXT:return new f(t);case r.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new m(t);case"Btn":return t.data.radioButton?new v(t):t.data.checkBox?new y(t):new b(t);case"Ch":return new _(t)}return new g(t);case r.AnnotationType.POPUP:return new A(t);case r.AnnotationType.FREETEXT:return new w(t);case r.AnnotationType.LINE:return new x(t);case r.AnnotationType.SQUARE:return new P(t);case r.AnnotationType.CIRCLE:return new E(t);case r.AnnotationType.POLYLINE:return new C(t);case r.AnnotationType.CARET:return new M(t);case r.AnnotationType.INK:return new k(t);case r.AnnotationType.POLYGON:return new T(t);case r.AnnotationType.HIGHLIGHT:return new R(t);case r.AnnotationType.UNDERLINE:return new O(t);case r.AnnotationType.SQUIGGLY:return new L(t);case r.AnnotationType.STRIKEOUT:return new D(t);case r.AnnotationType.STAMP:return new I(t);case r.AnnotationType.FILEATTACHMENT:return new F(t);default:return new d(t)}}}class d{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,e&&(this.container=this._createContainer(n)),r&&(this.quadrilaterals=this._createQuadrilaterals(n))}_createContainer(t=!1){const e=this.data,n=this.page,i=this.viewport,s=document.createElement("section"),{width:a,height:o}=u(e.rect),[l,c,h,d]=i.viewBox,p=h-l,f=d-c;s.setAttribute("data-annotation-id",e.id);const g=r.Util.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]);if(!t&&e.borderStyle.width>0){s.style.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${n}px * var(--scale-factor))`;s.style.borderRadius=e}else if(this instanceof v){const t=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;s.style.borderRadius=t}switch(e.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:s.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:s.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:s.style.borderBottomStyle="solid"}const i=e.borderColor||null;i?s.style.borderColor=r.Util.makeHexColor(0|i[0],0|i[1],0|i[2]):s.style.borderWidth=0}s.style.left=100*(g[0]-l)/p+"%",s.style.top=100*(g[1]-c)/f+"%";const{rotation:m}=e;return e.hasOwnCanvas||0===m?(s.style.width=100*a/p+"%",s.style.height=100*o/f+"%"):this.setRotation(m,s),s}setRotation(t,e=this.container){const[n,r,i,s]=this.viewport.viewBox,a=i-n,o=s-r,{width:l,height:c}=u(this.data.rect);let h,d;t%180==0?(h=100*l/a,d=100*c/o):(h=100*c/a,d=100*l/o),e.style.width=`${h}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,n)=>{const r=n.detail[t];n.target.style[e]=a.ColorConverters[`${r[0]}_HTML`](r.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:t=>{const e=t.detail.display%2==1;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{this.container.style.visibility=t.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const i=t[r]||n[r];i&&i(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,i]of Object.entries(e)){const s=n[r];s&&(s({detail:{[r]:i},target:t}),delete e[r])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const e=[],n=this.data.rect;for(const n of this.data.quadPoints)this.data.rect=[n[2].x,n[2].y,n[1].x,n[1].y],e.push(this._createContainer(t));return this.data.rect=n,e}_createPopup(t,e){let n=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,n=this.quadrilaterals[0]),t||((t=document.createElement("div")).className="popupTriggerArea",n.append(t));const r=new S({container:n,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();r.style.left="100%",n.append(r)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals)e.className=t;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:s,exportValues:a}of i){if(-1===t)continue;if(s===e)continue;const i="string"==typeof a?a:null,o=document.querySelector(`[data-element-id="${s}"]`);!o||c.has(o)?n.push({id:s,exportValue:i,domElement:o}):(0,r.warn)(`_getElementsByName - element not allowed: ${s}`)}return n}for(const r of document.getElementsByName(t)){const{id:t,exportValue:i}=r;t!==e&&c.has(r)&&n.push({id:t,exportValue:i,domElement:r})}return n}static get platform(){const t="undefined"!=typeof navigator?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class p extends d{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action),r=!0):t.dest?(this._bindLink(n,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(((t,e)=>{const r=0===e?n:n.cloneNode();return t.append(r),t})):(this.container.className="linkAnnotation",r&&this.container.append(n),this.container)}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&(t.className="internalLink")}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),t.className="internalLink"}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const i=n.get(r);i&&(t[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(t.onclick=()=>!1));t.onclick=()=>{n&&n();const{fields:t,refs:i,include:s}=e,a=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const n of t){const t=this._fieldObjects[n]||[];for(const{id:n}of t)e.add(n)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===s&&a.push(n)}else for(const t of Object.values(this._fieldObjects))a.push(...t);const o=this.annotationStorage,l=[];for(const t of a){const{id:e}=t;switch(l.push(e),t.type){case"text":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;o.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}default:continue}const n=document.querySelector(`[data-element-id="${e}"]`);n&&(c.has(n)?n.dispatchEvent(new Event("resetform")):(0,r.warn)(`_bindResetFormAction - element not allowed: ${e}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}}),!1}}}class f extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}class g extends d{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:e,isMac:n}=d.platform;return e&&t.ctrlKey||n&&t.metaKey}_setEventListener(t,e,n,r){e.includes("mouse")?t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(t)}})}))}_setEventListeners(t,e,n){for(const[r,i]of e)("Action"===i||this.data.actions?.[i])&&this._setEventListener(t,r,i,n)}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":r.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=t.style;let a;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]),e=t/(Math.round(t/(r.LINE_FACTOR*i))||1);a=Math.min(i,Math.round(e/r.LINE_FACTOR))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]);a=Math.min(i,Math.round(t/r.LINE_FACTOR))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=r.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class m extends g{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,n,r){const i=this.annotationStorage;for(const s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=n),i.setValue(s.id,{[r]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.className="textWidgetAnnotation";let n=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let i=r.formattedValue||r.value||"";const s=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;s&&i.length>s&&(i=i.slice(0,s));const a={userValue:i,formattedValue:null,valueOnFocus:""};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=i,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",i),this.data.doNotScroll&&(n.style.overflowX="hidden")),c.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=l,this._setRequired(n,this.data.required),s&&(n.maxLength=s),n.addEventListener("input",(r=>{t.setValue(e,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value")})),n.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";n.value=a.userValue=e,a.formattedValue=null}));let o=t=>{const{formattedValue:e}=a;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",(t=>{a.userValue&&(t.target.value=a.userValue),a.valueOnFocus=t.target.value})),n.addEventListener("updatefromsandbox",(n=>{const r={value(n){a.userValue=n.detail.value??"",t.setValue(e,{value:a.userValue.toString()}),n.target.value=a.userValue},formattedValue(n){const{formattedValue:r}=n.detail;a.formattedValue=r,null!=r&&n.target!==document.activeElement&&(n.target.value=r),t.setValue(e,{formattedValue:r})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:n=>{const{charLimit:r}=n.detail,{target:i}=n;if(0===r)return void i.removeAttribute("maxLength");i.setAttribute("maxLength",r);let s=a.userValue;!s||s.length<=r||(s=s.slice(0,r),i.value=a.userValue=s,t.setValue(e,{value:s}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:i.selectionStart,selEnd:i.selectionEnd}}))}};this._dispatchEventFromSandbox(r,n)})),n.addEventListener("keydown",(t=>{let n=-1;if("Escape"===t.key?n=0:"Enter"===t.key?n=2:"Tab"===t.key&&(n=3),-1===n)return;const{value:r}=t.target;a.valueOnFocus!==r&&(a.userValue=r,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:n,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const r=o;o=null,n.addEventListener("blur",(t=>{const{value:n}=t.target;a.userValue=n,this._mouseState.isDown&&a.valueOnFocus!==n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),r(t)})),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",(t=>{const{data:n,target:r}=t,{value:i,selectionStart:s,selectionEnd:a}=r;let o=s,l=a;switch(t.inputType){case"deleteWordBackward":{const t=i.substring(0,s).match(/\w*[^\w]*$/);t&&(o-=t[0].length);break}case"deleteWordForward":{const t=i.substring(s).match(/^[^\w]*\w*/);t&&(l+=t[0].length);break}case"deleteContentBackward":s===a&&(o-=1);break;case"deleteContentForward":s===a&&(l+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,change:n||"",willCommit:!1,selStart:o,selEnd:l}})})),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(o&&n.addEventListener("blur",o),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/s;n.classList.add("comb"),n.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class y extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,t.setValue(n,{value:r})),this.container.className="buttonWidgetAnnotation checkBox";const i=document.createElement("input");return c.add(i),i.setAttribute("data-element-id",n),i.disabled=e.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=e.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",e.exportValue),i.tabIndex=l,i.addEventListener("change",(r=>{const{name:i,checked:s}=r.target;for(const r of this._getElementsByName(i,n)){const n=s&&r.exportValue===e.exportValue;r.domElement&&(r.domElement.checked=n),t.setValue(r.id,{value:n})}t.setValue(n,{value:s})})),i.addEventListener("resetform",(t=>{const n=e.defaultFieldValue||"Off";t.target.checked=n===e.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(e=>{const r={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};this._dispatchEventFromSandbox(r,e)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class v extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;"string"==typeof r&&(r=r!==e.buttonValue,t.setValue(n,{value:r}));const i=document.createElement("input");if(c.add(i),i.setAttribute("data-element-id",n),i.disabled=e.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=e.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=l,i.addEventListener("change",(e=>{const{name:r,checked:i}=e.target;for(const e of this._getElementsByName(r,n))t.setValue(e.id,{value:!1});t.setValue(n,{value:i})})),i.addEventListener("resetform",(t=>{const n=e.defaultFieldValue;t.target.checked=null!=n&&n===e.buttonValue})),this.enableScripting&&this.hasJSActions){const r=e.buttonValue;i.addEventListener("updatefromsandbox",(e=>{const i={value:e=>{const i=r===e.detail.value;for(const r of this._getElementsByName(e.target.name)){const e=i&&r.id===n;r.domElement&&(r.domElement.checked=e),t.setValue(r.id,{value:e})}}};this._dispatchEventFromSandbox(i,e)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class b extends p{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText);const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class _ extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");c.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=l;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of r.options)t.selected=t.value===e}));for(const t of this.data.options){const e=document.createElement("option");e.textContent=t.displayValue,e.value=t.exportValue,n.value.includes(t.exportValue)&&(e.setAttribute("selected",!0),i=!1),r.append(e)}let s=null;if(i){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),r.prepend(t),s=()=>{t.remove(),r.removeEventListener("input",s),s=null},r.addEventListener("input",s)}const a=(t,e)=>{const n=e?"value":"textContent",r=t.target.options;return t.target.multiple?Array.prototype.filter.call(r,(t=>t.selected)).map((t=>t[n])):-1===r.selectedIndex?null:r[r.selectedIndex][n]},o=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",(n=>{const i={value(n){s?.();const i=n.detail.value,o=new Set(Array.isArray(i)?i:[i]);for(const t of r.options)t.selected=o.has(t.value);t.setValue(e,{value:a(n,!0)})},multipleSelection(t){r.multiple=!0},remove(n){const i=r.options,s=n.detail.remove;i[s].selected=!1,r.remove(s),i.length>0&&-1===Array.prototype.findIndex.call(i,(t=>t.selected))&&(i[0].selected=!0),t.setValue(e,{value:a(n,!0),items:o(n)})},clear(n){for(;0!==r.length;)r.remove(0);t.setValue(e,{value:null,items:[]})},insert(n){const{index:i,displayValue:s,exportValue:l}=n.detail.insert,c=r.children[i],u=document.createElement("option");u.textContent=s,u.value=l,c?c.before(u):r.append(u),t.setValue(e,{value:a(n,!0),items:o(n)})},items(n){const{items:i}=n.detail;for(;0!==r.length;)r.remove(0);for(const t of i){const{displayValue:e,exportValue:n}=t,i=document.createElement("option");i.textContent=e,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:a(n,!0),items:o(n)})},indices(n){const r=new Set(n.detail.indices);for(const t of n.target.options)t.selected=r.has(t.index);t.setValue(e,{value:a(n,!0)})},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(i,n)})),r.addEventListener("input",(n=>{const r=a(n,!0),i=a(n,!1);t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,changeEx:r,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(t=>t.target.checked))):r.addEventListener("input",(function(n){t.setValue(e,{value:a(n,!0)})})),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class A extends d{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const t=`[data-annotation-id="${this.data.parentId}"]`,e=this.layer.querySelectorAll(t);if(0===e.length)return this.container;const n=new S({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),i=this.page,s=r.Util.normalizeRect([this.data.parentRect[0],i.view[3]-this.data.parentRect[1]+i.view[1],this.data.parentRect[2],i.view[3]-this.data.parentRect[3]+i.view[1]]),a=s[0]+this.data.parentRect[2]-this.data.parentRect[0],o=s[1],[l,c,u,h]=this.viewport.viewBox,d=u-l,p=h-c;return this.container.style.left=100*(a-l)/d+"%",this.container.style.top=100*(o-c)/p+"%",this.container.append(n.render()),this.container}}class S{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.hidden=!0;const e=document.createElement("div");e.className="popup";const n=this.color;if(n){const t=.7*(255-n[0])+n[0],i=.7*(255-n[1])+n[1],s=.7*(255-n[2])+n[2];e.style.backgroundColor=r.Util.makeHexColor(0|t,0|i,0|s)}const s=document.createElement("h1");s.dir=this.titleObj.dir,s.textContent=this.titleObj.str,e.append(s);const a=i.PDFDateString.toDateObject(this.modificationDate);if(a){const t=document.createElement("span");t.className="popupDate",t.textContent="{{date}}, {{time}}",t.dataset.l10nId="annotation_date_string",t.dataset.l10nArgs=JSON.stringify({date:a.toLocaleDateString(),time:a.toLocaleTimeString()}),e.append(t)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const t=this._formatContents(this.contentsObj);e.append(t)}else o.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:e}),e.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const t of this.trigger)t.addEventListener("click",this._toggle.bind(this)),t.addEventListener("mouseover",this._show.bind(this,!1)),t.addEventListener("mouseout",this._hide.bind(this,!1));return e.addEventListener("click",this._hide.bind(this,!0)),t.append(e),t}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.className="popupContent",n.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let t=0,e=r.length;t<e;++t){const i=r[t];n.append(document.createTextNode(i)),t<e-1&&n.append(document.createElement("br"))}return n}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(t=!0){t&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class w extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.textContent=t.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const t=document.createElement("div");t.className="annotationTextContent",t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class x extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:e,height:n}=u(t.rect),r=this.svgFactory.create(e,n,!0),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),i.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),i.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),this._createPopup(i,t),this.container}}class P extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:e,height:n}=u(t.rect),r=this.svgFactory.create(e,n,!0),i=t.borderStyle.width,s=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",i/2),s.setAttribute("y",i/2),s.setAttribute("width",e-i),s.setAttribute("height",n-i),s.setAttribute("stroke-width",i||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),this._createPopup(s,t),this.container}}class E extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:e,height:n}=u(t.rect),r=this.svgFactory.create(e,n,!0),i=t.borderStyle.width,s=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",e/2),s.setAttribute("cy",n/2),s.setAttribute("rx",e/2-i/2),s.setAttribute("ry",n/2-i/2),s.setAttribute("stroke-width",i||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),this._createPopup(s,t),this.container}}class C extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:n}=u(t.rect),r=this.svgFactory.create(e,n,!0);let i=[];for(const e of t.vertices){const n=e.x-t.rect[0],r=t.rect[3]-e.y;i.push(n+","+r)}i=i.join(" ");const s=this.svgFactory.createElement(this.svgElementName);return s.setAttribute("points",i),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),this._createPopup(s,t),this.container}}class T extends C{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class M extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:n}=u(t.rect),r=this.svgFactory.create(e,n,!0);for(const e of t.inkLists){let n=[];for(const r of e){const e=r.x-t.rect[0],i=t.rect[3]-r.y;n.push(`${e},${i}`)}n=n.join(" ");const i=this.svgFactory.createElement(this.svgElementName);i.setAttribute("points",n),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),this._createPopup(i,t),r.append(i)}return this.container.append(r),this.container}}class R extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class O extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class L extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class D extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class I extends d{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends d{constructor(t){super(t,{isRenderable:!0});const{filename:e,content:n}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(e),this.content=n,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:e,content:n})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.className="popupTriggerArea",t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.append(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class N{static#he(t,e,n,r){const s=t.firstChild||t;s.id=`${i.AnnotationPrefix}${e}`,n.append(t),r?.moveElementInDOM(n,t,s,!1)}static render(t){const{annotations:e,div:n,viewport:a,accessibilityManager:o}=t;this.#de(n,a);let l=0;for(const c of e){if(c.annotationType!==r.AnnotationType.POPUP){const{width:t,height:e}=u(c.rect);if(t<=0||e<=0)continue}const e=h.create({data:c,layer:n,page:t.page,viewport:a,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:t.annotationStorage||new s.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(e.isRenderable){const t=e.render();if(c.hidden&&(t.style.visibility="hidden"),Array.isArray(t))for(const e of t)e.style.zIndex=l++,N.#he(e,c.id,n,o);else t.style.zIndex=l++,e instanceof A?n.prepend(t):N.#he(t,c.id,n,o)}}this.#pe(n,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:e,div:n,viewport:r}=t;this.#de(n,r),this.#pe(n,e),n.hidden=!1}static#de(t,{width:e,height:n,rotation:r}){const{style:i}=t,s=r%180!=0,a=Math.floor(e)+"px",o=Math.floor(n)+"px";i.width=s?o:a,i.height=s?a:o,t.setAttribute("data-main-rotation",r)}static#pe(t,e){if(e){for(const[n,r]of e){const e=t.querySelector(`[data-annotation-id="${n}"]`);if(!e)continue;const{firstChild:i}=e;i?"CANVAS"===i.nodeName?i.replaceWith(r):i.before(r):e.append(r)}e.clear()}}}e.AnnotationLayer=N},(t,e)=>{function n(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0,e.ColorConverters=class{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_HTML([t]){const e=n(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_HTML([t,e,r]){return`#${n(t)}${n(e)}${n(r)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,i=1-e,s=1-n;return["CMYK",r,i,s,Math.min(r,i,s)]}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=n(20);e.XfaLayer=class{static setupStorage(t,e,n,r,i){const s=r.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(t.textContent=s.value),"print"===i)break;t.addEventListener("input",(t=>{r.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?t.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===i)break;t.addEventListener("change",(t=>{r.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==s.value&&t.setAttribute("value",s.value),"print"===i)break;t.addEventListener("input",(t=>{r.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==s.value)for(const t of n.children)t.attributes.value===s.value&&(t.attributes.selected=!0);t.addEventListener("input",(t=>{const n=t.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(e,{value:i})}))}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:i}){const{attributes:s}=e,a=t instanceof HTMLAnchorElement;"radio"===s.type&&(s.name=`${s.name}-${r}`);for(const[e,n]of Object.entries(s))if(null!=n)switch(e){case"class":n.length&&t.setAttribute(e,n.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",n);break;case"style":Object.assign(t.style,n);break;case"textContent":t.textContent=n;break;default:(!a||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,n)}a&&i.addLinkAttributes(t,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(t,s.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,s=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:n});const o=[[i,-1,a]],l=t.div;if(l.append(a),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=e}"richText"!==s&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;o.length>0;){const[t,i,a]=o.at(-1);if(i+1===t.children.length){o.pop();continue}const l=t.children[++o.at(-1)[1]];if(null===l)continue;const{name:u}=l;if("#text"===u){const t=document.createTextNode(l.value);c.push(t),a.append(t);continue}let h;if(h=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,u):document.createElement(u),a.append(h),l.attributes&&this.setAttributes({html:h,element:l,storage:e,intent:s,linkService:n}),l.children&&l.children.length>0)o.push([l,-1,h]);else if(l.value){const t=document.createTextNode(l.value);r.XfaText.shouldBuildText(u)&&c.push(t),h.append(t)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=function(t){const e=new p({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e};var r=n(1),i=n(8);const s=30,a=new Map,o=/^\s+$/g;function l(t,e,n,i){const l=document.createElement("span"),c=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};t._textDivs.push(l);const u=r.Util.transform(t._viewport.transform,e.transform);let h=Math.atan2(u[1],u[0]);const d=n[e.fontName];d.vertical&&(h+=Math.PI/2);const p=Math.hypot(u[2],u[3]),f=p*function(t,e){const n=a.get(t);if(n)return n;e.save(),e.font=`30px ${t}`;const r=e.measureText("");let i=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(i){e.restore();const n=i/(i+o);return a.set(t,n),n}e.strokeStyle="red",e.clearRect(0,0,s,s),e.strokeText("g",0,0);let l=e.getImageData(0,0,s,s).data;o=0;for(let t=l.length-1-3;t>=0;t-=4)if(l[t]>0){o=Math.ceil(t/4/s);break}e.clearRect(0,0,s,s),e.strokeText("A",0,s),l=e.getImageData(0,0,s,s).data,i=0;for(let t=0,e=l.length;t<e;t+=4)if(l[t]>0){i=s-Math.floor(t/4/s);break}if(e.restore(),i){const e=i/(i+o);return a.set(t,e),e}return a.set(t,.8),.8}(d.fontFamily,i);let g,m;0===h?(g=u[4],m=u[5]-f):(g=u[4]+f*Math.sin(h),m=u[5]-f*Math.cos(h)),l.style.left=`${g}px`,l.style.top=`${m}px`,l.style.fontSize=`${p}px`,l.style.fontFamily=d.fontFamily,c.fontSize=p,l.setAttribute("role","presentation"),l.textContent=e.str,l.dir=e.dir,t._fontInspectorEnabled&&(l.dataset.fontName=e.fontName),0!==h&&(c.angle=h*(180/Math.PI));let y=!1;if(e.str.length>1||t._enhanceTextSelection&&o.test(e.str))y=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(y=!0)}if(y&&(d.vertical?c.canvasWidth=e.height*t._viewport.scale:c.canvasWidth=e.width*t._viewport.scale),t._textDivProperties.set(l,c),t._textContentStream&&t._layoutText(l),t._enhanceTextSelection&&c.hasText){let n=1,i=0;0!==h&&(n=Math.cos(h),i=Math.sin(h));const s=(d.vertical?e.height:e.width)*t._viewport.scale,a=p;let o,c;0!==h?(o=[n,i,-i,n,g,m],c=r.Util.getAxialAlignedBoundingBox([0,0,s,a],o)):c=[g,m,g+s,m+a],t._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:l,size:[s,a],m:o})}}function c(t){if(t._canceled)return;const e=t._textDivs,n=t._capability,r=e.length;if(r>1e5)return t._renderingDone=!0,void n.resolve();if(!t._textContentStream)for(let n=0;n<r;n++)t._layoutText(e[n]);t._renderingDone=!0,n.resolve()}function u(t,e,n){let r=0;for(let i=0;i<n;i++){const n=t[e++];n>0&&(r=r?Math.min(n,r):n)}return r}function h(t){const e=t._bounds,n=t._viewport,i=function(t,e,n){const r=n.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));d(t,r);const i=new Array(n.length);for(const t of r){const e=t.index;i[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}n.map((function(e,n){const s=i[n],a=r[n];a.x1=e.top,a.y1=t-s.right,a.x2=e.bottom,a.y2=t-s.left,a.index=n,a.x1New=void 0,a.x2New=void 0})),d(e,r);for(const t of r){const e=t.index;i[e].top=t.x1New,i[e].bottom=t.x2New}return i}(n.width,n.height,e);for(let n=0;n<i.length;n++){const s=e[n].div,a=t._textDivProperties.get(s);if(0===a.angle){a.paddingLeft=e[n].left-i[n].left,a.paddingTop=e[n].top-i[n].top,a.paddingRight=i[n].right-e[n].right,a.paddingBottom=i[n].bottom-e[n].bottom,t._textDivProperties.set(s,a);continue}const o=i[n],l=e[n],c=l.m,h=c[0],d=c[1],p=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],f=new Float64Array(64);for(let t=0,e=p.length;t<e;t++){const e=r.Util.applyTransform(p[t],c);f[t+0]=h&&(o.left-e[0])/h,f[t+4]=d&&(o.top-e[1])/d,f[t+8]=h&&(o.right-e[0])/h,f[t+12]=d&&(o.bottom-e[1])/d,f[t+16]=d&&(o.left-e[0])/-d,f[t+20]=h&&(o.top-e[1])/h,f[t+24]=d&&(o.right-e[0])/-d,f[t+28]=h&&(o.bottom-e[1])/h,f[t+32]=h&&(o.left-e[0])/-h,f[t+36]=d&&(o.top-e[1])/-d,f[t+40]=h&&(o.right-e[0])/-h,f[t+44]=d&&(o.bottom-e[1])/-d,f[t+48]=d&&(o.left-e[0])/d,f[t+52]=h&&(o.top-e[1])/-h,f[t+56]=d&&(o.right-e[0])/d,f[t+60]=h&&(o.bottom-e[1])/-h}const g=1+Math.min(Math.abs(h),Math.abs(d));a.paddingLeft=u(f,32,16)/g,a.paddingTop=u(f,48,16)/g,a.paddingRight=u(f,0,16)/g,a.paddingBottom=u(f,16,16)/g,t._textDivProperties.set(s,a)}}function d(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const t of e){let e=0;for(;e<n.length&&n[e].end<=t.y1;)e++;let r,i,s=n.length-1;for(;s>=0&&n[s].start>=t.y2;)s--;let a,o,l=-1/0;for(a=e;a<=s;a++){let e;r=n[a],i=r.boundary,e=i.x2>t.x1?i.index>t.index?i.x1New:t.x1:void 0===i.x2New?(i.x2+t.x1)/2:i.x2New,e>l&&(l=e)}for(t.x1New=l,a=e;a<=s;a++)r=n[a],i=r.boundary,void 0===i.x2New?i.x2>t.x1?i.index>t.index&&(i.x2New=i.x2):i.x2New=l:i.x2New>l&&(i.x2New=Math.max(l,i.x2));const c=[];let u=null;for(a=e;a<=s;a++){r=n[a],i=r.boundary;const e=i.x2>t.x2?i:t;u===e?c.at(-1).end=r.end:(c.push({start:r.start,end:r.end,boundary:e}),u=e)}for(n[e].start<t.y1&&(c[0].start=t.y1,c.unshift({start:n[e].start,end:t.y1,boundary:n[e].boundary})),t.y2<n[s].end&&(c.at(-1).end=t.y2,c.push({start:t.y2,end:n[s].end,boundary:n[s].boundary})),a=e;a<=s;a++){if(r=n[a],i=r.boundary,void 0!==i.x2New)continue;let t=!1;for(o=e-1;!t&&o>=0&&n[o].start>=i.y1;o--)t=n[o].boundary===i;for(o=s+1;!t&&o<n.length&&n[o].end<=i.y2;o++)t=n[o].boundary===i;for(o=0;!t&&o<c.length;o++)t=c[o].boundary===i;t||(i.x2New=l)}Array.prototype.splice.apply(n,[e,s-e+1,...c])}for(const e of n){const n=e.boundary;void 0===n.x2New&&(n.x2New=Math.max(t,n.x2))}}class p{constructor({textContent:t,textContentStream:e,container:n,viewport:s,textDivs:a,textContentItemsStr:o,enhanceTextSelection:l}){l&&(0,i.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=t,this._textContentStream=e,this._container=n,this._document=n.ownerDocument,this._viewport=s,this._textDivs=a||[],this._textContentItemsStr=o||[],this._enhanceTextSelection=!!l,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(t,e){for(let n=0,r=t.length;n<r;n++)if(void 0!==t[n].str)this._textContentItemsStr.push(t[n].str),l(this,t[n],e,this._layoutTextCtx);else if("beginMarkedContentProps"===t[n].type||"beginMarkedContent"===t[n].type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==t[n].id&&this._container.setAttribute("id",`${t[n].id}`),e.append(this._container)}else"endMarkedContent"===t[n].type&&(this._container=this._container.parentNode)}_layoutText(t){const e=this._textDivProperties.get(t);let n="";if(0!==e.canvasWidth&&e.hasText){const{fontFamily:r}=t.style,{fontSize:i}=e;i===this._layoutTextLastFontSize&&r===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${i*this._devicePixelRatio}px ${r}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=r);const{width:s}=this._layoutTextCtx.measureText(t.textContent);if(s>0){const t=this._devicePixelRatio*e.canvasWidth/s;this._enhanceTextSelection&&(e.scale=t),n=`scaleX(${t})`}}if(0!==e.angle&&(n=`rotate(${e.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(e.originalTransform=n),t.style.transform=n),e.hasText&&this._container.append(t),e.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this._container.append(t)}}_render(t=0){const e=(0,r.createPromiseCapability)();let n=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=s,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){const t=this._textContent.items,n=this._textContent.styles;this._processItems(t,n),e.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const t=()=>{this._reader.read().then((({value:r,done:i})=>{i?e.resolve():(Object.assign(n,r.styles),this._processItems(r.items,n),t())}),e.reject)};this._reader=this._textContentStream.getReader(),t()}}e.promise.then((()=>{n=null,t?this._renderTimer=setTimeout((()=>{c(this),this._renderTimer=null}),t):c(this)}),this._capability.reject)}expandTextDivs(t=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(h(this),this._bounds=null);const e=[],n=[];for(let r=0,i=this._textDivs.length;r<i;r++){const i=this._textDivs[r],s=this._textDivProperties.get(i);s.hasText&&(t?(e.length=0,n.length=0,s.originalTransform&&e.push(s.originalTransform),s.paddingTop>0?(n.push(`${s.paddingTop}px`),e.push(`translateY(${-s.paddingTop}px)`)):n.push(0),s.paddingRight>0?n.push(s.paddingRight/s.scale+"px"):n.push(0),s.paddingBottom>0?n.push(`${s.paddingBottom}px`):n.push(0),s.paddingLeft>0?(n.push(s.paddingLeft/s.scale+"px"),e.push(`translateX(${-s.paddingLeft/s.scale}px)`)):n.push(0),i.style.padding=n.join(" "),e.length&&(i.style.transform=e.join(" "))):(i.style.padding=null,i.style.transform=s.originalTransform))}}}e.TextLayerRenderTask=p},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=n(8),i=n(1),s=n(3);let a=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=a;{const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",u=["butt","round","square"],h=["miter","round","bevel"],d=function(t,e="",n=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!n)return URL.createObjectURL(new Blob([t],{type:e}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i=`data:${e};base64,`;for(let e=0,n=t.length;e<n;e+=3){const s=255&t[e],a=255&t[e+1],o=255&t[e+2];i+=r[s>>2]+r[(3&s)<<4|a>>4]+r[e+1<n?(15&a)<<2|o>>6:64]+r[e+2<n?63&o:64]}return i},p=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let t=0;t<8;t++)n=1&n?3988292384^n>>1&2147483647:n>>1&2147483647;e[t]=n}function n(t,n,r,i){let s=i;const a=n.length;r[s]=a>>24&255,r[s+1]=a>>16&255,r[s+2]=a>>8&255,r[s+3]=255&a,s+=4,r[s]=255&t.charCodeAt(0),r[s+1]=255&t.charCodeAt(1),r[s+2]=255&t.charCodeAt(2),r[s+3]=255&t.charCodeAt(3),s+=4,r.set(n,s),s+=n.length;const o=function(t,n,r){let i=-1;for(let s=n;s<r;s++){const n=255&(i^t[s]);i=i>>>8^e[n]}return-1^i}(r,i+4,s);r[s]=o>>24&255,r[s+1]=o>>16&255,r[s+2]=o>>8&255,r[s+3]=255&o}function r(t){let e=t.length;const n=65535,r=Math.ceil(e/n),i=new Uint8Array(2+e+5*r+4);let s=0;i[s++]=120,i[s++]=156;let a=0;for(;e>n;)i[s++]=0,i[s++]=255,i[s++]=255,i[s++]=0,i[s++]=0,i.set(t.subarray(a,a+n),s),s+=n,a+=n,e-=n;i[s++]=1,i[s++]=255&e,i[s++]=e>>8&255,i[s++]=255&~e,i[s++]=(65535&~e)>>8&255,i.set(t.subarray(a),s),s+=t.length-a;const o=function(t,e,n){let r=1,i=0;for(let s=e;s<n;++s)r=(r+(255&t[s]))%65521,i=(i+r)%65521;return i<<16|r}(t,0,t.length);return i[s++]=o>>24&255,i[s++]=o>>16&255,i[s++]=o>>8&255,i[s++]=255&o,i}function a(e,a,o,l){const c=e.width,u=e.height;let h,p,f;const g=e.data;switch(a){case i.ImageKind.GRAYSCALE_1BPP:p=0,h=1,f=c+7>>3;break;case i.ImageKind.RGB_24BPP:p=2,h=8,f=3*c;break;case i.ImageKind.RGBA_32BPP:p=6,h=8,f=4*c;break;default:throw new Error("invalid format")}const m=new Uint8Array((1+f)*u);let y=0,v=0;for(let t=0;t<u;++t)m[y++]=0,m.set(g.subarray(v,v+f),y),v+=f,y+=f;if(a===i.ImageKind.GRAYSCALE_1BPP&&l){y=0;for(let t=0;t<u;t++){y++;for(let t=0;t<f;t++)m[y++]^=255}}const b=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,u>>24&255,u>>16&255,u>>8&255,255&u,h,p,0,0,0]),_=function(t){if(!s.isNodeJS)return r(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const n=__webpack_require__(258).deflateSync(e,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(t){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return r(t)}(m),A=t.length+36+b.length+_.length,S=new Uint8Array(A);let w=0;return S.set(t,w),w+=t.length,n("IHDR",b,S,w),w+=12+b.length,n("IDATA",_,S,w),w+=12+_.length,n("IEND",new Uint8Array(0),S,w),d(S,"image/png",o)}return function(t,e,n){return a(t,void 0===t.kind?i.ImageKind.GRAYSCALE_1BPP:t.kind,e,n)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=o.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}function g(t){let e=[];const n=[];for(const r of t)"save"!==r.fn?"restore"===r.fn?e=n.pop():e.push(r):(e.push({fnId:92,fn:"group",items:[]}),n.push(e),e=e.at(-1).items);return e}function m(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let n=e.length-1;if("0"!==e[n])return e;do{n--}while("0"===e[n]);return e.substring(0,"."===e[n]?n:n+1)}function y(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${m(t[0])} ${m(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2])return`rotate(${m(180*Math.acos(t[0])/Math.PI)})`}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${m(t[4])} ${m(t[5])})`;return`matrix(${m(t[0])} ${m(t[1])} ${m(t[2])} ${m(t[3])} ${m(t[4])} ${m(t[5])})`}let v=0,b=0,_=0;e.SVGGraphics=a=class{constructor(t,e,n=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new f,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const t in i.OPS)this._operatorIdMapping[i.OPS[t]]=t}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,n=t.argsArray;for(let t=0,r=e.length;t<r;t++)if(e[t]===i.OPS.dependency)for(const e of n[t]){const t=e.startsWith("g_")?this.commonObjs:this.objs,n=new Promise((n=>{t.get(e,n)}));this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(t,e,n,r,s,a){const o=[t,e,n,r,s,a];this.transformMatrix=i.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(t,e){this.viewport=e;const n=this._initialize(e);return this.loadDependencies(t).then((()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),n)))}convertOpList(t){const e=this._operatorIdMapping,n=t.argsArray,r=t.fnArray,i=[];for(let t=0,s=r.length;t<s;t++){const s=r[t];i.push({fnId:s,fn:e[s],args:n[t]})}return g(i)}executeOpTree(t){for(const e of t){const t=e.fn,n=e.fnId,r=e.args;switch(0|n){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(r);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(r[0],r[1]);break;case i.OPS.setFont:this.setFont(r);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(r[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(r[0],r[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(r[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(r[0]);break;case i.OPS.setHScale:this.setHScale(r[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.setTextRise:this.setTextRise(r[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(r[0]);break;case i.OPS.setLineWidth:this.setLineWidth(r[0]);break;case i.OPS.setLineJoin:this.setLineJoin(r[0]);break;case i.OPS.setLineCap:this.setLineCap(r[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(r[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(r);break;case i.OPS.setFillColorN:this.setFillColorN(r);break;case i.OPS.shadingFill:this.shadingFill(r[0]);break;case i.OPS.setDash:this.setDash(r[0],r[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(r[0]);break;case i.OPS.setFlatness:this.setFlatness(r[0]);break;case i.OPS.setGState:this.setGState(r[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(r[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(r[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(r[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(r[0],r[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.constructPath:this.constructPath(r[0],r[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,i.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,n,r,i,s){const a=this.current;a.textMatrix=a.lineMatrix=[t,e,n,r,i,s],a.textMatrixScale=Math.hypot(t,e),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${m(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",m(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.append(a.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=i.IDENTITY_MATRIX,t.lineMatrix=i.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const n=this.current;n.x=n.lineX+=t,n.y=n.lineY+=e,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${m(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",m(-n.y))}showText(t){const e=this.current,n=e.font,r=e.fontSize;if(0===r)return;const s=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=n.vertical,p=d?1:-1,f=n.defaultVMetrics,g=r*e.fontMatrix[0];let v=0;for(const i of t){if(null===i){v+=u*c;continue}if("number"==typeof i){v+=p*i*r/1e3;continue}const t=(i.isSpace?c:0)+a,o=i.fontChar;let l,h,m,y=i.width;if(d){let t;const e=i.vmetric||f;t=i.vmetric?e[1]:.5*y,t=-t*g;const n=e[2]*g;y=e?-e[0]:y,l=t/s,h=(v+n)/s}else l=v/s,h=0;(i.isInFont||n.missingFile)&&(e.xcoords.push(e.x+l),d&&e.ycoords.push(-e.y+h),e.tspan.textContent+=o),m=d?y*g-t*u:y*g+t*u,v+=m}e.tspan.setAttributeNS(null,"x",e.xcoords.map(m).join(" ")),d?e.tspan.setAttributeNS(null,"y",e.ycoords.map(m).join(" ")):e.tspan.setAttributeNS(null,"y",m(-e.y)),d?e.y-=v:e.x+=v*h,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${m(e.fontSize)}px`),e.fontStyle!==o.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==o.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const b=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(b===i.TextRenderingMode.FILL||b===i.TextRenderingMode.FILL_STROKE?(e.fillColor!==o.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),b===i.TextRenderingMode.STROKE||b===i.TextRenderingMode.FILL_STROKE){const t=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,t)}let _=e.textMatrix;0!==e.textRise&&(_=_.slice(),_[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${y(_)} scale(${m(h)}, -1)`),e.txtElement.setAttributeNS(l,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=d(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,n=this.commonObjs.get(t[0]);let r=t[1];e.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),e.fontMatrix=n.fontMatrix||i.FONT_IDENTITY_MATRIX;let s="normal";n.black?s="900":n.bold&&(s="bold");const a=n.italic?"italic":"normal";r<0?(r=-r,e.fontDirection=-1):e.fontDirection=1,e.fontSize=r,e.fontFamily=n.loadedName,e.fontWeight=s,e.fontStyle=a,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",m(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=u[t]}setLineJoin(t){this.current.lineJoin=h[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,n){this.current.strokeColor=i.Util.makeHexColor(t,e,n)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,n){this.current.fillColor=i.Util.makeHexColor(t,e,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,n=this.viewport.height,r=i.Util.inverseTransform(this.transformMatrix),s=i.Util.applyTransform([0,0],r),a=i.Util.applyTransform([0,n],r),o=i.Util.applyTransform([e,0],r),l=i.Util.applyTransform([e,n],r),c=Math.min(s[0],a[0],o[0],l[0]),u=Math.min(s[1],a[1],o[1],l[1]),h=Math.max(s[0],a[0],o[0],l[0]),d=Math.max(s[1],a[1],o[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",c),p.setAttributeNS(null,"y",u),p.setAttributeNS(null,"width",h-c),p.setAttributeNS(null,"height",d-u),p.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&p.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(p)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],n=t[2],r=t[3]||i.IDENTITY_MATRIX,[s,a,o,l]=t[4],c=t[5],u=t[6],h=t[7],d="shading"+_++,[p,f,g,m]=i.Util.normalizeRect([...i.Util.applyTransform([s,a],r),...i.Util.applyTransform([o,l],r)]),[y,v]=i.Util.singularValueDecompose2dScale(r),b=c*y,A=u*v,S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",d),S.setAttributeNS(null,"patternUnits","userSpaceOnUse"),S.setAttributeNS(null,"width",b),S.setAttributeNS(null,"height",A),S.setAttributeNS(null,"x",`${p}`),S.setAttributeNS(null,"y",`${f}`);const w=this.svg,x=this.transformMatrix,P=this.current.fillColor,E=this.current.strokeColor,C=this.svgFactory.create(g-p,m-f);if(this.svg=C,this.transformMatrix=r,2===h){const t=i.Util.makeHexColor(...e);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(n)),this.svg=w,this.transformMatrix=x,this.current.fillColor=P,this.current.strokeColor=E,S.append(C.childNodes[0]),this.defs.append(S),`url(#${d})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e="shading"+_++,n=t[3];let r;switch(t[1]){case"axial":const n=t[4],i=t[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",e),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",n[0]),r.setAttributeNS(null,"y1",n[1]),r.setAttributeNS(null,"x2",i[0]),r.setAttributeNS(null,"y2",i[1]);break;case"radial":const s=t[4],a=t[5],o=t[6],l=t[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",e),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",a[0]),r.setAttributeNS(null,"cy",a[1]),r.setAttributeNS(null,"r",l),r.setAttributeNS(null,"fx",s[0]),r.setAttributeNS(null,"fy",s[1]),r.setAttributeNS(null,"fr",o);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of n){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]),e.setAttributeNS(null,"stop-color",t[1]),r.append(e)}return this.defs.append(r),`url(#${e})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const n=this.current;let r=n.x,s=n.y,a=[],o=0;for(const n of t)switch(0|n){case i.OPS.rectangle:r=e[o++],s=e[o++];const t=r+e[o++],n=s+e[o++];a.push("M",m(r),m(s),"L",m(t),m(s),"L",m(t),m(n),"L",m(r),m(n),"Z");break;case i.OPS.moveTo:r=e[o++],s=e[o++],a.push("M",m(r),m(s));break;case i.OPS.lineTo:r=e[o++],s=e[o++],a.push("L",m(r),m(s));break;case i.OPS.curveTo:r=e[o+4],s=e[o+5],a.push("C",m(e[o]),m(e[o+1]),m(e[o+2]),m(e[o+3]),m(r),m(s)),o+=6;break;case i.OPS.curveTo2:a.push("C",m(r),m(s),m(e[o]),m(e[o+1]),m(e[o+2]),m(e[o+3])),r=e[o+2],s=e[o+3],o+=4;break;case i.OPS.curveTo3:r=e[o+2],s=e[o+3],a.push("C",m(e[o]),m(e[o+1]),m(r),m(s),m(r),m(s)),o+=4;break;case i.OPS.closePath:a.push("Z")}a=a.join(" "),n.path&&t.length>0&&t[0]!==i.OPS.rectangle&&t[0]!==i.OPS.moveTo?a=n.path.getAttributeNS(null,"d")+a:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",a),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(r,s)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+v++,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"transform",y(this.transformMatrix));const r=t.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(r),this.defs.append(n),t.activeClipUrl){t.clipGroup=null;for(const t of this.extraStack)t.clipGroup=null;n.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,i.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const n=this.current;let r=n.dashArray;1!==e&&r.length>0&&(r=r.map((function(t){return e*t}))),t.setAttributeNS(null,"stroke",n.strokeColor),t.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",m(n.miterLimit)),t.setAttributeNS(null,"stroke-linecap",n.lineCap),t.setAttributeNS(null,"stroke-linejoin",n.lineJoin),t.setAttributeNS(null,"stroke-width",m(e*n.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",r.map(m).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",m(e*n.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,i.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const n=t.width,r=t.height,i=p(t,this.forceDataSchema,!!e),s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",m(n)),s.setAttributeNS(null,"height",m(r)),this.current.element=s,this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(c,"xlink:href",i),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",m(-r)),a.setAttributeNS(null,"width",m(n)+"px"),a.setAttributeNS(null,"height",m(r)+"px"),a.setAttributeNS(null,"transform",`scale(${m(1/n)} ${m(-1/r)})`),e?e.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(t){const e=this.current,n=t.width,r=t.height,i=e.fillColor;e.maskId="mask"+b++;const s=this.svgFactory.createElement("svg:mask");s.setAttributeNS(null,"id",e.maskId);const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",m(n)),a.setAttributeNS(null,"height",m(r)),a.setAttributeNS(null,"fill",i),a.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.append(s),this._ensureTransformGroup().append(a),this.paintInlineImageXObject(t,s)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const t=e[2]-e[0],n=e[3]-e[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",e[0]),r.setAttributeNS(null,"y",e[1]),r.setAttributeNS(null,"width",m(t)),r.setAttributeNS(null,"height",m(n)),this.current.element=r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),n=this.svgFactory.createElement("svg:defs");e.append(n),this.defs=n;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",y(t.transform)),e.append(r),this.svg=r,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=n(1),i=n(33);const s=__webpack_require__(172),a=__webpack_require__(1),o=__webpack_require__(779),l=__webpack_require__(558),c=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class{constructor(t){this.source=t,this.url=function(t){const e=l.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?l.parse(`file:///${t}`):(e.host||(e.protocol="file:"),e)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new p(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new m(this,t,e):new f(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class u{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class p extends u{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new r.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const n=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:a}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n)};this._request=null,"http:"===this._url.protocol?this._request=a.request(d(this._url,t.httpHeaders),e):this._request=o.request(d(this._url,t.httpHeaders),e),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class f extends h{constructor(t,e,n){super(t),this._httpHeaders={};for(const e in t.httpHeaders){const n=t.httpHeaders[e];void 0!==n&&(this._httpHeaders[e]=n)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const i=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null,"http:"===this._url.protocol?this._request=a.request(d(this._url,this._httpHeaders),i):this._request=o.request(d(this._url,this._httpHeaders),i),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class g extends u{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),s.lstat(e,((t,n)=>{if(t)return"ENOENT"===t.code&&(t=new r.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=n.size,this._setReadableStream(s.createReadStream(e)),this._headersCapability.resolve()}))}}class m extends h{constructor(t,e,n){super(t);let r=decodeURIComponent(this._url.path);c.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(s.createReadStream(r,{start:e,end:n-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+e+'".'):new r.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},e.extractFilenameFromHeader=function(t){const e=t("Content-Disposition");if(e){let t=(0,i.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(t){}if((0,s.isPdfFile)(t))return t}return null},e.validateRangeRequestCapabilities=function({getResponseHeader:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t("Content-Length"),10);return Number.isInteger(s)?(i.suggestedLength=s,s<=2*n||r||!e||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i):i},e.validateResponseStatus=function(t){return 200===t||206===t};var r=n(1),i=n(34),s=n(8)},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let t=o(n);return t=unescape(t),t=l(t),t=c(t),a(t)}if(n=function(t){const e=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(t));){let[,t,r,i]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[r,i]}const s=[];for(let t=0;t<e.length&&t in e;++t){let[n,r]=e[t];r=o(r),n&&(r=unescape(r),0===t&&(r=l(r))),s.push(r)}return s.join("")}(t),n)return a(c(n));if(n=i("filename","i").exec(t),n){n=n[1];let t=o(n);return t=c(t),a(t)}function i(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(t,{fatal:!0}),s=(0,r.stringToBytes)(n);n=i.decode(s),e=!1}catch(t){}}return n}function a(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function o(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,n,r){if("q"===n||"Q"===n)return s(e,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{r=atob(r)}catch(t){}return s(e,r)}))}return""};var r=n(1)},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=n(1),i=n(33);class s{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const r={begin:t,end:e};for(const t in n)r[t]=n[t];return this.request(r)}requestFull(t){return this.request(t)}request(t){const e=this.getXhr(),n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const n=this.httpHeaders[t];void 0!==n&&e.setRequestHeader(t,n)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=206):r.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===i.status&&this.isHttp)return void n.onError?.(i.status);const s=i.status||200;if((200!==s||206!==n.expectedStatus)&&s!==n.expectedStatus)return void n.onError?.(i.status);const a=function(t){const e=t.response;return"string"!=typeof e?e:(0,r.stringToBytes)(e).buffer}(i);if(206===s){const t=i.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);n.onDone({begin:parseInt(e[1],10),chunk:a})}else a?n.onDone({begin:0,chunk:a}):n.onError?.(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}e.PDFNetworkStream=class{constructor(t){this._source=t,this._manager=new s(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new o(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class a{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=t=>e.getResponseHeader(t),{allowRangeRequests:r,suggestedLength:s}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class o{constructor(t,e,n){this._manager=t;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=n(1),i=n(33);function s(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function a(t){const e=new Headers;for(const n in t){const r=t[n];void 0!==r&&e.append(n,r)}return e}e.PDFFetchStream=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new o(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new l(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class o{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=a(this._stream.httpHeaders);const n=e.url;fetch(n,s(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,n);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:s,suggestedLength:a}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController.abort()}}class l{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const o=t.source;this._withCredentials=o.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const l=o.url;fetch(l,s(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,l);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return a.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return n.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return h.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(4),r=__w_pdfjs_require__(8),i=__w_pdfjs_require__(22),s=__w_pdfjs_require__(7),a=__w_pdfjs_require__(27),o=__w_pdfjs_require__(15),l=__w_pdfjs_require__(3),c=__w_pdfjs_require__(30),u=__w_pdfjs_require__(31),h=__w_pdfjs_require__(29);if(l.isNodeJS){const{PDFNodeStream:t}=__w_pdfjs_require__(32);(0,n.setPDFNetworkStreamFactory)((e=>new t(e)))}else{const{PDFNetworkStream:t}=__w_pdfjs_require__(35),{PDFFetchStream:e}=__w_pdfjs_require__(36);(0,n.setPDFNetworkStreamFactory)((n=>(0,r.isValidFetchUrl)(n.url)?new e(n):new t(n)))}})(),__webpack_exports__})(),module.exports=factory()},963:(t,e,n)=>{var r;globalThis,r=()=>(()=>{"use strict";var t=[,(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultXfaLayerFactory=e.DefaultTextLayerFactory=e.DefaultStructTreeLayerFactory=e.DefaultAnnotationLayerFactory=e.DefaultAnnotationEditorLayerFactory=void 0;var r=n(2),i=n(5),s=n(4),a=n(6),o=n(8),l=n(9),c=n(10);e.DefaultAnnotationLayerFactory=class{createAnnotationLayerBuilder({pageDiv:t,pdfPage:e,annotationStorage:n=null,imageResourcesPath:r="",renderForms:o=!0,l10n:l=s.NullL10n,enableScripting:c=!1,hasJSActionsPromise:u=null,mouseState:h=null,fieldObjectsPromise:d=null,annotationCanvasMap:p=null,accessibilityManager:f=null}){return new i.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,imageResourcesPath:r,renderForms:o,linkService:new a.SimpleLinkService,l10n:l,annotationStorage:n,enableScripting:c,hasJSActionsPromise:u,fieldObjectsPromise:d,mouseState:h,annotationCanvasMap:p,accessibilityManager:f})}},e.DefaultAnnotationEditorLayerFactory=class{createAnnotationEditorLayerBuilder({uiManager:t=null,pageDiv:e,pdfPage:n,accessibilityManager:i=null,l10n:s,annotationStorage:a=null}){return new r.AnnotationEditorLayerBuilder({uiManager:t,pageDiv:e,pdfPage:n,accessibilityManager:i,l10n:s,annotationStorage:a})}},e.DefaultStructTreeLayerFactory=class{createStructTreeLayerBuilder({pdfPage:t}){return new o.StructTreeLayerBuilder({pdfPage:t})}},e.DefaultTextLayerFactory=class{createTextLayerBuilder({textLayerDiv:t,pageIndex:e,viewport:n,enhanceTextSelection:r=!1,eventBus:i,highlighter:s,accessibilityManager:a=null}){return new l.TextLayerBuilder({textLayerDiv:t,pageIndex:e,viewport:n,enhanceTextSelection:r,eventBus:i,highlighter:s,accessibilityManager:a})}},e.DefaultXfaLayerFactory=class{createXfaLayerBuilder({pageDiv:t,pdfPage:e,annotationStorage:n=null}){return new c.XfaLayerBuilder({pageDiv:t,pdfPage:e,annotationStorage:n,linkService:new a.SimpleLinkService})}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayerBuilder=void 0;var r=n(3),i=n(4);e.AnnotationEditorLayerBuilder=class{#pt;constructor(t){this.pageDiv=t.pageDiv,this.pdfPage=t.pdfPage,this.annotationStorage=t.annotationStorage||null,this.accessibilityManager=t.accessibilityManager,this.l10n=t.l10n||i.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#pt=t.uiManager}async render(t,e="display"){if("display"!==e)return;if(this._cancelled)return;const n=t.clone({dontFlip:!0});if(this.div)return this.annotationEditorLayer.update({viewport:n}),void this.show();this.div=document.createElement("div"),this.div.className="annotationEditorLayer",this.div.tabIndex=0,this.pageDiv.append(this.div),this.annotationEditorLayer=new r.AnnotationEditorLayer({uiManager:this.#pt,div:this.div,annotationStorage:this.annotationStorage,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage._pageIndex,l10n:this.l10n,viewport:n});const i={viewport:n,div:this.div,annotations:null,intent:e};this.annotationEditorLayer.render(i)}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},t=>{let e;e="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:n(299),t.exports=e},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.fixupLangCode=function(t){return i[t?.toLowerCase()]||t},e.getL10nFallback=r;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading…",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text…",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function r(t,e){switch(t){case"find_match_count":t=`find_match_count[${1===e.total?"one":"other"}]`;break;case"find_match_count_limit":t=`find_match_count_limit[${1===e.limit?"one":"other"}]`}return n[t]||""}const i={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"},s={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(t,e=null,n=r(t,e))=>function(t,e){return e?t.replace(/\{\{\s*(\w+)\s*\}\}/g,((t,n)=>n in e?e[n]:"{{"+n+"}}")):t}(n,e),async translate(t){}};e.NullL10n=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayerBuilder=void 0;var r=n(3),i=n(4);e.AnnotationLayerBuilder=class{constructor({pageDiv:t,pdfPage:e,linkService:n,downloadManager:r,annotationStorage:s=null,imageResourcesPath:a="",renderForms:o=!0,l10n:l=i.NullL10n,enableScripting:c=!1,hasJSActionsPromise:u=null,fieldObjectsPromise:h=null,mouseState:d=null,annotationCanvasMap:p=null,accessibilityManager:f=null}){this.pageDiv=t,this.pdfPage=e,this.linkService=n,this.downloadManager=r,this.imageResourcesPath=a,this.renderForms=o,this.l10n=l,this.annotationStorage=s,this.enableScripting=c,this._hasJSActionsPromise=u,this._fieldObjectsPromise=h,this._mouseState=d,this._annotationCanvasMap=p,this._accessibilityManager=f,this.div=null,this._cancelled=!1}async render(t,e="display"){const[n,i=!1,s=null]=await Promise.all([this.pdfPage.getAnnotations({intent:e}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||0===n.length)return;const a={viewport:t.clone({dontFlip:!0}),div:this.div,annotations:n,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:i,fieldObjects:s,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager};this.div?r.AnnotationLayer.update(a):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),a.div=this.div,r.AnnotationLayer.render(a),this.l10n.translate(this.div))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleLinkService=e.PDFLinkService=e.LinkTarget=void 0;var r=n(7);const i={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function s(t,{url:e,target:n,rel:s,enabled:a=!0}={}){if(!e||"string"!=typeof e)throw new Error('A valid "url" parameter must provided.');const o=(0,r.removeNullCharacters)(e);a?t.href=t.title=o:(t.href="",t.title=`Disabled: ${o}`,t.onclick=()=>!1);let l="";switch(n){case i.NONE:break;case i.SELF:l="_self";break;case i.BLANK:l="_blank";break;case i.PARENT:l="_parent";break;case i.TOP:l="_top"}t.target=l,t.rel="string"==typeof s?s:"noopener noreferrer nofollow"}e.LinkTarget=i;class a{#fe=new Map;constructor({eventBus:t,externalLinkTarget:e=null,externalLinkRel:n=null,ignoreDestinationZoom:r=!1}={}){this.eventBus=t,this.externalLinkTarget=e,this.externalLinkRel=n,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=r,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(t,e=null){this.baseUrl=e,this.pdfDocument=t,this.#fe.clear()}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(t){this.pdfViewer.currentPageNumber=t}get rotation(){return this.pdfViewer.pagesRotation}set rotation(t){this.pdfViewer.pagesRotation=t}#ge(t,e=null,n){const r=n[0];let i;if("object"==typeof r&&null!==r){if(i=this._cachedPageNumber(r),!i)return void this.pdfDocument.getPageIndex(r).then((i=>{this.cachePageRef(i+1,r),this.#ge(t,e,n)})).catch((()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${r}" is not a valid page reference, for dest="${t}".`)}))}else{if(!Number.isInteger(r))return void console.error(`PDFLinkService.#goToDestinationHelper: "${r}" is not a valid destination reference, for dest="${t}".`);i=r+1}!i||i<1||i>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${i}" is not a valid page number, for dest="${t}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:e,explicitDest:n,pageNumber:i})),this.pdfViewer.scrollPageIntoView({pageNumber:i,destArray:n,ignoreDestinationZoom:this._ignoreDestinationZoom}))}async goToDestination(t){if(!this.pdfDocument)return;let e,n;"string"==typeof t?(e=t,n=await this.pdfDocument.getDestination(t)):(e=null,n=await t),Array.isArray(n)?this.#ge(t,e,n):console.error(`PDFLinkService.goToDestination: "${n}" is not a valid destination array, for dest="${t}".`)}goToPage(t){if(!this.pdfDocument)return;const e="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;Number.isInteger(e)&&e>0&&e<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(e)),this.pdfViewer.scrollPageIntoView({pageNumber:e})):console.error(`PDFLinkService.goToPage: "${t}" is not a valid page.`)}addLinkAttributes(t,e,n=!1){s(t,{url:e,target:n?i.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){const e=JSON.stringify(t);if(e.length>0)return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}getAnchorUrl(t){return(this.baseUrl||"")+t}setHash(t){if(!this.pdfDocument)return;let e,n;if(t.includes("=")){const i=(0,r.parseQueryString)(t);if(i.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:i.get("search").replace(/"/g,""),phraseSearch:"true"===i.get("phrase")}),i.has("page")&&(e=0|i.get("page")||1),i.has("zoom")){const t=i.get("zoom").split(","),e=t[0],r=parseFloat(e);e.includes("Fit")?"Fit"===e||"FitB"===e?n=[null,{name:e}]:"FitH"===e||"FitBH"===e||"FitV"===e||"FitBV"===e?n=[null,{name:e},t.length>1?0|t[1]:null]:"FitR"===e?5!==t.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):n=[null,{name:e},0|t[1],0|t[2],0|t[3],0|t[4]]:console.error(`PDFLinkService.setHash: "${e}" is not a valid zoom value.`):n=[null,{name:"XYZ"},t.length>1?0|t[1]:null,t.length>2?0|t[2]:null,r?r/100:e]}n?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:n,allowNegativeOffset:!0}):e&&(this.page=e),i.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:i.get("pagemode")}),i.has("nameddest")&&this.goToDestination(i.get("nameddest"))}else{n=unescape(t);try{n=JSON.parse(n),Array.isArray(n)||(n=n.toString())}catch(t){}if("string"==typeof n||a.#me(n))return void this.goToDestination(n);console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`)}}executeNamedAction(t){switch(t){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}cachePageRef(t,e){if(!e)return;const n=0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`;this.#fe.set(n,t)}_cachedPageNumber(t){if(!t)return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return this.#fe.get(e)||null}isPageVisible(t){return this.pdfViewer.isPageVisible(t)}isPageCached(t){return this.pdfViewer.isPageCached(t)}static#me(t){if(!Array.isArray(t))return!1;const e=t.length;if(e<2)return!1;const n=t[0];if(!("object"==typeof n&&Number.isInteger(n.num)&&Number.isInteger(n.gen)||Number.isInteger(n)&&n>=0))return!1;const r=t[1];if("object"!=typeof r||"string"!=typeof r.name)return!1;let i=!0;switch(r.name){case"XYZ":if(5!==e)return!1;break;case"Fit":case"FitB":return 2===e;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==e)return!1;break;case"FitR":if(6!==e)return!1;i=!1;break;default:return!1}for(let n=2;n<e;n++){const e=t[n];if(!("number"==typeof e||i&&null===e))return!1}return!0}}e.PDFLinkService=a,e.SimpleLinkService=class{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(t){}get rotation(){return 0}set rotation(t){}async goToDestination(t){}goToPage(t){}addLinkAttributes(t,e,n=!1){s(t,{url:e,enabled:this.externalLinkEnabled})}getDestinationHash(t){return"#"}getAnchorUrl(t){return"#"}setHash(t){}executeNamedAction(t){}cachePageRef(t,e){}isPageVisible(t){return!0}isPageCached(t){return!0}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationStarted=e.VERTICAL_PADDING=e.UNKNOWN_SCALE=e.TextLayerMode=e.SpreadMode=e.SidebarView=e.ScrollMode=e.SCROLLBAR_PADDING=e.RenderingStates=e.RendererType=e.ProgressBar=e.PresentationModeState=e.OutputScale=e.MIN_SCALE=e.MAX_SCALE=e.MAX_AUTO_SCALE=e.DEFAULT_SCALE_VALUE=e.DEFAULT_SCALE_DELTA=e.DEFAULT_SCALE=e.AutoPrintRegExp=void 0,e.apiPageLayoutToViewerModes=function(t){let e=r.VERTICAL,n=i.NONE;switch(t){case"SinglePage":e=r.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=r.PAGE;case"TwoColumnLeft":n=i.ODD;break;case"TwoPageRight":e=r.PAGE;case"TwoColumnRight":n=i.EVEN}return{scrollMode:e,spreadMode:n}},e.apiPageModeToSidebarView=function(t){switch(t){case"UseNone":return n.NONE;case"UseThumbs":return n.THUMBS;case"UseOutlines":return n.OUTLINE;case"UseAttachments":return n.ATTACHMENTS;case"UseOC":return n.LAYERS}return n.NONE},e.approximateFraction=function(t){if(Math.floor(t)===t)return[t,1];const e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const n=t>1?e:t;let r,i=0,s=1,a=1,o=1;for(;;){const t=i+a,e=s+o;if(e>8)break;n<=t/e?(a=t,o=e):(i=t,s=e)}return r=n-i/s<a/o-n?n===t?[i,s]:[s,i]:n===t?[a,o]:[o,a],r},e.backtrackBeforeAllVisibleElements=l,e.binarySearchFirstItem=o,e.docStyle=void 0,e.getActiveOrFocusedElement=function(){let t=document,e=t.activeElement||t.querySelector(":focus");for(;e?.shadowRoot;)t=e.shadowRoot,e=t.activeElement||t.querySelector(":focus");return e},e.getPageSizeInches=function({view:t,userUnit:e,rotate:n}){const[r,i,s,a]=t,o=n%180!=0,l=(s-r)/72*e,c=(a-i)/72*e;return{width:o?c:l,height:o?l:c}},e.getVisibleElements=function({scrollEl:t,views:e,sortByVisibility:n=!1,horizontal:r=!1,rtl:i=!1}){const s=t.scrollTop,a=s+t.clientHeight,c=t.scrollLeft,u=c+t.clientWidth,h=[],d=new Set,p=e.length;let f=o(e,r?function(t){const e=t.div,n=e.offsetLeft+e.clientLeft,r=n+e.clientWidth;return i?n<u:r>c}:function(t){const e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>s});f>0&&f<p&&!r&&(f=l(f,e,s));let g=r?u:-1;for(let t=f;t<p;t++){const n=e[t],i=n.div,o=i.offsetLeft+i.clientLeft,l=i.offsetTop+i.clientTop,p=i.clientWidth,f=i.clientHeight,m=o+p,y=l+f;if(-1===g)y>=a&&(g=y);else if((r?o:l)>g)break;if(y<=s||l>=a||m<=c||o>=u)continue;const v=Math.max(0,s-l)+Math.max(0,y-a),b=Math.max(0,c-o)+Math.max(0,m-u),_=(p-b)/p,A=(f-v)/f*_*100|0;h.push({id:n.id,x:o,y:l,view:n,percent:A,widthPercent:100*_|0}),d.add(n.id)}const m=h[0],y=h.at(-1);return n&&h.sort((function(t,e){const n=t.percent-e.percent;return Math.abs(n)>.001?-n:t.id-e.id})),{first:m,last:y,views:h,ids:d}},e.isPortraitOrientation=function(t){return t.width<=t.height},e.isValidRotation=function(t){return Number.isInteger(t)&&t%90==0},e.isValidScrollMode=function(t){return Number.isInteger(t)&&Object.values(r).includes(t)&&t!==r.UNKNOWN},e.isValidSpreadMode=function(t){return Number.isInteger(t)&&Object.values(i).includes(t)&&t!==i.UNKNOWN},e.noContextMenuHandler=function(t){t.preventDefault()},e.normalizeWheelEventDelta=function(t){let e=c(t);return 0===t.deltaMode?e/=900:1===t.deltaMode&&(e/=30),e},e.normalizeWheelEventDirection=c,e.parseQueryString=function(t){const e=new Map;for(const[n,r]of new URLSearchParams(t))e.set(n.toLowerCase(),r);return e},e.removeNullCharacters=function(t,e=!1){return"string"!=typeof t?(console.error("The argument must be a string."),t):(e&&(t=t.replace(a," ")),t.replace(s,""))},e.roundToDivide=function(t,e){const n=t%e;return 0===n?t:Math.round(t-n+e)},e.scrollIntoView=function(t,e,n=!1){let r=t.offsetParent;if(!r)return void console.error("offsetParent is not set -- cannot scroll");let i=t.offsetTop+t.clientTop,s=t.offsetLeft+t.clientLeft;for(;r.clientHeight===r.scrollHeight&&r.clientWidth===r.scrollWidth||n&&(r.classList.contains("markedContent")||"hidden"===getComputedStyle(r).overflow);)if(i+=r.offsetTop,s+=r.offsetLeft,r=r.offsetParent,!r)return;e&&(void 0!==e.top&&(i+=e.top),void 0!==e.left&&(s+=e.left,r.scrollLeft=s)),r.scrollTop=i},e.watchScroll=function(t,e){const n=function(n){i||(i=window.requestAnimationFrame((function(){i=null;const n=t.scrollLeft,s=r.lastX;n!==s&&(r.right=n>s),r.lastX=n;const a=t.scrollTop,o=r.lastY;a!==o&&(r.down=a>o),r.lastY=a,e(r)})))},r={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:n};let i=null;return t.addEventListener("scroll",n,!0),r},e.DEFAULT_SCALE_VALUE="auto",e.DEFAULT_SCALE=1,e.DEFAULT_SCALE_DELTA=1.1,e.MIN_SCALE=.1,e.MAX_SCALE=10,e.UNKNOWN_SCALE=0,e.MAX_AUTO_SCALE=1.25,e.SCROLLBAR_PADDING=40,e.VERTICAL_PADDING=5,e.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},e.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const n={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};e.SidebarView=n,e.RendererType={CANVAS:"canvas",SVG:"svg"},e.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const r={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};e.ScrollMode=r;const i={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};e.SpreadMode=i,e.AutoPrintRegExp=/\bprint\s*\(/,e.OutputScale=class{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}};const s=/\x00/g,a=/[\x01-\x1F]/g;function o(t,e,n=0){let r=n,i=t.length-1;if(i<0||!e(t[i]))return t.length;if(e(t[r]))return r;for(;r<i;){const n=r+i>>1;e(t[n])?i=n:r=n+1}return r}function l(t,e,n){if(t<2)return t;let r=e[t].div,i=r.offsetTop+r.clientTop;i>=n&&(r=e[t-1].div,i=r.offsetTop+r.clientTop);for(let n=t-2;n>=0&&(r=e[n].div,!(r.offsetTop+r.clientTop+r.clientHeight<=i));--n)t=n;return t}function c(t){let e=Math.hypot(t.deltaX,t.deltaY);const n=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<n&&n<.75*Math.PI&&(e=-e),e}const u=new Promise((function(t){window.requestAnimationFrame(t)}));e.animationStarted=u;const h=document.documentElement.style;e.docStyle=h,e.ProgressBar=class{#ye=null;#ve=0;#tt=!0;constructor(t){if(arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const e=document.getElementById(t);this.#ye=e.classList}get percent(){return this.#ve}set percent(t){var e,n,r;this.#ve=(e=t,n=0,r=100,Math.min(Math.max(e,n),r)),isNaN(t)?this.#ye.add("indeterminate"):(this.#ye.remove("indeterminate"),h.setProperty("--progressBar-percent",`${this.#ve}%`))}setWidth(t){if(!t)return;const e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&h.setProperty("--progressBar-end-offset",`${e}px`)}hide(){this.#tt&&(this.#tt=!1,this.#ye.add("hidden"))}show(){this.#tt||(this.#tt=!0,this.#ye.remove("hidden"))}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StructTreeLayerBuilder=void 0;const n={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},r=/^H(\d+)$/;e.StructTreeLayerBuilder=class{constructor({pdfPage:t}){this.pdfPage=t}render(t){return this._walk(t)}_setAttributes(t,e){void 0!==t.alt&&e.setAttribute("aria-label",t.alt),void 0!==t.id&&e.setAttribute("aria-owns",t.id),void 0!==t.lang&&e.setAttribute("lang",t.lang)}_walk(t){if(!t)return null;const e=document.createElement("span");if("role"in t){const{role:i}=t,s=i.match(r);s?(e.setAttribute("role","heading"),e.setAttribute("aria-level",s[1])):n[i]&&e.setAttribute("role",n[i])}if(this._setAttributes(t,e),t.children)if(1===t.children.length&&"id"in t.children[0])this._setAttributes(t.children[0],e);else for(const n of t.children)e.append(this._walk(n));return e}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerBuilder=void 0;var r=n(3);e.TextLayerBuilder=class{constructor({textLayerDiv:t,eventBus:e,pageIndex:n,viewport:r,highlighter:i=null,enhanceTextSelection:s=!1,accessibilityManager:a=null}){this.textLayerDiv=t,this.eventBus=e,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=n+1,this.viewport=r,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=i,this.enhanceTextSelection=s,this.accessibilityManager=a,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.append(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(t=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs);const e=document.createDocumentFragment();this.textLayerRenderTask=(0,r.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:e,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((()=>{this.textLayerDiv.append(e),this._finishRendering(),this.highlighter?.enable(),this.accessibilityManager?.enable()}),(function(t){}))}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable()}setTextContentStream(t){this.cancel(),this.textContentStream=t}setTextContent(t){this.cancel(),this.textContent=t}_bindMouse(){const t=this.textLayerDiv;let e=null;t.addEventListener("mousedown",(n=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(e&&(clearTimeout(e),e=null));const r=t.querySelector(".endOfContent");if(!r)return;let i=n.target!==t;if(i=i&&"none"!==window.getComputedStyle(r).getPropertyValue("-moz-user-select"),i){const e=t.getBoundingClientRect(),i=Math.max(0,(n.pageY-e.top)/e.height);r.style.top=(100*i).toFixed(2)+"%"}r.classList.add("active")})),t.addEventListener("mouseup",(()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(e=setTimeout((()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),e=null}),300));const n=t.querySelector(".endOfContent");n&&(n.style.top="",n.classList.remove("active"))}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayerBuilder=void 0;var r=n(3);e.XfaLayerBuilder=class{constructor({pageDiv:t,pdfPage:e,annotationStorage:n=null,linkService:r,xfaHtml:i=null}){this.pageDiv=t,this.pdfPage=e,this.annotationStorage=n,this.linkService=r,this.xfaHtml=i,this.div=null,this._cancelled=!1}render(t,e="display"){if("print"===e){const n={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e},i=document.createElement("div");this.pageDiv.append(i),n.div=i;const s=r.XfaLayer.render(n);return Promise.resolve(s)}return this.pdfPage.getXfa().then((n=>{if(this._cancelled||!n)return{textDivs:[]};const i={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:n,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div?r.XfaLayer.update(i):(this.div=document.createElement("div"),this.pageDiv.append(this.div),i.div=this.div,r.XfaLayer.render(i))})).catch((t=>{console.error(t)}))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFViewer=e.PDFSinglePageViewer=void 0;var r=n(7),i=n(12);class s extends i.BaseViewer{}e.PDFViewer=s;class a extends i.BaseViewer{_resetView(){super._resetView(),this._scrollMode=r.ScrollMode.PAGE,this._spreadMode=r.SpreadMode.NONE}set scrollMode(t){}_updateScrollMode(){}set spreadMode(t){}_updateSpreadMode(){}}e.PDFSinglePageViewer=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PagesCountLimit=e.PDFPageViewBuffer=e.BaseViewer=void 0;var r=n(3),i=n(7),s=n(2),a=n(5),o=n(4),l=n(13),c=n(16),u=n(6),h=n(8),d=n(17),p=n(9),f=n(10);const g="enablePermissions",m={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function y(t){return Object.values(r.AnnotationEditorType).includes(t)&&t!==r.AnnotationEditorType.DISABLE}e.PagesCountLimit=m;class v{#be=new Set;#_e=0;constructor(t){this.#_e=t}push(t){const e=this.#be;e.has(t)&&e.delete(t),e.add(t),e.size>this.#_e&&this.#Ae()}resize(t,e=null){this.#_e=t;const n=this.#be;if(e){const t=n.size;let r=1;for(const i of n)if(e.has(i.id)&&(n.delete(i),n.add(i)),++r>t)break}for(;n.size>this.#_e;)this.#Ae()}has(t){return this.#be.has(t)}[Symbol.iterator](){return this.#be.keys()}#Ae(){const t=this.#be.keys().next().value;t?.destroy(),this.#be.delete(t)}}e.PDFPageViewBuffer=v;class b{#Se=null;#we=r.AnnotationEditorType.DISABLE;#xe=null;#Pe=r.AnnotationMode.ENABLE_FORMS;#Ee=!1;#Ce=0;#Te=null;#Me=null;constructor(t){if(this.constructor===b)throw new Error("Cannot initialize BaseViewer.");const e="2.16.105";if(r.version!==e)throw new Error(`The API version "${r.version}" does not match the Viewer version "2.16.105".`);if(this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=t.eventBus,this.linkService=t.linkService||new u.SimpleLinkService,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this._scriptingManager=t.scriptingManager||null,this.removePageBorders=t.removePageBorders||!1,this.textLayerMode=t.textLayerMode??i.TextLayerMode.ENABLE,this.#Pe=t.annotationMode??r.AnnotationMode.ENABLE_FORMS,this.#we=t.annotationEditorMode??r.AnnotationEditorType.DISABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.renderer=t.renderer||i.RendererType.CANVAS,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n||o.NullL10n,this.#Ee=t.enablePermissions||!1,this.pageColors=t.pageColors||null,!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new c.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this.scroll=(0,i.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=i.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every((function(t){return t?.pdfPage}))}get renderForms(){return this.#Pe===r.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error(`currentPageNumber: "${t}" is not a valid page.`))}_setCurrentPageNumber(t,e=!1){if(this._currentPageNumber===t)return e&&this.#ke(),!0;if(!(0<t&&t<=this.pagesCount))return!1;const n=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:this._pageLabels?.[t-1]??null,previous:n}),e&&this.#ke(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(t){if(!this.pdfDocument)return;let e=0|t;if(this._pageLabels){const n=this._pageLabels.indexOf(t);n>=0&&(e=n+1)}this._setCurrentPageNumber(e,!0)||console.error(`currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return this._currentScale!==i.UNKNOWN_SCALE?this._currentScale:i.DEFAULT_SCALE}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(t,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){this.pdfDocument&&this._setScale(t,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!(0,i.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if((t%=360)<0&&(t+=360),this._pagesRotation===t)return;this._pagesRotation=t;const e=this._currentPageNumber,n={rotation:t};for(const t of this._pages)t.update(n);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#Re(t){const e={annotationEditorMode:this.#we,annotationMode:this.#Pe,textLayerMode:this.textLayerMode};return t?(t.includes(r.PermissionFlag.COPY)||this.viewer.classList.add(g),t.includes(r.PermissionFlag.MODIFY_CONTENTS)||(e.annotationEditorMode=r.AnnotationEditorType.DISABLE),t.includes(r.PermissionFlag.MODIFY_ANNOTATIONS)||t.includes(r.PermissionFlag.FILL_INTERACTIVE_FORMS)||this.#Pe!==r.AnnotationMode.ENABLE_FORMS||(e.annotationMode=r.AnnotationMode.ENABLE),e):e}#Oe(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const t=new Promise((t=>{this.#Me=()=>{"hidden"===document.visibilityState&&(t(),document.removeEventListener("visibilitychange",this.#Me),this.#Me=null)},document.addEventListener("visibilitychange",this.#Me)}));return Promise.race([this._onePageRenderedCapability.promise,t])}setDocument(t){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),this.#xe&&(this.#xe.destroy(),this.#xe=null)),this.pdfDocument=t,!t)return;const e=t.isPureXfa,n=t.numPages,s=t.getPage(1),a=t.getOptionalContentConfig(),o=this.#Ee?t.getPermissions():Promise.resolve();if(n>m.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const t=this._scrollMode=i.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t})}this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:n})}),(()=>{})),this._onBeforeDraw=t=>{const e=this._pages[t.pageNumber-1];e&&this.#Se.push(e)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=t=>{t.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:t.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#Me&&(document.removeEventListener("visibilitychange",this.#Me),this.#Me=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([s,o]).then((([s,o])=>{if(t!==this.pdfDocument)return;this._firstPageCapability.resolve(s),this._optionalContentConfigPromise=a;const{annotationEditorMode:c,annotationMode:u,textLayerMode:h}=this.#Re(o);if(c!==r.AnnotationEditorType.DISABLE){const t=c;e?console.warn("Warning: XFA-editing is not implemented."):y(t)?(this.#xe=new r.AnnotationEditorUIManager(this.container,this.eventBus),t!==r.AnnotationEditorType.NONE&&this.#xe.updateMode(t)):console.error(`Invalid AnnotationEditor mode: ${t}`)}const d=this._scrollMode===i.ScrollMode.PAGE?null:this.viewer,p=this.currentScale,f=s.getViewport({scale:p*r.PixelsPerInch.PDF_TO_CSS_UNITS}),g=h===i.TextLayerMode.DISABLE||e?null:this,v=u!==r.AnnotationMode.DISABLE?this:null,b=e?this:null,_=this.#xe?this:null;for(let t=1;t<=n;++t){const e=new l.PDFPageView({container:d,eventBus:this.eventBus,id:t,scale:p,defaultViewport:f.clone(),optionalContentConfigPromise:a,renderingQueue:this.renderingQueue,textLayerFactory:g,textLayerMode:h,annotationLayerFactory:v,annotationMode:u,xfaLayerFactory:b,annotationEditorLayerFactory:_,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(e)}const A=this._pages[0];A&&(A.setPdfPage(s),this.linkService.cachePageRef(1,s.ref)),this._scrollMode===i.ScrollMode.PAGE?this.#Le():this._spreadMode!==i.SpreadMode.NONE&&this._updateSpreadMode(),this.#Oe().then((async()=>{if(this.findController&&this.findController.setDocument(t),this._scriptingManager&&this._scriptingManager.setDocument(t),this.#xe&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:this.#we}),t.loadingParams.disableAutoFetch||n>m.FORCE_LAZY_PAGE_INIT)return void this._pagesCapability.resolve();let e=n-1;if(e<=0)this._pagesCapability.resolve();else for(let r=2;r<=n;++r){const n=t.getPage(r).then((t=>{const n=this._pages[r-1];n.pdfPage||n.setPdfPage(t),this.linkService.cachePageRef(r,t.ref),0==--e&&this._pagesCapability.resolve()}),(t=>{console.error(`Unable to get page ${r} to initialize viewer`,t),0==--e&&this._pagesCapability.resolve()}));r%m.PAUSE_EAGER_PAGE_INIT==0&&await n}})),this.eventBus.dispatch("pagesinit",{source:this}),t.getMetadata().then((({info:e})=>{t===this.pdfDocument&&e.Language&&(this.viewer.lang=e.Language)})),this.defaultRenderingQueue&&this.update()})).catch((t=>{console.error("Unable to initialize viewer",t),this._pagesCapability.reject(t)}))}setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,e=this._pages.length;t<e;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=i.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#Se=new v(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,r.createPromiseCapability)(),this._onePageRenderedCapability=(0,r.createPromiseCapability)(),this._pagesCapability=(0,r.createPromiseCapability)(),this._scrollMode=i.ScrollMode.VERTICAL,this._previousScrollMode=i.ScrollMode.UNKNOWN,this._spreadMode=i.SpreadMode.NONE,this.#Te={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#Me&&(document.removeEventListener("visibilitychange",this.#Me),this.#Me=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(g)}#Le(){if(this._scrollMode!==i.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const t=this._currentPageNumber,e=this.#Te,n=this.viewer;if(n.textContent="",e.pages.length=0,this._spreadMode!==i.SpreadMode.NONE||this.isInPresentationMode){const r=new Set,i=this._spreadMode-1;-1===i?r.add(t-1):t%2!==i?(r.add(t-1),r.add(t)):(r.add(t-2),r.add(t-1));const s=document.createElement("div");if(s.className="spread",this.isInPresentationMode){const t=document.createElement("div");t.className="dummyPage",s.append(t)}for(const t of r){const n=this._pages[t];n&&(s.append(n.div),e.pages.push(n))}n.append(s)}else{const r=this._pages[t-1];n.append(r.div),e.pages.push(r)}e.scrollDown=t>=e.previousPageNumber,e.previousPageNumber=t}_scrollUpdate(){0!==this.pagesCount&&this.update()}#De(t,e=null){const{div:n,id:r}=t;if(this._scrollMode===i.ScrollMode.PAGE&&(this._setCurrentPageNumber(r),this.#Le(),this.update()),!e&&!this.isInPresentationMode){const t=n.offsetLeft+n.clientLeft,r=t+n.clientWidth,{scrollLeft:s,clientWidth:a}=this.container;(this._scrollMode===i.ScrollMode.HORIZONTAL||t<s||r>s+a)&&(e={left:0,top:0})}(0,i.scrollIntoView)(n,e)}#Ie(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}_setScaleUpdatePages(t,e,n=!1,s=!1){if(this._currentScaleValue=e.toString(),this.#Ie(t))return void(s&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e}));i.docStyle.setProperty("--scale-factor",t*r.PixelsPerInch.PDF_TO_CSS_UNITS);const a={scale:t};for(const t of this._pages)t.update(a);if(this._currentScale=t,!n){let t,e=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(e=this._location.pageNumber,t=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:e,destArray:t,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:s?e:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==i.SpreadMode.NONE&&this._scrollMode!==i.ScrollMode.HORIZONTAL?2:1}_setScale(t,e=!1){let n=parseFloat(t);if(n>0)this._setScaleUpdatePages(n,t,e,!1);else{const r=this._pages[this._currentPageNumber-1];if(!r)return;let s=i.SCROLLBAR_PADDING,a=i.VERTICAL_PADDING;this.isInPresentationMode?s=a=4:this.removePageBorders?s=a=0:this._scrollMode===i.ScrollMode.HORIZONTAL&&([s,a]=[a,s]);const o=(this.container.clientWidth-s)/r.width*r.scale/this._pageWidthScaleFactor,l=(this.container.clientHeight-a)/r.height*r.scale;switch(t){case"page-actual":n=1;break;case"page-width":n=o;break;case"page-height":n=l;break;case"page-fit":n=Math.min(o,l);break;case"auto":const e=(0,i.isPortraitOrientation)(r)?o:Math.min(l,o);n=Math.min(i.MAX_AUTO_SCALE,e);break;default:return void console.error(`_setScale: "${t}" is an unknown zoom value.`)}this._setScaleUpdatePages(n,t,e,!0)}}#ke(){const t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),this.#De(t)}pageLabelToPageNumber(t){if(!this._pageLabels)return null;const e=this._pageLabels.indexOf(t);return e<0?null:e+1}scrollPageIntoView({pageNumber:t,destArray:e=null,allowNegativeOffset:n=!1,ignoreDestinationZoom:s=!1}){if(!this.pdfDocument)return;const a=Number.isInteger(t)&&this._pages[t-1];if(!a)return void console.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!e)return void this._setCurrentPageNumber(t,!0);let o,l,c=0,u=0,h=0,d=0;const p=a.rotation%180!=0,f=(p?a.height:a.width)/a.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS,g=(p?a.width:a.height)/a.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS;let m=0;switch(e[1].name){case"XYZ":c=e[2],u=e[3],m=e[4],c=null!==c?c:0,u=null!==u?u:g;break;case"Fit":case"FitB":m="page-fit";break;case"FitH":case"FitBH":u=e[2],m="page-width",null===u&&this._location?(c=this._location.left,u=this._location.top):("number"!=typeof u||u<0)&&(u=g);break;case"FitV":case"FitBV":c=e[2],h=f,d=g,m="page-height";break;case"FitR":c=e[2],u=e[3],h=e[4]-c,d=e[5]-u;const t=this.removePageBorders?0:i.SCROLLBAR_PADDING,n=this.removePageBorders?0:i.VERTICAL_PADDING;o=(this.container.clientWidth-t)/h/r.PixelsPerInch.PDF_TO_CSS_UNITS,l=(this.container.clientHeight-n)/d/r.PixelsPerInch.PDF_TO_CSS_UNITS,m=Math.min(Math.abs(o),Math.abs(l));break;default:return void console.error(`scrollPageIntoView: "${e[1].name}" is not a valid destination type.`)}if(s||(m&&m!==this._currentScale?this.currentScaleValue=m:this._currentScale===i.UNKNOWN_SCALE&&(this.currentScaleValue=i.DEFAULT_SCALE_VALUE)),"page-fit"===m&&!e[4])return void this.#De(a);const y=[a.viewport.convertToViewportPoint(c,u),a.viewport.convertToViewportPoint(c+h,u+d)];let v=Math.min(y[0][0],y[1][0]),b=Math.min(y[0][1],y[1][1]);n||(v=Math.max(v,0),b=Math.max(b,0)),this.#De(a,{left:v,top:b})}_updateLocation(t){const e=this._currentScale,n=this._currentScaleValue,r=parseFloat(n)===e?Math.round(1e4*e)/100:n,i=t.id,s=this._pages[i-1],a=this.container,o=s.getPagePoint(a.scrollLeft-t.x,a.scrollTop-t.y),l=Math.round(o[0]),c=Math.round(o[1]);let u=`#page=${i}`;this.isInPresentationMode||(u+=`&zoom=${r},${l},${c}`),this._location={pageNumber:i,scale:r,top:c,left:l,rotation:this._pagesRotation,pdfOpenParams:u}}update(){const t=this._getVisiblePages(),e=t.views,n=e.length;if(0===n)return;const r=Math.max(10,2*n+1);this.#Se.resize(r,t.ids),this.renderingQueue.renderHighestPriority(t);const s=this._spreadMode===i.SpreadMode.NONE&&(this._scrollMode===i.ScrollMode.PAGE||this._scrollMode===i.ScrollMode.VERTICAL),a=this._currentPageNumber;let o=!1;for(const t of e){if(t.percent<100)break;if(t.id===a&&s){o=!0;break}}this._setCurrentPageNumber(o?a:e[0].id),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===i.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===i.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const t=this._scrollMode===i.ScrollMode.PAGE?this.#Te.pages:this._pages,e=this._scrollMode===i.ScrollMode.HORIZONTAL,n=e&&this._isContainerRtl;return(0,i.getVisibleElements)({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:e,rtl:n})}isPageVisible(t){return!!this.pdfDocument&&(Number.isInteger(t)&&t>0&&t<=this.pagesCount?this._getVisiblePages().ids.has(t):(console.error(`isPageVisible: "${t}" is not a valid page.`),!1))}isPageCached(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount))return console.error(`isPageCached: "${t}" is not a valid page.`),!1;const e=this._pages[t-1];return this.#Se.has(e)}cleanup(){for(const t of this._pages)t.renderingState!==i.RenderingStates.FINISHED&&t.reset()}_cancelRendering(){for(const t of this._pages)t.cancelRendering()}async#Fe(t){if(t.pdfPage)return t.pdfPage;try{const e=await this.pdfDocument.getPage(t.id);return t.pdfPage||t.setPdfPage(e),this.linkService._cachedPageNumber?.(e.ref)||this.linkService.cachePageRef(t.id,e.ref),e}catch(t){return console.error("Unable to get page for page view",t),null}}#Ne(t){if(1===t.first?.id)return!0;if(t.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case i.ScrollMode.PAGE:return this.#Te.scrollDown;case i.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}#je(t){for(const e of t)this._pages[e-1]?.toggleLoadingIconSpinner(!0);for(const e of this.#Se)t.has(e.id)||e.toggleLoadingIconSpinner(!1)}forceRendering(t){const e=t||this._getVisiblePages(),n=this.#Ne(e),r=this._spreadMode!==i.SpreadMode.NONE&&this._scrollMode!==i.ScrollMode.HORIZONTAL,s=this.renderingQueue.getHighestPriority(e,this._pages,n,r);return this.#je(e.ids),!!s&&(this.#Fe(s).then((()=>{this.renderingQueue.renderView(s)})),!0)}createTextLayerBuilder({textLayerDiv:t,pageIndex:e,viewport:n,enhanceTextSelection:r=!1,eventBus:i,highlighter:s,accessibilityManager:a=null}){return new p.TextLayerBuilder({textLayerDiv:t,eventBus:i,pageIndex:e,viewport:n,enhanceTextSelection:!this.isInPresentationMode&&r,highlighter:s,accessibilityManager:a})}createTextHighlighter({pageIndex:t,eventBus:e}){return new d.TextHighlighter({eventBus:e,pageIndex:t,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:t,pdfPage:e,annotationStorage:n=this.pdfDocument?.annotationStorage,imageResourcesPath:r="",renderForms:i=!0,l10n:s=o.NullL10n,enableScripting:l=this.enableScripting,hasJSActionsPromise:c=this.pdfDocument?.hasJSActions(),mouseState:u=this._scriptingManager?.mouseState,fieldObjectsPromise:h=this.pdfDocument?.getFieldObjects(),annotationCanvasMap:d=null,accessibilityManager:p=null}){return new a.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,annotationStorage:n,imageResourcesPath:r,renderForms:i,linkService:this.linkService,downloadManager:this.downloadManager,l10n:s,enableScripting:l,hasJSActionsPromise:c,mouseState:u,fieldObjectsPromise:h,annotationCanvasMap:d,accessibilityManager:p})}createAnnotationEditorLayerBuilder({uiManager:t=this.#xe,pageDiv:e,pdfPage:n,accessibilityManager:r=null,l10n:i,annotationStorage:a=this.pdfDocument?.annotationStorage}){return new s.AnnotationEditorLayerBuilder({uiManager:t,pageDiv:e,pdfPage:n,annotationStorage:a,accessibilityManager:r,l10n:i})}createXfaLayerBuilder({pageDiv:t,pdfPage:e,annotationStorage:n=this.pdfDocument?.annotationStorage}){return new f.XfaLayerBuilder({pageDiv:t,pdfPage:e,annotationStorage:n,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:t}){return new h.StructTreeLayerBuilder({pdfPage:t})}get hasEqualPageSizes(){const t=this._pages[0];for(let e=1,n=this._pages.length;e<n;++e){const n=this._pages[e];if(n.width!==t.width||n.height!==t.height)return!1}return!0}getPagesOverview(){return this._pages.map((t=>{const e=t.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,i.isPortraitOrientation)(e)?{width:e.width,height:e.height,rotation:e.rotation}:{width:e.height,height:e.width,rotation:(e.rotation-90)%360}}))}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(t){if(!(t instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${t}`);if(!this.pdfDocument)return;if(!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=t;const e={optionalContentConfigPromise:t};for(const t of this._pages)t.update(e);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t})}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!(0,i.isValidScrollMode)(t))throw new Error(`Invalid scroll mode: ${t}`);this.pagesCount>m.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(t=null){const e=this._scrollMode,n=this.viewer;n.classList.toggle("scrollHorizontal",e===i.ScrollMode.HORIZONTAL),n.classList.toggle("scrollWrapped",e===i.ScrollMode.WRAPPED),this.pdfDocument&&t&&(e===i.ScrollMode.PAGE?this.#Le():this._previousScrollMode===i.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!(0,i.isValidSpreadMode)(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;const e=this.viewer,n=this._pages;if(this._scrollMode===i.ScrollMode.PAGE)this.#Le();else if(e.textContent="",this._spreadMode===i.SpreadMode.NONE)for(const t of this._pages)e.append(t.div);else{const t=this._spreadMode-1;let r=null;for(let i=0,s=n.length;i<s;++i)null===r?(r=document.createElement("div"),r.className="spread",e.append(r)):i%2===t&&(r=r.cloneNode(!1),e.append(r)),r.append(n[i].div)}t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}_getPageAdvance(t,e=!1){switch(this._scrollMode){case i.ScrollMode.WRAPPED:{const{views:n}=this._getVisiblePages(),r=new Map;for(const{id:t,y:e,percent:i,widthPercent:s}of n){if(0===i||s<100)continue;let n=r.get(e);n||r.set(e,n||=[]),n.push(t)}for(const n of r.values()){const r=n.indexOf(t);if(-1===r)continue;const i=n.length;if(1===i)break;if(e)for(let e=r-1,i=0;e>=i;e--){const r=n[e],i=n[e+1]-1;if(r<i)return t-i}else for(let e=r+1,s=i;e<s;e++){const r=n[e],i=n[e-1]+1;if(r>i)return i-t}if(e){const e=n[0];if(e<t)return t-e+1}else{const e=n[i-1];if(e>t)return e-t+1}break}break}case i.ScrollMode.HORIZONTAL:break;case i.ScrollMode.PAGE:case i.ScrollMode.VERTICAL:{if(this._spreadMode===i.SpreadMode.NONE)break;const n=this._spreadMode-1;if(e&&t%2!==n)break;if(!e&&t%2===n)break;const{views:r}=this._getVisiblePages(),s=e?t-1:t+1;for(const{id:t,percent:e,widthPercent:n}of r)if(t===s){if(e>0&&100===n)return 2;break}break}}return 1}nextPage(){const t=this._currentPageNumber,e=this.pagesCount;if(t>=e)return!1;const n=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+n,e),!0}previousPage(){const t=this._currentPageNumber;if(t<=1)return!1;const e=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-e,1),!0}increaseScale(t=1){let e=this._currentScale;do{e=(e*i.DEFAULT_SCALE_DELTA).toFixed(2),e=Math.ceil(10*e)/10,e=Math.min(i.MAX_SCALE,e)}while(--t>0&&e<i.MAX_SCALE);this.currentScaleValue=e}decreaseScale(t=1){let e=this._currentScale;do{e=(e/i.DEFAULT_SCALE_DELTA).toFixed(2),e=Math.floor(10*e)/10,e=Math.max(i.MIN_SCALE,e)}while(--t>0&&e>i.MIN_SCALE);this.currentScaleValue=e}updateContainerHeightCss(){const t=this.container.clientHeight;t!==this.#Ce&&(this.#Ce=t,i.docStyle.setProperty("--viewer-container-height",`${t}px`))}get annotationEditorMode(){return this.#xe?this.#we:r.AnnotationEditorType.DISABLE}set annotationEditorMode(t){if(!this.#xe)throw new Error("The AnnotationEditor is not enabled.");if(this.#we!==t){if(!y(t))throw new Error(`Invalid AnnotationEditor mode: ${t}`);this.pdfDocument&&(this.#we=t,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:t}),this.#xe.updateMode(t))}}set annotationEditorParams({type:t,value:e}){if(!this.#xe)throw new Error("The AnnotationEditor is not enabled.");this.#xe.updateParams(t,e)}refresh(){if(!this.pdfDocument)return;const t={};for(const e of this._pages)e.update(t);this.update()}}e.BaseViewer=b},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFPageView=void 0;var r=n(3),i=n(7),s=n(14),a=n(4),o=n(15);const l=s.compatibilityParams.maxCanvasPixels||16777216;e.PDFPageView=class{#Pe=r.AnnotationMode.ENABLE_FORMS;#Be={initialOptionalContent:!0,regularAnnotations:!0};constructor(t){const e=t.container,n=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||i.DEFAULT_SCALE,this.viewport=n,this.pdfPageRotate=n.rotation,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=t.textLayerMode??i.TextLayerMode.ENABLE,this.#Pe=t.annotationMode??r.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=t.imageResourcesPath||"",this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels||l,this.pageColors=t.pageColors||null,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.textLayerFactory=t.textLayerFactory,this.annotationLayerFactory=t.annotationLayerFactory,this.annotationEditorLayerFactory=t.annotationEditorLayerFactory,this.xfaLayerFactory=t.xfaLayerFactory,this.textHighlighter=t.textHighlighterFactory?.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=t.structTreeLayerFactory,this.renderer=t.renderer||i.RendererType.CANVAS,this.l10n=t.l10n||a.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=i.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const s=document.createElement("div");if(s.className="page",s.style.width=Math.floor(this.viewport.width)+"px",s.style.height=Math.floor(this.viewport.height)+"px",s.setAttribute("data-page-number",this.id),s.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then((t=>{s.setAttribute("aria-label",t)})),this.div=s,e?.append(s),this._isStandalone){const{optionalContentConfigPromise:e}=t;e&&e.then((t=>{e===this._optionalContentConfigPromise&&(this.#Be.initialOptionalContent=t.hasInitialVisibility)}))}}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;const e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:e}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let t=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(e){console.error(`_renderAnnotationLayer: "${e}".`),t=e}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t})}}async _renderAnnotationEditorLayer(){let t=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(e){console.error(`_renderAnnotationEditorLayer: "${e}".`),t=e}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:t})}}async _renderXfaLayer(){let t=null;try{const e=await this.xfaLayer.render(this.viewport,"display");this.textHighlighter&&this._buildXfaTextContentItems(e.textDivs)}catch(e){console.error(`_renderXfaLayer: "${e}".`),t=e}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:t})}}async _buildXfaTextContentItems(t){const e=await this.pdfPage.getTextContent(),n=[];for(const t of e.items)n.push(t.str);this.textHighlighter.setTextMapping(t,n),this.textHighlighter.enable()}_resetZoomLayer(t=!1){if(!this.zoomLayer)return;const e=this.zoomLayer.firstChild;this.paintedViewportMap.delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:t=!1,keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:n=!1,keepXfaLayer:r=!1}={}){this.cancelRendering({keepAnnotationLayer:e,keepAnnotationEditorLayer:n,keepXfaLayer:r}),this.renderingState=i.RenderingStates.INITIAL;const s=this.div;s.style.width=Math.floor(this.viewport.width)+"px",s.style.height=Math.floor(this.viewport.height)+"px";const a=s.childNodes,o=t&&this.zoomLayer||null,l=e&&this.annotationLayer?.div||null,c=n&&this.annotationEditorLayer?.div||null,u=r&&this.xfaLayer?.div||null;for(let t=a.length-1;t>=0;t--){const e=a[t];switch(e){case o:case l:case c:case u:continue}e.remove()}s.removeAttribute("data-loaded"),l&&this.annotationLayer.hide(),c?this.annotationEditorLayer.hide():this.annotationEditorLayer?.destroy(),u&&this.xfaLayer.hide(),o||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then((t=>{this.loadingIconDiv?.setAttribute("aria-label",t)})),s.append(this.loadingIconDiv)}update({scale:t=0,rotation:e=null,optionalContentConfigPromise:n=null}){this.scale=t||this.scale,"number"==typeof e&&(this.rotation=e),n instanceof Promise&&(this._optionalContentConfigPromise=n,n.then((t=>{n===this._optionalContentConfigPromise&&(this.#Be.initialOptionalContent=t.hasInitialVisibility)})));const s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:s}),this._isStandalone&&i.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let a=!1;if(this.canvas&&this.maxCanvasPixels>0){const t=this.outputScale;(Math.floor(this.viewport.width)*t.sx|0)*(Math.floor(this.viewport.height)*t.sy|0)>this.maxCanvasPixels&&(a=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&a)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:n=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!this.annotationLayer||t&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.annotationEditorLayer||e&&this.annotationEditorLayer.div||(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||n&&this.xfaLayer.div||(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:t,redrawAnnotationLayer:e=!1,redrawAnnotationEditorLayer:n=!1,redrawXfaLayer:r=!1}){const i=this.viewport.width,s=this.viewport.height,a=this.div;t.style.width=t.parentNode.style.width=a.style.width=Math.floor(i)+"px",t.style.height=t.parentNode.style.height=a.style.height=Math.floor(s)+"px";const o=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,l=Math.abs(o);let c=1,u=1;if(90!==l&&270!==l||(c=s/i,u=i/s),t.style.transform=`rotate(${o}deg) scale(${c}, ${u})`,this.textLayer){const t=this.textLayer.viewport,e=this.viewport.rotation-t.rotation,n=Math.abs(e);let r=i/t.width;90!==n&&270!==n||(r=i/t.height);const s=this.textLayer.textLayerDiv;let a,o;switch(n){case 0:a=o=0;break;case 90:a=0,o="-"+s.style.height;break;case 180:a="-"+s.style.width,o="-"+s.style.height;break;case 270:a="-"+s.style.width,o=0;break;default:console.error("Bad rotation value.")}s.style.transform=`rotate(${n}deg) scale(${r}) translate(${a}, ${o})`,s.style.transformOrigin="0% 0%"}e&&this.annotationLayer&&this._renderAnnotationLayer(),n&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),r&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(t,e){return this.viewport.convertToPdfPoint(t,e)}toggleLoadingIconSpinner(t=!1){this.loadingIconDiv?.classList.toggle("notVisible",!t)}draw(){this.renderingState!==i.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:t,pdfPage:e}=this;if(!e)return this.renderingState=i.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=i.RenderingStates.RUNNING;const n=document.createElement("div");n.style.width=t.style.width,n.style.height=t.style.height,n.classList.add("canvasWrapper");const s=this.annotationLayer?.div||this.annotationEditorLayer?.div;s?s.before(n):t.append(n);let a=null;if(this.textLayerMode!==i.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||=new o.TextAccessibilityManager;const e=document.createElement("div");e.className="textLayer",e.style.width=n.style.width,e.style.height=n.style.height,s?s.before(e):t.append(e),a=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:e,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===i.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=a,this.#Pe!==r.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:t,pdfPage:e,imageResourcesPath:this.imageResourcesPath,renderForms:this.#Pe===r.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})),this.xfaLayer?.div&&t.append(this.xfaLayer.div);let l=null;this.renderingQueue&&(l=t=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=i.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=i.RenderingStates.RUNNING,t()});t()});const c=async(t=null)=>{if(u===this.paintTask&&(this.paintTask=null),t instanceof r.RenderingCancelledException)this._renderError=null;else if(this._renderError=t,this.renderingState=i.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),this._resetZoomLayer(!0),this.#Be.regularAnnotations=!u.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),t)throw t},u=this.renderer===i.RendererType.SVG?this.paintOnSvg(n):this.paintOnCanvas(n);u.onRenderContinue=l,this.paintTask=u;const h=u.promise.then((()=>c(null).then((()=>{if(a){const t=e.streamTextContent({includeMarkedContent:!0});a.setTextContentStream(t),a.render()}this.annotationLayer&&this._renderAnnotationLayer().then((()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:t,pdfPage:e,l10n:this.l10n,accessibilityManager:this._accessibilityManager}),this._renderAnnotationEditorLayer())}))}))),(function(t){return c(t)}));return this.xfaLayerFactory&&(this.xfaLayer||=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:t,pdfPage:e}),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=t=>{t.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then((t=>{if(!t)return;if(!this.canvas)return;const e=this.structTreeLayer.render(t);e.classList.add("structTree"),this.canvas.append(e)})))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:e})),t.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),h}paintOnCanvas(t){const e=(0,r.createPromiseCapability)(),n={promise:e.promise,onRenderContinue(t){t()},cancel(){f.cancel()},get separateAnnots(){return f.separateAnnots}},s=this.viewport,a=document.createElement("canvas");a.setAttribute("role","presentation"),a.hidden=!0;let o=!0;const l=function(){o&&(a.hidden=!1,o=!1)};t.append(a),this.canvas=a;const c=a.getContext("2d",{alpha:!1}),u=this.outputScale=new i.OutputScale;if(this.useOnlyCssZoom){const t=s.clone({scale:r.PixelsPerInch.PDF_TO_CSS_UNITS});u.sx*=t.width/s.width,u.sy*=t.height/s.height}if(this.maxCanvasPixels>0){const t=s.width*s.height,e=Math.sqrt(this.maxCanvasPixels/t);u.sx>e||u.sy>e?(u.sx=e,u.sy=e,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const h=(0,i.approximateFraction)(u.sx),d=(0,i.approximateFraction)(u.sy);a.width=(0,i.roundToDivide)(s.width*u.sx,h[0]),a.height=(0,i.roundToDivide)(s.height*u.sy,d[0]),a.style.width=(0,i.roundToDivide)(s.width,h[1])+"px",a.style.height=(0,i.roundToDivide)(s.height,d[1])+"px",this.paintedViewportMap.set(a,s);const p={canvasContext:c,transform:u.scaled?[u.sx,0,0,u.sy,0,0]:null,viewport:this.viewport,annotationMode:this.#Pe,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},f=this.pdfPage.render(p);return f.onContinue=function(t){l(),n.onRenderContinue?n.onRenderContinue(t):t()},f.promise.then((function(){l(),e.resolve()}),(function(t){l(),e.reject(t)})),n}paintOnSvg(t){let e=!1;const n=()=>{if(e)throw new r.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},s=this.pdfPage,a=this.viewport.clone({scale:r.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:s.getOperatorList({annotationMode:this.#Pe}).then((e=>(n(),new r.SVGGraphics(s.commonObjs,s.objs).getSVG(e,a).then((e=>{n(),this.svg=e,this.paintedViewportMap.set(e,a),e.style.width=t.style.width,e.style.height=t.style.height,this.renderingState=i.RenderingStates.FINISHED,t.append(e)}))))),onRenderContinue(t){t()},cancel(){e=!0},get separateAnnots(){return!1}}}setPageLabel(t){this.pageLabel="string"==typeof t?t:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:t,regularAnnotations:e}=this.#Be;return t&&e?this.canvas:null}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.compatibilityParams=e.OptionKind=e.AppOptions=void 0;const n=Object.create(null);e.compatibilityParams=n;{const t=navigator.userAgent||"",e=navigator.platform||"",r=navigator.maxTouchPoints||1,i=/Android/.test(t);(/\b(iPad|iPhone|iPod)(?=;)/.test(t)||"MacIntel"===e&&r>1||i)&&(n.maxCanvasPixels=5242880)}const r={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};e.OptionKind=r;const i={annotationEditorMode:{value:-1,kind:r.VIEWER+r.PREFERENCE},annotationMode:{value:2,kind:r.VIEWER+r.PREFERENCE},cursorToolOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},defaultZoomValue:{value:"",kind:r.VIEWER+r.PREFERENCE},disableHistory:{value:!1,kind:r.VIEWER},disablePageLabels:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePermissions:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableScripting:{value:!0,kind:r.VIEWER+r.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:r.VIEWER},externalLinkTarget:{value:0,kind:r.VIEWER+r.PREFERENCE},historyUpdateUrl:{value:!1,kind:r.VIEWER+r.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},imageResourcesPath:{value:"./images/",kind:r.VIEWER},maxCanvasPixels:{value:16777216,kind:r.VIEWER},forcePageColors:{value:!1,kind:r.VIEWER+r.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:r.VIEWER+r.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:r.VIEWER+r.PREFERENCE},pdfBugEnabled:{value:!1,kind:r.VIEWER+r.PREFERENCE},printResolution:{value:150,kind:r.VIEWER},sidebarViewOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},scrollModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},spreadModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},textLayerMode:{value:1,kind:r.VIEWER+r.PREFERENCE},useOnlyCssZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},viewerCssTheme:{value:0,kind:r.VIEWER+r.PREFERENCE},viewOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},cMapPacked:{value:!0,kind:r.API},cMapUrl:{value:"../web/cmaps/",kind:r.API},disableAutoFetch:{value:!1,kind:r.API+r.PREFERENCE},disableFontFace:{value:!1,kind:r.API+r.PREFERENCE},disableRange:{value:!1,kind:r.API+r.PREFERENCE},disableStream:{value:!1,kind:r.API+r.PREFERENCE},docBaseUrl:{value:"",kind:r.API},enableXfa:{value:!0,kind:r.API+r.PREFERENCE},fontExtraProperties:{value:!1,kind:r.API},isEvalSupported:{value:!0,kind:r.API},maxImageSize:{value:-1,kind:r.API},pdfBug:{value:!1,kind:r.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:r.API},verbosity:{value:1,kind:r.API},workerPort:{value:null,kind:r.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:r.WORKER}};i.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:r.VIEWER},i.disablePreferences={value:!1,kind:r.VIEWER},i.locale={value:navigator.language||"en-US",kind:r.VIEWER},i.renderer={value:"canvas",kind:r.VIEWER+r.PREFERENCE},i.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:r.VIEWER};const s=Object.create(null);e.AppOptions=class{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(t){const e=s[t];if(void 0!==e)return e;const r=i[t];return void 0!==r?n[t]??r.value:void 0}static getAll(t=null){const e=Object.create(null);for(const a in i){const o=i[a];if(t){if(0==(t&o.kind))continue;if(t===r.PREFERENCE){const t=o.value,n=typeof t;if("boolean"===n||"string"===n||"number"===n&&Number.isInteger(t)){e[a]=t;continue}throw new Error(`Invalid type for preference: ${a}`)}}const l=s[a];e[a]=void 0!==l?l:n[a]??o.value}return e}static set(t,e){s[t]=e}static setAll(t){for(const e in t)s[e]=t[e]}static remove(t){delete s[t]}static _hasUserOptions(){return Object.keys(s).length>0}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextAccessibilityManager=void 0;var r=n(7);class i{#Ue=!1;#Ve=null;#He=new Map;#We=new Map;setTextMapping(t){this.#Ve=t}static#ze(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();if(0===n.width&&0===n.height)return 1;if(0===r.width&&0===r.height)return-1;const i=n.y,s=n.y+n.height,a=n.y+n.height/2,o=r.y,l=r.y+r.height,c=r.y+r.height/2;return a<=o&&c>=s?-1:c<=i&&a>=l?1:n.x+n.width/2-(r.x+r.width/2)}enable(){if(this.#Ue)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#Ve)throw new Error("Text divs and strings have not been set.");if(this.#Ue=!0,this.#Ve=this.#Ve.slice(),this.#Ve.sort(i.#ze),this.#He.size>0){const t=this.#Ve;for(const[e,n]of this.#He)document.getElementById(e)?this.#qe(e,t[n]):this.#He.delete(e)}for(const[t,e]of this.#We)this.addPointerInTextLayer(t,e);this.#We.clear()}disable(){this.#Ue&&(this.#We.clear(),this.#Ve=null,this.#Ue=!1)}removePointerInTextLayer(t){if(!this.#Ue)return void this.#We.delete(t);const e=this.#Ve;if(!e||0===e.length)return;const{id:n}=t,r=this.#He.get(n);if(void 0===r)return;const i=e[r];this.#He.delete(n);let s=i.getAttribute("aria-owns");s?.includes(n)&&(s=s.split(" ").filter((t=>t!==n)).join(" "),s?i.setAttribute("aria-owns",s):(i.removeAttribute("aria-owns"),i.setAttribute("role","presentation")))}#qe(t,e){const n=e.getAttribute("aria-owns");n?.includes(t)||e.setAttribute("aria-owns",n?`${n} ${t}`:t),e.removeAttribute("role")}addPointerInTextLayer(t,e){const{id:n}=t;if(!n)return;if(!this.#Ue)return void this.#We.set(t,e);e&&this.removePointerInTextLayer(t);const s=this.#Ve;if(!s||0===s.length)return;const a=(0,r.binarySearchFirstItem)(s,(e=>i.#ze(t,e)<0)),o=Math.max(0,a-1);this.#qe(n,s[o]),this.#He.set(n,o)}moveElementInDOM(t,e,n,s){if(this.addPointerInTextLayer(n,s),!t.hasChildNodes())return void t.append(e);const a=Array.from(t.childNodes).filter((t=>t!==e));if(0===a.length)return;const o=n||e,l=(0,r.binarySearchFirstItem)(a,(t=>i.#ze(o,t)<0));0===l?a[0].before(e):a[l-1].after(e)}}e.TextAccessibilityManager=i},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFRenderingQueue=void 0;var r=n(3),i=n(7);e.PDFRenderingQueue=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(t,e,n,r=!1){const i=t.views,s=i.length;if(0===s)return null;for(let t=0;t<s;t++){const e=i[t].view;if(!this.isViewFinished(e))return e}const a=t.first.id,o=t.last.id;if(o-a+1>s){const r=t.ids;for(let t=1,i=o-a;t<i;t++){const i=n?a+t:o-t;if(r.has(i))continue;const s=e[i-1];if(!this.isViewFinished(s))return s}}let l=n?o:a-2,c=e[l];return c&&!this.isViewFinished(c)||r&&(l+=n?1:-1,c=e[l],c&&!this.isViewFinished(c))?c:null}isViewFinished(t){return t.renderingState===i.RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case i.RenderingStates.FINISHED:return!1;case i.RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case i.RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case i.RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally((()=>{this.renderHighestPriority()})).catch((t=>{t instanceof r.RenderingCancelledException||console.error(`renderView: "${t}"`)}))}return!0}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextHighlighter=void 0,e.TextHighlighter=class{constructor({findController:t,eventBus:e,pageIndex:n}){this.findController=t,this.matches=[],this.eventBus=e,this.pageIdx=n,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(t,e){this.textDivs=t,this.textContentItemsStr=e}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=t=>{t.pageIndex!==this.pageIdx&&-1!==t.pageIndex||this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(t,e){if(!t)return[];const{textContentItemsStr:n}=this;let r=0,i=0;const s=n.length-1,a=[];for(let o=0,l=t.length;o<l;o++){let l=t[o];for(;r!==s&&l>=i+n[r].length;)i+=n[r].length,r++;r===n.length&&console.error("Could not find a matching mapping");const c={begin:{divIdx:r,offset:l-i}};for(l+=e[o];r!==s&&l>i+n[r].length;)i+=n[r].length,r++;c.end={divIdx:r,offset:l-i},a.push(c)}return a}_renderMatches(t){if(0===t.length)return;const{findController:e,pageIdx:n}=this,{textContentItemsStr:r,textDivs:i}=this,s=n===e.selected.pageIdx,a=e.selected.matchIdx;let o=null;const l={divIdx:-1,offset:void 0};function c(t,e){const n=t.divIdx;return i[n].textContent="",u(n,0,t.offset,e)}function u(t,e,n,s){let a=i[t];if(a.nodeType===Node.TEXT_NODE){const e=document.createElement("span");a.before(e),e.append(a),i[t]=e,a=e}const o=r[t].substring(e,n),l=document.createTextNode(o);if(s){const t=document.createElement("span");return t.className=`${s} appended`,t.append(l),a.append(t),s.includes("selected")?t.offsetLeft:0}return a.append(l),0}let h=a,d=h+1;if(e.state.highlightAll)h=0,d=t.length;else if(!s)return;for(let r=h;r<d;r++){const h=t[r],d=h.begin,p=h.end,f=s&&r===a,g=f?" selected":"";let m=0;if(o&&d.divIdx===o.divIdx?u(o.divIdx,o.offset,d.offset):(null!==o&&u(o.divIdx,o.offset,l.offset),c(d)),d.divIdx===p.divIdx)m=u(d.divIdx,d.offset,p.offset,"highlight"+g);else{m=u(d.divIdx,d.offset,l.offset,"highlight begin"+g);for(let t=d.divIdx+1,e=p.divIdx;t<e;t++)i[t].className="highlight middle"+g;c(p,"highlight end"+g)}o=p,f&&e.scrollMatchIntoView({element:i[d.divIdx],selectedLeft:m,pageIndex:n,matchIndex:a})}o&&u(o.divIdx,o.offset,l.offset)}_updateMatches(){if(!this.enabled)return;const{findController:t,matches:e,pageIdx:n}=this,{textContentItemsStr:r,textDivs:i}=this;let s=-1;for(let t=0,n=e.length;t<n;t++){const n=e[t];for(let t=Math.max(s,n.begin.divIdx),e=n.end.divIdx;t<=e;t++){const e=i[t];e.textContent=r[t],e.className=""}s=n.end.divIdx+1}if(!t?.highlightMatches)return;const a=t.pageMatches[n]||null,o=t.pageMatchesLength[n]||null;this.matches=this._convertMatches(a,o),this._renderMatches(this.matches)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadManager=void 0;var r=n(3);function i(t,e){const n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=t,n.target="_parent","download"in n&&(n.download=e),(document.body||document.documentElement).append(n),n.click(),n.remove()}e.DownloadManager=class{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(t,e){(0,r.createValidAbsoluteUrl)(t,"http://example.com")?i(t+"#pdfjs.action=download",e):console.error(`downloadUrl - not a valid URL: ${t}`)}downloadData(t,e,n){i(URL.createObjectURL(new Blob([t],{type:n})),e)}openOrDownloadData(t,e,n){const i=(0,r.isPdfFile)(n),s=i?"application/pdf":"";if(i){let r,i=this._openBlobUrls.get(t);i||(i=URL.createObjectURL(new Blob([e],{type:s})),this._openBlobUrls.set(t,i)),r="?file="+encodeURIComponent(i+"#"+n);try{return window.open(r),!0}catch(e){console.error(`openOrDownloadData: ${e}`),URL.revokeObjectURL(i),this._openBlobUrls.delete(t)}}return this.downloadData(e,n,s),!1}download(t,e,n){i(URL.createObjectURL(t),n)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WaitOnType=e.EventBus=e.AutomationEventBus=void 0,e.waitOnEventOrTimeout=function({target:t,name:e,delay:i=0}){return new Promise((function(s,a){if("object"!=typeof t||!e||"string"!=typeof e||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function o(n){t instanceof r?t._off(e,l):t.removeEventListener(e,l),u&&clearTimeout(u),s(n)}const l=o.bind(null,n.EVENT);t instanceof r?t._on(e,l):t.addEventListener(e,l);const c=o.bind(null,n.TIMEOUT),u=setTimeout(c,i)}))};const n={EVENT:"event",TIMEOUT:"timeout"};e.WaitOnType=n;class r{constructor(){this._listeners=Object.create(null)}on(t,e,n=null){this._on(t,e,{external:!0,once:n?.once})}off(t,e,n=null){this._off(t,e,{external:!0,once:n?.once})}dispatch(t,e){const n=this._listeners[t];if(!n||0===n.length)return;let r;for(const{listener:i,external:s,once:a}of n.slice(0))a&&this._off(t,i),s?(r||=[]).push(i):i(e);if(r){for(const t of r)t(e);r=null}}_on(t,e,n=null){(this._listeners[t]||=[]).push({listener:e,external:!0===n?.external,once:!0===n?.once})}_off(t,e,n=null){const r=this._listeners[t];if(r)for(let t=0,n=r.length;t<n;t++)if(r[t].listener===e)return void r.splice(t,1)}}e.EventBus=r,e.AutomationEventBus=class extends r{dispatch(t,e){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GenericL10n=void 0,n(21);var r=n(4);const i=document.webL10n;e.GenericL10n=class{constructor(t){this._lang=t,this._ready=new Promise(((e,n)=>{i.setLanguage((0,r.fixupLangCode)(t),(()=>{e(i)}))}))}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(t,e=null,n=(0,r.getL10nFallback)(t,e)){return(await this._ready).get(t,e,n)}async translate(t){return(await this._ready).translate(t)}}},()=>{document.webL10n=function(t,e,n){var r={},i="",s="textContent",a="",o={},l="loading";function c(t,e,n){e=e||function(t){},n=n||function(){};var r=new XMLHttpRequest;r.open("GET",t,!0),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=utf-8"),r.onreadystatechange=function(){4==r.readyState&&(200==r.status||0===r.status?e(r.responseText):n())},r.onerror=n,r.ontimeout=n;try{r.send(null)}catch(t){n()}}function u(t,e,n,a){var o=t.replace(/[^\/]*$/,"")||"./";function l(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}c(t,(function(t){i+=t,function(t,n){var r={},i=/^\s*|\s*$/,s=/^\s*#|^\s*$/,a=/^\s*\[(.*)\]\s*$/,u=/^\s*@import\s+url\((.*)\)\s*$/i,h=/^([^=\s]*)\s*=\s*(.+)$/;function d(t,n,c){var d=t.replace(i,"").split(/[\r\n]+/),f="*",g=e.split("-",1)[0],m=!1,y="";!function t(){for(;;){if(!d.length)return void c();var i=d.shift();if(!s.test(i)){if(n){if(y=a.exec(i)){f=y[1].toLowerCase(),m="*"!==f&&f!==e&&f!==g;continue}if(m)continue;if(y=u.exec(i))return void p(o+y[1],t)}var v=i.match(h);v&&3==v.length&&(r[v[1]]=l(v[2]))}}}()}function p(t,e){c(t,(function(t){d(t,!1,e)}),(function(){console.warn(t+" not found."),e()}))}d(t,!0,(function(){n(r)}))}(t,(function(t){for(var e in t){var i,a,o=e.lastIndexOf(".");o>0?(i=e.substring(0,o),a=e.substring(o+1)):(i=e,a=s),r[i]||(r[i]={}),r[i][a]=t[e]}n&&n()}))}),a)}function h(t,n){t&&(t=t.toLowerCase()),n=n||function(){},r={},i="",a="",a=t;var s=e.querySelectorAll('link[type="application/l10n"]'),o=s.length;if(0!==o){var c,h,d=0;h=function(){++d>=o&&(n(),l="complete")};for(var p=0;p<o;p++)new y(s[p]).load(t,h)}else{var f=(c=e.querySelector('script[type="application/l10n"]'))?JSON.parse(c.innerHTML):null;if(f&&f.locales&&f.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(r=f.locales[t])){var g=f.default_locale.toLowerCase();for(var m in f.locales){if((m=m.toLowerCase())===t){r=f.locales[t];break}m===g&&(r=f.locales[g])}}n()}else console.log("no resource to load, early way out");l="complete"}function y(t){var e=t.href;this.load=function(t,n){u(e,t,n,(function(){console.warn(e+" not found."),console.warn('"'+t+'" resource not found'),a="",n()}))}}}function d(t,e,n){var i=r[t];if(!i){if(console.warn("#"+t+" is undefined."),!n)return null;i=n}var s={};for(var a in i){var o=i[a];o=f(o=p(o,e,t,a),e,t),s[a]=o}return s}function p(t,e,n,i){var s=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!s||!s.length)return t;var a,l=s[1],c=s[2];return e&&c in e?a=e[c]:c in r&&(a=r[c]),l in o&&(t=(0,o[l])(t,a,n,i)),t}function f(t,e,n){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,i){return e&&i in e?e[i]:i in r?r[i]:(console.log("argument {{"+i+"}} for #"+n+" is undefined."),t)}))}function g(t){var n=function(t){if(!t)return{};var e=t.getAttribute("data-l10n-id"),n=t.getAttribute("data-l10n-args"),r={};if(n)try{r=JSON.parse(n)}catch(t){console.warn("could not parse arguments for #"+e)}return{id:e,args:r}}(t);if(n.id){var r=d(n.id,n.args);if(r){if(r[s]){if(0===function(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var e=0,n=0;n<t.childNodes.length;n++)e+=1===t.nodeType?1:0;return e}(t))t[s]=r[s];else{for(var i=t.childNodes,a=!1,o=0,l=i.length;o<l;o++)3===i[o].nodeType&&/\S/.test(i[o].nodeValue)&&(a?i[o].nodeValue="":(i[o].nodeValue=r[s],a=!0));if(!a){var c=e.createTextNode(r[s]);t.prepend(c)}}delete r[s]}for(var u in r)t[u]=r[u]}else console.warn("#"+n.id+" is undefined.")}}return o.plural=function(t,e,n,i){var l=parseFloat(e);if(isNaN(l))return t;if(i!=s)return t;o._pluralRules||(o._pluralRules=function(t){function e(t,e){return-1!==e.indexOf(t)}function n(t,e,n){return e<=t&&t<=n}var r={0:function(t){return"other"},1:function(t){return n(t%100,3,10)?"few":0===t?"zero":n(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function(t){return 1==t?"one":"other"},4:function(t){return n(t,0,1)?"one":"other"},5:function(t){return n(t,0,2)&&2!=t?"one":"other"},6:function(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function(t){return 2==t?"two":1==t?"one":"other"},8:function(t){return n(t,3,6)?"few":n(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function(t){return 0===t||1!=t&&n(t%100,1,19)?"few":1==t?"one":"other"},10:function(t){return n(t%10,2,9)&&!n(t%100,11,19)?"few":t%10!=1||n(t%100,11,19)?"other":"one"},11:function(t){return n(t%10,2,4)&&!n(t%100,12,14)?"few":t%10==0||n(t%10,5,9)||n(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function(t){return n(t,2,4)?"few":1==t?"one":"other"},13:function(t){return n(t%10,2,4)&&!n(t%100,12,14)?"few":1!=t&&n(t%10,0,1)||n(t%10,5,9)||n(t%100,12,14)?"many":1==t?"one":"other"},14:function(t){return n(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function(t){return 0===t||n(t%100,2,10)?"few":n(t%100,11,19)?"many":1==t?"one":"other"},16:function(t){return t%10==1&&11!=t?"one":"other"},17:function(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function(t){return 0===t?"zero":n(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function(t){return n(t,2,10)?"few":n(t,0,1)?"one":"other"},20:function(t){return!n(t%10,3,4)&&t%10!=9||n(t%100,10,19)||n(t%100,70,79)||n(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||e(t%100,[12,72,92])?t%10!=1||e(t%100,[11,71,91])?"other":"one":"two":"few"},21:function(t){return 0===t?"zero":1==t?"one":"other"},22:function(t){return n(t,0,1)||n(t,11,99)?"one":"other"},23:function(t){return n(t%10,1,2)||t%20==0?"one":"other"},24:function(t){return n(t,3,10)||n(t,13,19)?"few":e(t,[2,12])?"two":e(t,[1,11])?"one":"other"}},i={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];return i in r?r[i]:(console.warn("plural form unknown for ["+t+"]"),function(){return"other"})}(a));var c="["+o._pluralRules(l)+"]";return 0===l&&n+"[zero]"in r?t=r[n+"[zero]"][i]:1==l&&n+"[one]"in r?t=r[n+"[one]"][i]:2==l&&n+"[two]"in r?t=r[n+"[two]"][i]:n+c in r?t=r[n+c][i]:n+"[other]"in r&&(t=r[n+"[other]"][i]),t},{get:function(t,e,n){var r,i=t.lastIndexOf("."),a=s;i>0&&(a=t.substring(i+1),t=t.substring(0,i)),n&&((r={})[a]=n);var o=d(t,e,r);return o&&a in o?o[a]:"{{"+t+"}}"},getData:function(){return r},getText:function(){return i},getLanguage:function(){return a},setLanguage:function(t,e){h(t,(function(){e&&e()}))},getDirection:function(){var t=a.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function(t){for(var n=function(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||e.documentElement),r=n.length,i=0;i<r;i++)g(n[i]);g(t)},getReadyState:function(){return l},ready:function(n){n&&("complete"==l||"interactive"==l?t.setTimeout((function(){n()})):e.addEventListener&&e.addEventListener("localized",(function t(){e.removeEventListener("localized",t),n()})))}}}(window,document)},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFindController=e.FindState=void 0;var r=n(7),i=n(3),s=n(23);const a={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};e.FindState=a;const o={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},l=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),c=[...l.values()].map((t=>String.fromCharCode(t))).join(""),u=/\p{M}+/gu,h=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,d=/([^\p{M}])\p{M}*$/u,p=/^\p{M}*([^\p{M}])/u,f=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,g=new Map;let m=null,y=null;function v(t){const e=[];let n,r;for(;null!==(n=f.exec(t));){let{index:t}=n;for(const r of n[0]){let n=g.get(r);n||(n=r.normalize("NFD").length,g.set(r,n)),e.push([n,t++])}}if(0===e.length&&m)r=m;else if(e.length>0&&y)r=y;else{const t=`([${Object.keys(o).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;r=0===e.length?m=new RegExp(t+"|(\\u0000)","gum"):y=new RegExp(t+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const i=[];for(;null!==(n=u.exec(t));)i.push([n[0].length,n.index]);let s=t.normalize("NFD");const a=[[0,0]];let l=0,c=0,h=0,d=0,p=0,v=!1;return s=s.replace(r,((t,n,r,s,u,f,g)=>{if(g-=d,n){const e=o[t],n=e.length;for(let t=1;t<n;t++)a.push([g-h+t,h-t]);return h-=n-1,e}if(r){const t=r.endsWith("\n"),e=t?r.length-2:r.length;v=!0;let n=e;g+p===i[l]?.[1]&&(n-=i[l][0],++l);for(let t=1;t<=n;t++)a.push([g-1-h+t,h-t]);return h-=n,d+=n,t?(g+=e-1,a.push([g-h+1,1+h]),h+=1,d+=1,p+=1,r.slice(0,e)):r}if(s)return a.push([g-h+1,1+h]),h+=1,d+=1,p+=1,s.charAt(0);if(u)return a.push([g-h+1,h-1]),h-=1,d+=1,p+=1," ";if(g+p===e[c]?.[1]){const t=e[c][0]-1;++c;for(let e=1;e<=t;e++)a.push([g-(h-e),h-e]);h-=t,d+=t}return f})),a.push([s.length,h]),[s,a,v]}function b(t,e,n){if(!t)return[e,n];const i=e,s=e+n;let a=(0,r.binarySearchFirstItem)(t,(t=>t[0]>=i));t[a][0]>i&&--a;let o=(0,r.binarySearchFirstItem)(t,(t=>t[0]>=s),a);return t[o][0]>s&&--o,[i+t[a][1],n+t[o][1]-t[a][1]]}e.PDFFindController=class{constructor({linkService:t,eventBus:e}){this._linkService=t,this._eventBus=e,this.#Ge(),e._on("find",this.#$e.bind(this)),e._on("findbarclose",this.#Xe.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(t){this._pdfDocument&&this.#Ge(),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}#$e(t){if(!t)return;const e=this._pdfDocument,{type:n}=t;(null===this._state||this.#Ye(t))&&(this._dirtyMatch=!0),this._state=t,"highlightallchange"!==n&&this.#Ke(a.PENDING),this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||e&&this._pdfDocument!==e)return;this.#Tt();const t=!this._highlightMatches,r=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),n?this._dirtyMatch?this.#Je():"again"===n?(this.#Je(),t&&this._state.highlightAll&&this.#Qe()):"highlightallchange"===n?(r?this.#Je():this._highlightMatches=!0,this.#Qe()):this.#Je():this._findTimeout=setTimeout((()=>{this.#Je(),this._findTimeout=null}),250)}))}scrollMatchIntoView({element:t=null,selectedLeft:e=0,pageIndex:n=-1,matchIndex:i=-1}){if(!this._scrollMatches||!t)return;if(-1===i||i!==this._selected.matchIdx)return;if(-1===n||n!==this._selected.pageIdx)return;this._scrollMatches=!1;const s={top:-50,left:e+-400};(0,r.scrollIntoView)(t,s,!0)}#Ge(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,i.createPromiseCapability)()}get#Ze(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=v(this._state.query)),this._normalizedQuery}#Ye(t){if(t.query!==this._state.query)return!0;switch(t.type){case"again":const t=this._selected.pageIdx+1,e=this._linkService;return t>=1&&t<=e.pagesCount&&t!==e.page&&!e.isPageVisible(t);case"highlightallchange":return!1}return!0}#tn(t,e,n){let r=t.slice(0,e).match(d);if(r){const n=t.charCodeAt(e),i=r[1].charCodeAt(0);if((0,s.getCharacterType)(n)===(0,s.getCharacterType)(i))return!1}if(r=t.slice(e+n).match(p),r){const i=t.charCodeAt(e+n-1),a=r[1].charCodeAt(0);if((0,s.getCharacterType)(i)===(0,s.getCharacterType)(a))return!1}return!0}#en(t,e,n,r){const i=[],s=[],a=this._pageDiffs[n];let o;for(;null!==(o=t.exec(r));){if(e&&!this.#tn(r,o.index,o[0].length))continue;const[t,n]=b(a,o.index,o[0].length);n&&(i.push(t),s.push(n))}this._pageMatches[n]=i,this._pageMatchesLength[n]=s}#nn(t,e){const{matchDiacritics:n}=this._state;let r=!1;const i="[ ]*";return(t=t.replace(h,((t,i,s,a,o,c)=>i?`[ ]*\\${i}[ ]*`:s?`[ ]*${s}[ ]*`:a?"[ ]+":n?o||c:o?l.has(o.charCodeAt(0))?o:"":e?(r=!0,`${c}\\p{M}*`):c))).endsWith(i)&&(t=t.slice(0,t.length-i.length)),n&&e&&(r=!0,t=`${t}(?=[${c}]|[^\\p{M}]|$)`),[r,t]}#rn(t){let e=this.#Ze;if(0===e.length)return;const{caseSensitive:n,entireWord:r,phraseSearch:i}=this._state,s=this._pageContents[t],a=this._hasDiacritics[t];let o=!1;if(i)[o,e]=this.#nn(e,a);else{const t=e.match(/\S+/g);t&&(e=t.sort().reverse().map((t=>{const[e,n]=this.#nn(t,a);return o||=e,`(${n})`})).join("|"))}e=new RegExp(e,`g${o?"u":""}${n?"":"i"}`),this.#en(e,r,t,s),this._state.highlightAll&&this.#in(t),this._resumePageIdx===t&&(this._resumePageIdx=null,this.#sn());const l=this._pageMatches[t].length;l>0&&(this._matchesCountTotal+=l,this.#an())}#Tt(){if(this._extractTextPromises.length>0)return;let t=Promise.resolve();for(let e=0,n=this._linkService.pagesCount;e<n;e++){const n=(0,i.createPromiseCapability)();this._extractTextPromises[e]=n.promise,t=t.then((()=>this._pdfDocument.getPage(e+1).then((t=>t.getTextContent())).then((t=>{const r=[];for(const e of t.items)r.push(e.str),e.hasEOL&&r.push("\n");[this._pageContents[e],this._pageDiffs[e],this._hasDiacritics[e]]=v(r.join("")),n.resolve()}),(t=>{console.error(`Unable to get text content for page ${e+1}`,t),this._pageContents[e]="",this._pageDiffs[e]=null,this._hasDiacritics[e]=!1,n.resolve()}))))}}#in(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}#Qe(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#Je(){const t=this._state.findPrevious,e=this._linkService.page-1,n=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=e,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this.#Qe();for(let t=0;t<n;t++)this._pendingFindMatches.has(t)||(this._pendingFindMatches.add(t),this._extractTextPromises[t].then((()=>{this._pendingFindMatches.delete(t),this.#rn(t)})))}if(""===this.#Ze)return void this.#Ke(a.FOUND);if(this._resumePageIdx)return;const r=this._offset;if(this._pagesToSearch=n,null!==r.matchIdx){const e=this._pageMatches[r.pageIdx].length;if(!t&&r.matchIdx+1<e||t&&r.matchIdx>0)return r.matchIdx=t?r.matchIdx-1:r.matchIdx+1,void this.#on(!0);this.#ln(t)}this.#sn()}#cn(t){const e=this._offset,n=t.length,r=this._state.findPrevious;return n?(e.matchIdx=r?n-1:0,this.#on(!0),!0):(this.#ln(r),!!(e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0))&&(this.#on(!1),!0))}#sn(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let t=null;do{const e=this._offset.pageIdx;if(t=this._pageMatches[e],!t){this._resumePageIdx=e;break}}while(!this.#cn(t))}#ln(t){const e=this._offset,n=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=n||e.pageIdx<0)&&(e.pageIdx=t?n-1:0,e.wrapped=!0)}#on(t=!1){let e=a.NOT_FOUND;const n=this._offset.wrapped;if(this._offset.wrapped=!1,t){const t=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=n?a.WRAPPED:a.FOUND,-1!==t&&t!==this._selected.pageIdx&&this.#in(t)}this.#Ke(e,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#in(this._selected.pageIdx))}#Xe(t){const e=this._pdfDocument;this._firstPageCapability.promise.then((()=>{!this._pdfDocument||e&&this._pdfDocument!==e||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#Ke(a.FOUND),this._highlightMatches=!1,this.#Qe())}))}#un(){const{pageIdx:t,matchIdx:e}=this._selected;let n=0,r=this._matchesCountTotal;if(-1!==e){for(let e=0;e<t;e++)n+=this._pageMatches[e]?.length||0;n+=e+1}return(n<1||n>r)&&(n=r=0),{current:n,total:r}}#an(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#un()})}#Ke(t,e=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:e,matchesCount:this.#un(),rawQuery:this._state?.query??null})}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterType=void 0,e.getCharacterType=function(t){return function(t){return t<11904}(t)?function(t){return 0==(65408&t)}(t)?function(t){return 32===t||9===t||13===t||10===t}(t)?n.SPACE:function(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function(t){return t>=48&&t<=57}(t)||95===t?n.ALPHA_LETTER:n.PUNCT:function(t){return 3584==(65408&t)}(t)?n.THAI_LETTER:160===t?n.SPACE:n.ALPHA_LETTER:function(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t)?n.HAN_LETTER:function(t){return t>=12448&&t<=12543}(t)?n.KATAKANA_LETTER:function(t){return t>=12352&&t<=12447}(t)?n.HIRAGANA_LETTER:function(t){return t>=65376&&t<=65439}(t)?n.HALFWIDTH_KATAKANA_LETTER:n.ALPHA_LETTER};const n={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};e.CharacterType=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFHistory=void 0,e.isDestArraysEqual=o,e.isDestHashesEqual=a;var r=n(7),i=n(19);function s(){return document.location.hash}function a(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||(0,r.parseQueryString)(t).get("nameddest")===e)}function o(t,e){function n(t,e){if(typeof t!=typeof e)return!1;if(Array.isArray(t)||Array.isArray(e))return!1;if(null!==t&&"object"==typeof t&&null!==e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!n(t[r],e[r]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}e.PDFHistory=class{constructor({linkService:t,eventBus:e}){this.linkService=t,this.eventBus=e,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",(t=>{this._isPagesLoaded=!!t.pagesCount}),{once:!0})}))}initialize({fingerprint:t,resetHistory:e=!1,updateUrl:n=!1}){if(!t||"string"!=typeof t)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const r=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===n,this._initialized=!0,this._bindEvents();const i=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=s(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(i,!0)||e){const{hash:t,page:n,rotation:i}=this._parseCurrentHash(!0);return!t||r||e?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:t,page:n,rotation:i},!0)}const a=i.destination;this._updateInternalState(a,i.uid,!0),void 0!==a.rotation&&(this._initialRotation=a.rotation),a.dest?(this._initialBookmark=JSON.stringify(a.dest),this._destination.page=null):a.hash?this._initialBookmark=a.hash:a.page&&(this._initialBookmark=`page=${a.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:e,pageNumber:n}){if(!this._initialized)return;if(t&&"string"!=typeof t)return void console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);if(!Array.isArray(e))return void console.error(`PDFHistory.push: "${e}" is not a valid explicitDest parameter.`);if(!this._isValidPage(n)&&(null!==n||this._destination))return void console.error(`PDFHistory.push: "${n}" is not a valid pageNumber parameter.`);const r=t||JSON.stringify(e);if(!r)return;let i=!1;if(this._destination&&(a(this._destination.hash,r)||o(this._destination.dest,e))){if(this._destination.page)return;i=!0}this._popStateInProgress&&!i||(this._pushOrReplaceState({dest:e,hash:r,page:n,rotation:this.linkService.rotation},i),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))}pushPage(t){this._initialized&&(this._isValidPage(t)?this._destination?.page!==t&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${t}`,page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))):console.error(`PDFHistory.pushPage: "${t}" is not a valid page number.`))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(t,e=!1){const n=e||!this._destination,r={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:t};let i;if(this._updateInternalState(t,r.uid),this._updateUrl&&t?.hash){const e=document.location.href.split("#")[0];e.startsWith("file://")||(i=`${e}#${t.hash}`)}n?window.history.replaceState(r,"",i):window.history.pushState(r,"",i)}_tryPushCurrentPosition(t=!1){if(!this._position)return;let e=this._position;if(t&&(e=Object.assign(Object.create(null),this._position),e.temporary=!0),!this._destination)return void this._pushOrReplaceState(e);if(this._destination.temporary)return void this._pushOrReplaceState(e,!0);if(this._destination.hash===e.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let n=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(void 0!==this._destination.dest||!this._destination.first)return;n=!0}this._pushOrReplaceState(e,n)}_isValidPage(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}_isValidState(t,e=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!e)return!1;{if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;const[e]=performance.getEntriesByType("navigation");if("reload"!==e?.type)return!1}}return!(!Number.isInteger(t.uid)||t.uid<0)&&null!==t.destination&&"object"==typeof t.destination}_updateInternalState(t,e,n=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&t?.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._maxUid=Math.max(this._maxUid,e),this._numPositionUpdates=0}_parseCurrentHash(t=!1){const e=unescape(s()).substring(1),n=(0,r.parseQueryString)(e),i=n.get("nameddest")||"";let a=0|n.get("page");return(!this._isValidPage(a)||t&&i.length>0)&&(a=null),{hash:e,page:a,rotation:this.linkService.rotation}}_updateViewarea({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null}),1e3))}_popState({state:t}){const e=s(),n=this._currentHash!==e;if(this._currentHash=e,!t){this._uid++;const{hash:t,page:e,rotation:n}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:t,page:e,rotation:n},!0)}if(!this._isValidState(t))return;this._popStateInProgress=!0,n&&(this._blockHashChange++,(0,i.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--})));const a=t.destination;this._updateInternalState(a,t.uid,!0),(0,r.isValidRotation)(a.rotation)&&(this.linkService.rotation=a.rotation),a.dest?this.linkService.goToDestination(a.dest):a.hash?this.linkService.setHash(a.hash):a.page&&(this.linkService.page=a.page),Promise.resolve().then((()=>{this._popStateInProgress=!1}))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFScriptingManager=void 0;var r=n(7),i=n(3);e.PDFScriptingManager=class{constructor({eventBus:t,sandboxBundleSrc:e=null,scriptingFactory:n=null,docPropertiesLookup:r=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=t,this._sandboxBundleSrc=e,this._scriptingFactory=n,this._docPropertiesLookup=r,this._scriptingFactory||window.addEventListener("updatefromsandbox",(t=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}))}setViewer(t){this._pdfViewer=t}async setDocument(t){if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=t,!t)return;const[e,n,r]=await Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(e||r){if(t===this._pdfDocument){try{this._scripting=this._createScripting()}catch(t){return console.error(`PDFScriptingManager.setDocument: "${t?.message}".`),void await this._destroyScripting()}this._internalEvents.set("updatefromsandbox",(t=>{t?.source===window&&this._updateFromSandbox(t.detail)})),this._internalEvents.set("dispatcheventinsandbox",(t=>{this._scripting?.dispatchEventInSandbox(t.detail)})),this._internalEvents.set("pagechanging",(({pageNumber:t,previous:e})=>{t!==e&&(this._dispatchPageClose(e),this._dispatchPageOpen(t))})),this._internalEvents.set("pagerendered",(({pageNumber:t})=>{this._pageOpenPending.has(t)&&t===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(t)})),this._internalEvents.set("pagesdestroy",(async t=>{await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await(this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"})),this._closeCapability?.resolve()})),this._domEvents.set("mousedown",(t=>{this._mouseState.isDown=!0})),this._domEvents.set("mouseup",(t=>{this._mouseState.isDown=!1}));for(const[t,e]of this._internalEvents)this._eventBus._on(t,e);for(const[t,e]of this._domEvents)window.addEventListener(t,e,!0);try{const i=await this._getDocProperties();if(t!==this._pdfDocument)return;await this._scripting.createSandbox({objects:e,calculationOrder:n,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...i,actions:r}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(t){return console.error(`PDFScriptingManager.setDocument: "${t?.message}".`),void await this._destroyScripting()}await(this._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then((()=>{t===this._pdfDocument&&(this._ready=!0)}))}}else await this._destroyScripting()}async dispatchWillSave(t){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(t){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(t){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(t){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,i.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,i.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,i.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,i.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(t){const e=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:n,siblings:i,command:s,value:a}=t;if(!n){switch(s){case"clear":console.clear();break;case"error":console.error(a);break;case"layout":if(e)return;const t=(0,r.apiPageLayoutToViewerModes)(a);this._pdfViewer.spreadMode=t.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=a+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(a);break;case"zoom":if(e)return;this._pdfViewer.currentScaleValue=a;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(e)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(e)return;this._pdfViewer.decreaseScale()}return}if(e&&t.focus)return;delete t.id,delete t.siblings;const o=i?[n,...i]:[n];for(const e of o){const n=document.querySelector(`[data-element-id="${e}"]`);n?n.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):this._pdfDocument?.annotationStorage.setValue(e,t)}}async _dispatchPageOpen(t,e=!1){const n=this._pdfDocument,s=this._visitedPages;if(e&&(this._closeCapability=(0,i.createPromiseCapability)()),!this._closeCapability)return;const a=this._pdfViewer.getPageView(t-1);if(a?.renderingState!==r.RenderingStates.FINISHED)return void this._pageOpenPending.add(t);this._pageOpenPending.delete(t);const o=(async()=>{const e=await(s.has(t)?null:a.pdfPage?.getJSActions());n===this._pdfDocument&&await(this._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:e}))})();s.set(t,o)}async _dispatchPageClose(t){const e=this._pdfDocument,n=this._visitedPages;if(!this._closeCapability)return;if(this._pageOpenPending.has(t))return;const r=n.get(t);r&&(n.set(t,null),await r,e===this._pdfDocument&&await(this._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:t}=n(26);return t(this._pdfDocument)}_createScripting(){if(this._destroyCapability=(0,i.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:t}=n(26);return new t(this._sandboxBundleSrc)}async _destroyScripting(){if(!this._scripting)return this._pdfDocument=null,void this._destroyCapability?.resolve();this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise((t=>{setTimeout(t,1e3)}))]).catch((t=>{})),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch(t){}for(const[t,e]of this._internalEvents)this._eventBus._off(t,e);this._internalEvents.clear();for(const[t,e]of this._domEvents)window.removeEventListener(t,e,!0);this._domEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,delete this._mouseState.isDown,this._ready=!1,this._destroyCapability?.resolve()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GenericScripting=void 0,e.docPropertiesLookup=async function(t){const e="".split("#")[0];let{info:n,metadata:i,contentDispositionFilename:s,contentLength:a}=await t.getMetadata();if(!a){const{length:e}=await t.getDownloadInfo();a=e}return{...n,baseURL:e,filesize:a,filename:s||(0,r.getPdfFilenameFromUrl)(""),metadata:i?.getRaw(),authors:i?.get("dc:creator"),numPages:t.numPages,URL:""}};var r=n(3);e.GenericScripting=class{constructor(t){this._ready=(0,r.loadScript)(t,!0).then((()=>window.pdfjsSandbox.QuickJSSandbox()))}async createSandbox(t){(await this._ready).create(t)}async dispatchEventInSandbox(t){const e=await this._ready;setTimeout((()=>e.dispatchEvent(t)),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}}],e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}var i={};return(()=>{var t=i;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return o.AnnotationLayerBuilder}}),Object.defineProperty(t,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return e.DefaultAnnotationLayerFactory}}),Object.defineProperty(t,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return e.DefaultStructTreeLayerFactory}}),Object.defineProperty(t,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return e.DefaultTextLayerFactory}}),Object.defineProperty(t,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return e.DefaultXfaLayerFactory}}),Object.defineProperty(t,"DownloadManager",{enumerable:!0,get:function(){return l.DownloadManager}}),Object.defineProperty(t,"EventBus",{enumerable:!0,get:function(){return c.EventBus}}),Object.defineProperty(t,"GenericL10n",{enumerable:!0,get:function(){return u.GenericL10n}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return n.LinkTarget}}),Object.defineProperty(t,"NullL10n",{enumerable:!0,get:function(){return h.NullL10n}}),Object.defineProperty(t,"PDFFindController",{enumerable:!0,get:function(){return d.PDFFindController}}),Object.defineProperty(t,"PDFHistory",{enumerable:!0,get:function(){return p.PDFHistory}}),Object.defineProperty(t,"PDFLinkService",{enumerable:!0,get:function(){return n.PDFLinkService}}),Object.defineProperty(t,"PDFPageView",{enumerable:!0,get:function(){return f.PDFPageView}}),Object.defineProperty(t,"PDFScriptingManager",{enumerable:!0,get:function(){return g.PDFScriptingManager}}),Object.defineProperty(t,"PDFSinglePageViewer",{enumerable:!0,get:function(){return a.PDFSinglePageViewer}}),Object.defineProperty(t,"PDFViewer",{enumerable:!0,get:function(){return a.PDFViewer}}),Object.defineProperty(t,"ProgressBar",{enumerable:!0,get:function(){return s.ProgressBar}}),Object.defineProperty(t,"RenderingStates",{enumerable:!0,get:function(){return s.RenderingStates}}),Object.defineProperty(t,"ScrollMode",{enumerable:!0,get:function(){return s.ScrollMode}}),Object.defineProperty(t,"SimpleLinkService",{enumerable:!0,get:function(){return n.SimpleLinkService}}),Object.defineProperty(t,"SpreadMode",{enumerable:!0,get:function(){return s.SpreadMode}}),Object.defineProperty(t,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return m.StructTreeLayerBuilder}}),Object.defineProperty(t,"TextLayerBuilder",{enumerable:!0,get:function(){return y.TextLayerBuilder}}),Object.defineProperty(t,"XfaLayerBuilder",{enumerable:!0,get:function(){return v.XfaLayerBuilder}}),Object.defineProperty(t,"parseQueryString",{enumerable:!0,get:function(){return s.parseQueryString}});var e=r(1),n=r(6),s=r(7),a=r(11),o=r(5),l=r(18),c=r(19),u=r(20),h=r(4),d=r(22),p=r(24),f=r(13),g=r(25),m=r(8),y=r(9),v=r(10)})(),i})(),t.exports=r()},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},a=[],o=0;o<t.length;o++){var l=t[o],c=r.base?l[0]+r.base:l[0],u=s[c]||0,h="".concat(c," ").concat(u);s[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=i(p,r);r.byIndex=o,e.splice(o,0,{identifier:h,updater:f,references:1})}a.push(h)}return a}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var o=n(s[a]);e[o].references--}for(var l=r(t,i),c=0;c<s.length;c++){var u=n(s[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}s=l}}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{},910:(t,e,n)=>{"use strict";n.r(e),n.d(e,{F:()=>r,T:()=>i,__:()=>s,add:()=>c,addIndex:()=>f,adjust:()=>m,all:()=>w,allPass:()=>Q,always:()=>Z,and:()=>tt,andThen:()=>Ps,any:()=>nt,anyPass:()=>rt,ap:()=>it,aperture:()=>ot,append:()=>lt,apply:()=>ct,applySpec:()=>pt,applyTo:()=>ft,ascend:()=>gt,assoc:()=>At,assocPath:()=>bt,binary:()=>wt,bind:()=>k,both:()=>Ct,call:()=>Tt,chain:()=>Rt,clamp:()=>Lt,clone:()=>Nt,collectBy:()=>Bt,comparator:()=>Ut,complement:()=>Ht,compose:()=>Yt,composeWith:()=>te,concat:()=>_e,cond:()=>Se,construct:()=>Pe,constructN:()=>xe,converge:()=>Ee,count:()=>Ce,countBy:()=>ke,curry:()=>we,curryN:()=>p,dec:()=>Re,defaultTo:()=>Oe,descend:()=>Le,difference:()=>Fe,differenceWith:()=>Ne,dissoc:()=>We,dissocPath:()=>Ve,divide:()=>ze,drop:()=>Ge,dropLast:()=>Je,dropLastWhile:()=>tn,dropRepeats:()=>an,dropRepeatsWith:()=>sn,dropWhile:()=>ln,either:()=>un,empty:()=>dn,endsWith:()=>fn,eqBy:()=>gn,eqProps:()=>yn,equals:()=>ae,evolve:()=>bn,filter:()=>me,find:()=>An,findIndex:()=>wn,findLast:()=>Pn,findLastIndex:()=>Cn,flatten:()=>Tn,flip:()=>Mn,forEach:()=>kn,forEachObjIndexed:()=>Rn,fromPairs:()=>On,groupBy:()=>Ln,groupWith:()=>Dn,gt:()=>In,gte:()=>Fn,has:()=>Bn,hasIn:()=>Vn,hasPath:()=>Nn,head:()=>Kt,identical:()=>Hn,identity:()=>Qt,ifElse:()=>Wn,inc:()=>zn,includes:()=>qn,indexBy:()=>Gn,indexOf:()=>$n,init:()=>Xn,innerJoin:()=>Yn,insert:()=>Kn,insertAll:()=>Jn,intersection:()=>nr,intersperse:()=>rr,into:()=>cr,invert:()=>hr,invertObj:()=>pr,invoker:()=>fr,is:()=>gr,isEmpty:()=>mr,isNil:()=>yt,join:()=>yr,juxt:()=>vr,keys:()=>q,keysIn:()=>_r,last:()=>rn,lastIndexOf:()=>Ar,length:()=>wr,lens:()=>xr,lensIndex:()=>Er,lensPath:()=>Mr,lensProp:()=>kr,lift:()=>Et,liftN:()=>Pt,lt:()=>Rr,lte:()=>Or,map:()=>G,mapAccum:()=>Lr,mapAccumRight:()=>Dr,mapObjIndexed:()=>Ir,match:()=>Fr,mathMod:()=>Nr,max:()=>x,maxBy:()=>jr,mean:()=>Ur,median:()=>Vr,memoizeWith:()=>Hr,mergeAll:()=>Wr,mergeDeepLeft:()=>Gr,mergeDeepRight:()=>$r,mergeDeepWith:()=>Xr,mergeDeepWithKey:()=>qr,mergeLeft:()=>Yr,mergeRight:()=>Kr,mergeWith:()=>Jr,mergeWithKey:()=>zr,min:()=>Qr,minBy:()=>Zr,modify:()=>ri,modifyPath:()=>ei,modulo:()=>ii,move:()=>si,multiply:()=>ai,nAry:()=>St,negate:()=>li,none:()=>ci,not:()=>Vt,nth:()=>X,nthArg:()=>ui,o:()=>hi,objOf:()=>sr,of:()=>pi,omit:()=>gi,on:()=>mi,once:()=>yi,or:()=>cn,otherwise:()=>bi,over:()=>Si,pair:()=>wi,partial:()=>Pi,partialObject:()=>oi,partialRight:()=>Ei,partition:()=>Ci,path:()=>Tr,pathEq:()=>Ti,pathOr:()=>Mi,pathSatisfies:()=>ki,paths:()=>Cr,pick:()=>Ri,pickAll:()=>Oi,pickBy:()=>Di,pipe:()=>$t,pipeWith:()=>Zt,pluck:()=>K,prepend:()=>Ii,product:()=>Fi,project:()=>ji,promap:()=>Vi,prop:()=>Y,propEq:()=>Hi,propIs:()=>zi,propOr:()=>qi,propSatisfies:()=>Gi,props:()=>$i,range:()=>Xi,reduce:()=>J,reduceBy:()=>Me,reduceRight:()=>Yi,reduceWhile:()=>Ki,reduced:()=>Ji,reject:()=>ye,remove:()=>Be,repeat:()=>Zi,replace:()=>ts,reverse:()=>Xt,scan:()=>es,sequence:()=>rs,set:()=>ss,slice:()=>qt,sort:()=>os,sortBy:()=>ls,sortWith:()=>cs,split:()=>us,splitAt:()=>hs,splitEvery:()=>ds,splitWhen:()=>ps,splitWhenever:()=>fs,startsWith:()=>gs,subtract:()=>ms,sum:()=>Br,symmetricDifference:()=>ys,symmetricDifferenceWith:()=>vs,tail:()=>Gt,take:()=>Xe,takeLast:()=>pn,takeLastWhile:()=>bs,takeWhile:()=>As,tap:()=>ws,test:()=>xs,thunkify:()=>ya,times:()=>Qi,toLower:()=>Es,toPairs:()=>Ts,toPairsIn:()=>ks,toString:()=>be,toUpper:()=>Rs,transduce:()=>Os,transpose:()=>Ls,traverse:()=>Is,trim:()=>Ns,tryCatch:()=>js,type:()=>It,unapply:()=>Bs,unary:()=>Us,uncurryN:()=>Vs,unfold:()=>Ws,union:()=>zs,unionWith:()=>$s,uniq:()=>er,uniqBy:()=>tr,uniqWith:()=>Gs,unless:()=>Xs,unnest:()=>Ys,until:()=>Js,unwind:()=>Qs,update:()=>Pr,useWith:()=>Ni,values:()=>ht,valuesIn:()=>ta,view:()=>ra,when:()=>ia,where:()=>aa,whereAny:()=>la,whereEq:()=>ca,without:()=>ua,xor:()=>ha,xprod:()=>da,zip:()=>pa,zipObj:()=>ga,zipWith:()=>ma});const r=function(){return!1};const i=function(){return!0},s={"@@functional/placeholder":!0};function a(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function o(t){return function e(n){return 0===arguments.length||a(n)?e:t.apply(this,arguments)}}function l(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return a(n)?e:o((function(e){return t(n,e)}));default:return a(n)&&a(r)?e:a(n)?o((function(e){return t(e,r)})):a(r)?o((function(e){return t(n,e)})):t(n,r)}}}const c=l((function(t,e){return Number(t)+Number(e)}));function u(t,e){var n;e=e||[];var r=(t=t||[]).length,i=e.length,s=[];for(n=0;n<r;)s[s.length]=t[n],n+=1;for(n=0;n<i;)s[s.length]=e[n],n+=1;return s}function h(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,s){return e.apply(this,arguments)};case 6:return function(t,n,r,i,s,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,s,a,o){return e.apply(this,arguments)};case 8:return function(t,n,r,i,s,a,o,l){return e.apply(this,arguments)};case 9:return function(t,n,r,i,s,a,o,l,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,s,a,o,l,c,u){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function d(t,e,n){return function(){for(var r=[],i=0,s=t,o=0;o<e.length||i<arguments.length;){var l;o<e.length&&(!a(e[o])||i>=arguments.length)?l=e[o]:(l=arguments[i],i+=1),r[o]=l,a(l)||(s-=1),o+=1}return s<=0?n.apply(this,r):h(s,d(t,r,n))}}const p=l((function(t,e){return 1===t?o(e):h(t,d(t,[],e))}));const f=o((function(t){return p(t.length,(function(){var e=0,n=arguments[0],r=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var t=n.apply(this,u(arguments,[e,r]));return e+=1,t},t.apply(this,i)}))}));function g(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return a(n)?e:l((function(e,r){return t(n,e,r)}));case 2:return a(n)&&a(r)?e:a(n)?l((function(e,n){return t(e,r,n)})):a(r)?l((function(e,r){return t(n,e,r)})):o((function(e){return t(n,r,e)}));default:return a(n)&&a(r)&&a(i)?e:a(n)&&a(r)?l((function(e,n){return t(e,n,i)})):a(n)&&a(i)?l((function(e,n){return t(e,r,n)})):a(r)&&a(i)?l((function(e,r){return t(n,e,r)})):a(n)?o((function(e){return t(e,r,i)})):a(r)?o((function(e){return t(n,e,i)})):a(i)?o((function(e){return t(n,r,e)})):t(n,r,i)}}}const m=g((function(t,e,n){var r=n.length;if(t>=r||t<-r)return n;var i=(r+t)%r,s=u(n);return s[i]=e(n[i]),s})),y=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function v(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function b(t,e,n){return function(){if(0===arguments.length)return n();var r=arguments[arguments.length-1];if(!y(r)){for(var i=0;i<t.length;){if("function"==typeof r[t[i]])return r[t[i]].apply(r,Array.prototype.slice.call(arguments,0,-1));i+=1}if(v(r)){var s=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(r)}}return n.apply(this,arguments)}}function _(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}const A={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};var S=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=_(this.xf["@@transducer/step"](t,!1))),t},t}();const w=l(b(["all"],l((function(t,e){return new S(t,e)})),(function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0})));const x=l((function(t,e){return e>t?e:t}));function P(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}function E(t){return"[object String]"===Object.prototype.toString.call(t)}const C=o((function(t){return!!y(t)||!!t&&("object"==typeof t&&(!E(t)&&(0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}));var T=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function M(t){return new T(t)}const k=l((function(t,e){return h(t.length,(function(){return t.apply(e,arguments)}))}));function R(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function O(t,e,n,r){return t["@@transducer/result"](n[r](k(t["@@transducer/step"],t),e))}var L="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function D(t,e,n){if("function"==typeof t&&(t=M(t)),C(n))return function(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return O(t,e,n,"fantasy-land/reduce");if(null!=n[L])return R(t,e,n[L]());if("function"==typeof n.next)return R(t,e,n);if("function"==typeof n.reduce)return O(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var I=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}();const F=l((function(t,e){return new I(t,e)}));function N(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var j=Object.prototype.toString;const B=function(){return"[object Arguments]"===j.call(arguments)?function(t){return"[object Arguments]"===j.call(t)}:function(t){return N("callee",t)}}();var U=!{toString:null}.propertyIsEnumerable("toString"),V=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],H=function(){return arguments.propertyIsEnumerable("length")}(),W=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},z="function"!=typeof Object.keys||H?o((function(t){if(Object(t)!==t)return[];var e,n,r=[],i=H&&B(t);for(e in t)!N(e,t)||i&&"length"===e||(r[r.length]=e);if(U)for(n=V.length-1;n>=0;)N(e=V[n],t)&&!W(r,e)&&(r[r.length]=e),n-=1;return r})):o((function(t){return Object(t)!==t?[]:Object.keys(t)}));const q=z;const G=l(b(["fantasy-land/map","map"],F,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return p(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return D((function(n,r){return n[r]=t(e[r]),n}),{},q(e));default:return P(t,e)}}))),$=Number.isInteger||function(t){return t<<0===t};const X=l((function(t,e){var n=t<0?e.length+t:t;return E(e)?e.charAt(n):e[n]}));const Y=l((function(t,e){if(null!=e)return $(t)?X(t,e):e[t]}));const K=l((function(t,e){return G(Y(t),e)}));const J=g(D);const Q=o((function(t){return p(J(x,0,K("length",t)),(function(){for(var e=0,n=t.length;e<n;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0}))}));const Z=o((function(t){return function(){return t}}));const tt=l((function(t,e){return t&&e}));var et=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=_(this.xf["@@transducer/step"](t,!0))),t},t}();const nt=l(b(["any"],l((function(t,e){return new et(t,e)})),(function(t,e){for(var n=0;n<e.length;){if(t(e[n]))return!0;n+=1}return!1})));const rt=o((function(t){return p(J(x,0,K("length",t)),(function(){for(var e=0,n=t.length;e<n;){if(t[e].apply(this,arguments))return!0;e+=1}return!1}))}));const it=l((function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:D((function(t,n){return u(t,G(n,e))}),[],t)}));function st(t,e){for(var n=0,r=e.length-(t-1),i=new Array(r>=0?r:0);n<r;)i[n]=Array.prototype.slice.call(e,n,n+t),n+=1;return i}var at=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.store(e),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return u(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}();const ot=l(b([],l((function(t,e){return new at(t,e)})),st));const lt=l((function(t,e){return u(e,[t])}));const ct=l((function(t,e){return t.apply(this,e)}));var ut=o((function(t){for(var e=q(t),n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r}));const ht=ut;function dt(t,e){return y(e)?e.map(t):q(e).reduce((function(n,r){return n[r]=t(e[r]),n}),{})}const pt=o((function t(e){return e=dt((function(e){return"function"==typeof e?e:t(e)}),e),p(J(x,0,K("length",ht(e))),(function(){var t=arguments;return dt((function(e){return ct(e,t)}),e)}))}));const ft=l((function(t,e){return e(t)}));const gt=g((function(t,e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0}));function mt(t,e,n){if($(t)&&y(n)){var r=[].concat(n);return r[t]=e,r}var i={};for(var s in n)i[s]=n[s];return i[t]=e,i}const yt=o((function(t){return null==t}));var vt=g((function t(e,n,r){if(0===e.length)return n;var i=e[0];if(e.length>1){var s=!yt(r)&&N(i,r)?r[i]:$(e[1])?[]:{};n=t(Array.prototype.slice.call(e,1),n,s)}return mt(i,n,r)}));const bt=vt;var _t=g((function(t,e,n){return bt([t],e,n)}));const At=_t;const St=l((function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,i){return e.call(this,t,n,r,i)};case 5:return function(t,n,r,i,s){return e.call(this,t,n,r,i,s)};case 6:return function(t,n,r,i,s,a){return e.call(this,t,n,r,i,s,a)};case 7:return function(t,n,r,i,s,a,o){return e.call(this,t,n,r,i,s,a,o)};case 8:return function(t,n,r,i,s,a,o,l){return e.call(this,t,n,r,i,s,a,o,l)};case 9:return function(t,n,r,i,s,a,o,l,c){return e.call(this,t,n,r,i,s,a,o,l,c)};case 10:return function(t,n,r,i,s,a,o,l,c,u){return e.call(this,t,n,r,i,s,a,o,l,c,u)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}));const wt=o((function(t){return St(2,t)}));function xt(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e}const Pt=l((function(t,e){var n=p(t,e);return p(t,(function(){return D(it,G(n,arguments[0]),Array.prototype.slice.call(arguments,1))}))}));const Et=o((function(t){return Pt(t.length,t)}));const Ct=l((function(t,e){return xt(t)?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:Et(tt)(t,e)}));const Tt=o((function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))}));function Mt(t){return function e(n){for(var r,i,s,a=[],o=0,l=n.length;o<l;){if(C(n[o]))for(s=0,i=(r=t?e(n[o]):n[o]).length;s<i;)a[a.length]=r[s],s+=1;else a[a.length]=n[o];o+=1}return a}}const kt=function(t){var e=function(t){return{"@@transducer/init":A.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":A.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){return C(n)?D(e,t,n):D(e,t,[n])}}};const Rt=l(b(["fantasy-land/chain","chain"],l((function(t,e){return G(t,kt(e))})),(function(t,e){return"function"==typeof e?function(n){return t(e(n))(n)}:Mt(!1)(G(t,e))})));var Ot=g((function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n}));const Lt=Ot;function Dt(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}const It=o((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function Ft(t,e,n,r){var i=function(i){for(var s=e.length,a=0;a<s;){if(t===e[a])return n[a];a+=1}for(var o in e[a]=t,n[a]=i,t)t.hasOwnProperty(o)&&(i[o]=r?Ft(t[o],e,n,!0):t[o]);return i};switch(It(t)){case"Object":return i(Object.create(Object.getPrototypeOf(t)));case"Array":return i([]);case"Date":return new Date(t.valueOf());case"RegExp":return Dt(t);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}const Nt=o((function(t){return null!=t&&"function"==typeof t.clone?t.clone():Ft(t,[],[],!0)}));var jt=l((function(t,e){var n=D((function(e,n){var r=t(n);return void 0===e[r]&&(e[r]=[]),e[r].push(n),e}),{},e),r=[];for(var i in n)r.push(n[i]);return r}));const Bt=jt;const Ut=o((function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}}));const Vt=o((function(t){return!t}));const Ht=Et(Vt);function Wt(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function zt(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return y(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}const qt=g(zt("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)})));const Gt=o(zt("tail",qt(1,1/0)));function $t(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return h(arguments[0].length,J(Wt,arguments[0],Gt(arguments)))}const Xt=o((function(t){return E(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function Yt(){if(0===arguments.length)throw new Error("compose requires at least one argument");return $t.apply(this,Xt(arguments))}const Kt=X(0);function Jt(t){return t}const Qt=o(Jt);const Zt=l((function(t,e){if(e.length<=0)return Qt;var n=Kt(e),r=Gt(e);return h(n.length,(function(){return D((function(e,n){return t.call(this,n,e)}),n.apply(this,arguments),r)}))}));const te=l((function(t,e){return Zt.apply(this,[t,Xt(e)])}));function ee(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function ne(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1}const re="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function ie(t,e,n,r){var i=ee(t);function s(t,e){return se(t,e,n.slice(),r.slice())}return!ne((function(t,e){return!ne(s,e,t)}),ee(e),i)}function se(t,e,n,r){if(re(t,e))return!0;var i=It(t);if(i!==It(e))return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!re(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!re(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var s=n.length-1;s>=0;){if(n[s]===t)return r[s]===e;s-=1}switch(i){case"Map":return t.size===e.size&&ie(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&ie(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=q(t);if(a.length!==q(e).length)return!1;var o=n.concat([t]),l=r.concat([e]);for(s=a.length-1;s>=0;){var c=a[s];if(!N(c,e)||!se(e[c],t[c],o,l))return!1;s-=1}return!0}const ae=l((function(t,e){return se(t,e,[],[])}));function oe(t,e,n){var r,i;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(i=t[n])&&1/i===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(i=t[n])&&i!=i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(ae(t[n],e))return n;n+=1}return-1}function le(t,e){return oe(e,t,0)>=0}function ce(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var ue=function(t){return(t<10?"0":"")+t};const he="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+ue(t.getUTCMonth()+1)+"-"+ue(t.getUTCDate())+"T"+ue(t.getUTCHours())+":"+ue(t.getUTCMinutes())+":"+ue(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function de(t){return function(){return!t.apply(this,arguments)}}function pe(t,e){for(var n=0,r=e.length,i=[];n<r;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i}function fe(t){return"[object Object]"===Object.prototype.toString.call(t)}var ge=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}();const me=l(b(["fantasy-land/filter","filter"],l((function(t,e){return new ge(t,e)})),(function(t,e){return fe(e)?D((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},q(e)):pe(t,e)})));const ye=l((function(t,e){return me(de(t),e)}));function ve(t,e){var n=function(n){var r=e.concat([t]);return le(n,r)?"<Circular>":ve(n,r)},r=function(t,e){return P((function(e){return ce(e)+": "+n(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+P(n,t).join(", ")+"))";case"[object Array]":return"["+P(n,t).concat(r(t,ye((function(t){return/^\d+$/.test(t)}),q(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):ce(he(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+n(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+n(t.valueOf())+")":ce(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var i=t.toString();if("[object Object]"!==i)return i}return"{"+r(t,q(t)).join(", ")+"}"}}const be=o((function(t){return ve(t,[])}));const _e=l((function(t,e){if(y(t)){if(y(e))return t.concat(e);throw new TypeError(be(e)+" is not an array")}if(E(t)){if(E(e))return t+e;throw new TypeError(be(e)+" is not a string")}if(null!=t&&xt(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&xt(t.concat))return t.concat(e);throw new TypeError(be(t)+' does not have a method named "concat" or "fantasy-land/concat"')}));var Ae=o((function(t){var e=J(x,0,G((function(t){return t[0].length}),t));return h(e,(function(){for(var e=0;e<t.length;){if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments);e+=1}}))}));const Se=Ae;const we=o((function(t){return p(t.length,t)}));const xe=l((function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:we(St(t,(function(t,n,r,i,s,a,o,l,c,u){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);case 4:return new e(t,n,r,i);case 5:return new e(t,n,r,i,s);case 6:return new e(t,n,r,i,s,a);case 7:return new e(t,n,r,i,s,a,o);case 8:return new e(t,n,r,i,s,a,o,l);case 9:return new e(t,n,r,i,s,a,o,l,c);case 10:return new e(t,n,r,i,s,a,o,l,c,u)}})))}));const Pe=o((function(t){return xe(t.length,t)}));const Ee=l((function(t,e){return p(J(x,0,K("length",e)),(function(){var n=arguments,r=this;return t.apply(r,P((function(t){return t.apply(r,n)}),e))}))}));const Ce=we((function(t,e){return D((function(e,n){return t(n)?e+1:e}),0,e)}));var Te=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(N(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}();const Me=d(4,[],b([],d(4,[],(function(t,e,n,r){return new Te(t,e,n,r)})),(function(t,e,n,r){return D((function(r,i){var s=n(i),a=t(N(s,r)?r[s]:Ft(e,[],[],!1),i);return a&&a["@@transducer/reduced"]?_(r):(r[s]=a,r)}),{},r)})));const ke=Me((function(t,e){return t+1}),0);const Re=c(-1);const Oe=l((function(t,e){return null==e||e!=e?t:e}));const Le=g((function(t,e,n){var r=t(e),i=t(n);return r>i?-1:r<i?1:0}));function De(t,e,n){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!n._items["-0"]||(e&&(n._items["-0"]=!0),!1):null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?t in n._items[i]||(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var s=t?1:0;return!!n._items[i][s]||(e&&(n._items[i][s]=!0),!1)}return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?!!le(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return!!n._items[i]||(e&&(n._items[i]=!0),!1);case"object":if(null===t)return!!n._items.null||(e&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in n._items?!!le(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}const Ie=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!De(t,!0,this)},t.prototype.has=function(t){return De(t,!1,this)},t}();const Fe=l((function(t,e){for(var n=[],r=0,i=t.length,s=e.length,a=new Ie,o=0;o<s;o+=1)a.add(e[o]);for(;r<i;)a.add(t[r])&&(n[n.length]=t[r]),r+=1;return n}));const Ne=g((function(t,e,n){for(var r=[],i=0,s=e.length;i<s;)ne(t,e[i],n)||ne(t,e[i],r)||r.push(e[i]),i+=1;return r}));var je=g((function(t,e,n){var r=Array.prototype.slice.call(n,0);return r.splice(t,e),r}));const Be=je;var Ue=l((function t(e,n){if(null==n)return n;switch(e.length){case 0:return n;case 1:return function(t,e){if(null==e)return e;if($(t)&&y(e))return Be(t,1,e);var n={};for(var r in e)n[r]=e[r];return delete n[t],n}(e[0],n);default:var r=e[0],i=Array.prototype.slice.call(e,1);return null==n[r]?function(t,e){if($(t)&&y(e))return[].concat(e);var n={};for(var r in e)n[r]=e[r];return n}(r,n):At(r,t(i,n[r]),n)}}));const Ve=Ue;var He=l((function(t,e){return Ve([t],e)}));const We=He;const ze=l((function(t,e){return t/e}));var qe=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},t}();const Ge=l(b(["drop"],l((function(t,e){return new qe(t,e)})),(function(t,e){return qt(Math.max(0,t),1/0,e)})));var $e=function(){function t(t,e){this.xf=e,this.n=t,this.i=0}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){this.i+=1;var n=0===this.n?t:this.xf["@@transducer/step"](t,e);return this.n>=0&&this.i>=this.n?_(n):n},t}();const Xe=l(b(["take"],l((function(t,e){return new $e(t,e)})),(function(t,e){return qt(0,t<0?1/0:t,e)})));function Ye(t,e){return Xe(t<e.length?e.length-t:0,e)}var Ke=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(e),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}();const Je=l(b([],l((function(t,e){return new Ke(t,e)})),Ye));function Qe(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return qt(0,n+1,e)}var Ze=function(){function t(t,e){this.f=t,this.retained=[],this.xf=e}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.retain(t,e):this.flush(t,e)},t.prototype.flush=function(t,e){return t=D(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,e)},t.prototype.retain=function(t,e){return this.retained.push(e),t},t}();const tn=l(b([],l((function(t,e){return new Ze(t,e)})),Qe));var en=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(n=!0):this.seenFirstValue=!0,this.lastValue=e,n?t:this.xf["@@transducer/step"](t,e)},t}();const nn=l((function(t,e){return new en(t,e)}));const rn=X(-1);const sn=l(b([],nn,(function(t,e){var n=[],r=1,i=e.length;if(0!==i)for(n[0]=e[0];r<i;)t(rn(n),e[r])||(n[n.length]=e[r]),r+=1;return n})));const an=o(b([],nn(ae),sn(ae)));var on=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},t}();const ln=l(b(["dropWhile"],l((function(t,e){return new on(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return qt(n,1/0,e)})));const cn=l((function(t,e){return t||e}));const un=l((function(t,e){return xt(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:Et(cn)(t,e)}));var hn=o((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():y(t)?[]:E(t)?"":fe(t)?{}:B(t)?function(){return arguments}():function(t){var e=Object.prototype.toString.call(t);return"[object Uint8ClampedArray]"===e||"[object Int8Array]"===e||"[object Uint8Array]"===e||"[object Int16Array]"===e||"[object Uint16Array]"===e||"[object Int32Array]"===e||"[object Uint32Array]"===e||"[object Float32Array]"===e||"[object Float64Array]"===e||"[object BigInt64Array]"===e||"[object BigUint64Array]"===e}(t)?t.constructor.from(""):void 0}));const dn=hn;const pn=l((function(t,e){return Ge(t>=0?e.length-t:0,e)}));const fn=l((function(t,e){return ae(pn(t.length,e),t)}));const gn=g((function(t,e,n){return ae(t(e),t(n))}));var mn=g((function(t,e,n){return ae(e[t],n[t])}));const yn=mn;var vn=l((function t(e,n){if(!fe(n)&&!y(n))return n;var r,i,s,a=n instanceof Array?[]:{};for(i in n)s=typeof(r=e[i]),a[i]="function"===s?r(n[i]):r&&"object"===s?t(r,n[i]):n[i];return a}));const bn=vn;var _n=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=_(this.xf["@@transducer/step"](t,e))),t},t}();const An=l(b(["find"],l((function(t,e){return new _n(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return e[n];n+=1}})));var Sn=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=_(this.xf["@@transducer/step"](t,this.idx))),t},t}();const wn=l(b([],l((function(t,e){return new Sn(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1})));var xn=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},t}();const Pn=l(b([],l((function(t,e){return new xn(t,e)})),(function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return e[n];n-=1}})));var En=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},t}();const Cn=l(b([],l((function(t,e){return new En(t,e)})),(function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return n;n-=1}return-1})));const Tn=o(Mt(!0));const Mn=o((function(t){return p(t.length,(function(e,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=e,t.apply(this,r)}))}));const kn=l(zt("forEach",(function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e})));const Rn=l((function(t,e){for(var n=q(e),r=0;r<n.length;){var i=n[r];t(e[i],i,e),r+=1}return e}));const On=o((function(t){for(var e={},n=0;n<t.length;)e[t[n][0]]=t[n][1],n+=1;return e}));const Ln=l(zt("groupBy",Me((function(t,e){return t.push(e),t}),[])));const Dn=l((function(t,e){for(var n=[],r=0,i=e.length;r<i;){for(var s=r+1;s<i&&t(e[s-1],e[s]);)s+=1;n.push(e.slice(r,s)),r=s}return n}));const In=l((function(t,e){return t>e}));const Fn=l((function(t,e){return t>=e}));const Nn=l((function(t,e){if(0===t.length||yt(e))return!1;for(var n=e,r=0;r<t.length;){if(yt(n)||!N(t[r],n))return!1;n=n[t[r]],r+=1}return!0}));var jn=l((function(t,e){return Nn([t],e)}));const Bn=jn;var Un=l((function(t,e){return!yt(e)&&t in e}));const Vn=Un;const Hn=l(re);const Wn=g((function(t,e,n){return p(Math.max(t.length,e.length,n.length),(function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)}))}));const zn=c(1);const qn=l(le);const Gn=Me((function(t,e){return e}),null);const $n=l((function(t,e){return"function"!=typeof e.indexOf||y(e)?oe(e,t,0):e.indexOf(t)}));const Xn=qt(0,-1);const Yn=g((function(t,e,n){return pe((function(e){return ne(t,e,n)}),e)}));const Kn=g((function(t,e,n){t=t<n.length&&t>=0?t:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(t,0,e),r}));const Jn=g((function(t,e,n){return t=t<n.length&&t>=0?t:n.length,[].concat(Array.prototype.slice.call(n,0,t),e,Array.prototype.slice.call(n,t))}));var Qn=function(){function t(t,e){this.xf=e,this.f=t,this.set=new Ie}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return this.set.add(this.f(e))?this.xf["@@transducer/step"](t,e):t},t}();var Zn=l(b([],l((function(t,e){return new Qn(t,e)})),(function(t,e){for(var n,r,i=new Ie,s=[],a=0;a<e.length;)n=t(r=e[a]),i.add(n)&&s.push(r),a+=1;return s})));const tr=Zn;const er=tr(Qt);const nr=l((function(t,e){var n,r;return t.length>e.length?(n=t,r=e):(n=e,r=t),er(pe(Mn(le)(n),r))}));const rr=l(zt("intersperse",(function(t,e){for(var n=[],r=0,i=e.length;r<i;)r===i-1?n.push(e[r]):n.push(e[r],t),r+=1;return n})));const ir="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var s in i)N(s,i)&&(e[s]=i[s]);n+=1}return e};const sr=l((function(t,e){var n={};return n[t]=e,n}));var ar={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":Jt},or={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":Jt},lr={"@@transducer/init":Object,"@@transducer/step":function(t,e){return ir(t,C(e)?sr(e[0],e[1]):e)},"@@transducer/result":Jt};const cr=g((function(t,e,n){return v(t)?D(e(t),t["@@transducer/init"](),n):D(e(function(t){if(v(t))return t;if(C(t))return ar;if("string"==typeof t)return or;if("object"==typeof t)return lr;throw new Error("Cannot create transformer for "+t)}(t)),Ft(t,[],[],!1),n)}));var ur=o((function(t){for(var e=q(t),n=e.length,r=0,i={};r<n;){var s=e[r],a=t[s],o=N(a,i)?i[a]:i[a]=[];o[o.length]=s,r+=1}return i}));const hr=ur;var dr=o((function(t){for(var e=q(t),n=e.length,r=0,i={};r<n;){var s=e[r];i[t[s]]=s,r+=1}return i}));const pr=dr;const fr=l((function(t,e){return p(t+1,(function(){var n=arguments[t];if(null!=n&&xt(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(be(n)+' does not have a method named "'+e+'"')}))}));const gr=l((function(t,e){return e instanceof t||null!=e&&(e.constructor===t||"Object"===t.name&&"object"==typeof e)}));const mr=o((function(t){return null!=t&&ae(t,dn(t))}));const yr=fr(1,"join");const vr=o((function(t){return Ee((function(){return Array.prototype.slice.call(arguments,0)}),t)}));var br=o((function(t){var e,n=[];for(e in t)n[n.length]=e;return n}));const _r=br;const Ar=l((function(t,e){if("function"!=typeof e.lastIndexOf||y(e)){for(var n=e.length-1;n>=0;){if(ae(e[n],t))return n;n-=1}return-1}return e.lastIndexOf(t)}));function Sr(t){return"[object Number]"===Object.prototype.toString.call(t)}const wr=o((function(t){return null!=t&&Sr(t.length)?t.length:NaN}));const xr=l((function(t,e){return function(n){return function(r){return G((function(t){return e(t,r)}),n(t(r)))}}}));const Pr=g((function(t,e,n){return m(t,Z(e),n)}));const Er=o((function(t){return xr(X(t),Pr(t))}));const Cr=l((function(t,e){return t.map((function(t){for(var n,r=e,i=0;i<t.length;){if(null==r)return;n=t[i],r=$(n)?X(n,r):r[n],i+=1}return r}))}));const Tr=l((function(t,e){return Cr([t],e)[0]}));const Mr=o((function(t){return xr(Tr(t),bt(t))}));const kr=o((function(t){return xr(Y(t),At(t))}));const Rr=l((function(t,e){return t<e}));const Or=l((function(t,e){return t<=e}));const Lr=g((function(t,e,n){for(var r=0,i=n.length,s=[],a=[e];r<i;)a=t(a[0],n[r]),s[r]=a[1],r+=1;return[a[0],s]}));const Dr=g((function(t,e,n){for(var r=n.length-1,i=[],s=[e];r>=0;)s=t(s[0],n[r]),i[r]=s[1],r-=1;return[s[0],i]}));const Ir=l((function(t,e){return D((function(n,r){return n[r]=t(e[r],r,e),n}),{},q(e))}));const Fr=l((function(t,e){return e.match(t)||[]}));const Nr=l((function(t,e){return $(t)?!$(e)||e<1?NaN:(t%e+e)%e:NaN}));const jr=g((function(t,e,n){return t(n)>t(e)?n:e}));const Br=J(c,0);const Ur=o((function(t){return Br(t)/t.length}));const Vr=o((function(t){var e=t.length;if(0===e)return NaN;var n=2-e%2,r=(e-n)/2;return Ur(Array.prototype.slice.call(t,0).sort((function(t,e){return t<e?-1:t>e?1:0})).slice(r,r+n))}));const Hr=l((function(t,e){var n={};return h(e.length,(function(){var r=t.apply(this,arguments);return N(r,n)||(n[r]=e.apply(this,arguments)),n[r]}))}));const Wr=o((function(t){return ir.apply(null,[{}].concat(t))}));const zr=g((function(t,e,n){var r,i={};for(r in e)N(r,e)&&(i[r]=N(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)N(r,n)&&!N(r,i)&&(i[r]=n[r]);return i}));const qr=g((function t(e,n,r){return zr((function(n,r,i){return fe(r)&&fe(i)?t(e,r,i):e(n,r,i)}),n,r)}));const Gr=l((function(t,e){return qr((function(t,e,n){return e}),t,e)}));const $r=l((function(t,e){return qr((function(t,e,n){return n}),t,e)}));const Xr=g((function(t,e,n){return qr((function(e,n,r){return t(n,r)}),e,n)}));const Yr=l((function(t,e){return ir({},e,t)}));const Kr=l((function(t,e){return ir({},t,e)}));const Jr=g((function(t,e,n){return zr((function(e,n,r){return t(n,r)}),e,n)}));const Qr=l((function(t,e){return e<t?e:t}));const Zr=g((function(t,e,n){return t(n)<t(e)?n:e}));var ti=g((function t(e,n,r){if(!fe(r)&&!y(r)||0===e.length)return r;var i=e[0];if(!N(i,r))return r;if(1===e.length)return function(t,e,n){if($(t)&&y(n)){var r=[].concat(n);return r[t]=e(r[t]),r}var i={};for(var s in n)i[s]=n[s];return i[t]=e(i[t]),i}(i,n,r);var s=t(Array.prototype.slice.call(e,1),n,r[i]);return s===r[i]?r:mt(i,s,r)}));const ei=ti;var ni=g((function(t,e,n){return ei([t],e,n)}));const ri=ni;const ii=l((function(t,e){return t%e}));const si=g((function(t,e,n){var r=n.length,i=n.slice(),s=t<0?r+t:t,a=e<0?r+e:e,o=i.splice(s,1);return s<0||s>=n.length||a<0||a>=n.length?n:[].concat(i.slice(0,a)).concat(o).concat(i.slice(a,n.length))}));const ai=l((function(t,e){return t*e})),oi=l(((t,e)=>n=>t.call(void 0,$r(e,n))));const li=o((function(t){return-t}));const ci=l((function(t,e){return w(de(t),e)}));const ui=o((function(t){return p(t<0?1:t+1,(function(){return X(t,arguments)}))}));const hi=g((function(t,e,n){return t(e(n))}));function di(t){return[t]}const pi=o(di);var fi=l((function(t,e){for(var n={},r={},i=0,s=t.length;i<s;)r[t[i]]=1,i+=1;for(var a in e)r.hasOwnProperty(a)||(n[a]=e[a]);return n}));const gi=fi;const mi=d(4,[],(function(t,e,n,r){return t(e(n),e(r))}));const yi=o((function(t){var e,n=!1;return h(t.length,(function(){return n?e:(n=!0,e=t.apply(this,arguments))}))}));function vi(t,e){if(null==e||!xt(e.then))throw new TypeError("`"+t+"` expected a Promise, received "+ve(e,[]))}const bi=l((function(t,e){return vi("otherwise",e),e.then(null,t)}));var _i=function(t){return{value:t,map:function(e){return _i(e(t))}}},Ai=g((function(t,e,n){return t((function(t){return _i(e(t))}))(n).value}));const Si=Ai;const wi=l((function(t,e){return[t,e]}));function xi(t){return l((function(e,n){return h(Math.max(0,e.length-n.length),(function(){return e.apply(this,t(n,arguments))}))}))}const Pi=xi(u);const Ei=xi(Mn(u));const Ci=vr([me,ye]);const Ti=g((function(t,e,n){return ae(Tr(t,n),e)}));const Mi=g((function(t,e,n){return Oe(t,Tr(e,n))}));const ki=g((function(t,e,n){return t(Tr(e,n))}));const Ri=l((function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n}));const Oi=l((function(t,e){for(var n={},r=0,i=t.length;r<i;){var s=t[r];n[s]=e[s],r+=1}return n}));var Li=l((function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}));const Di=Li;const Ii=l((function(t,e){return u([t],e)}));const Fi=J(ai,1);const Ni=l((function(t,e){return p(e.length,(function(){for(var n=[],r=0;r<e.length;)n.push(e[r].call(this,arguments[r])),r+=1;return t.apply(this,n.concat(Array.prototype.slice.call(arguments,e.length)))}))}));const ji=Ni(P,[Oi,Qt]);function Bi(t,e,n){return function(r){return e(n(t(r)))}}var Ui=function(){function t(t,e,n){this.xf=n,this.f=t,this.g=e}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,Bi(this.f,this.g,e))},t}();const Vi=g(b(["fantasy-land/promap","promap"],g((function(t,e,n){return new Ui(t,e,n)})),Bi));const Hi=g((function(t,e,n){return ae(e,Y(t,n))}));var Wi=g((function(t,e,n){return gr(t,Y(e,n))}));const zi=Wi;const qi=g((function(t,e,n){return Oe(t,Y(e,n))}));const Gi=g((function(t,e,n){return t(Y(e,n))}));const $i=l((function(t,e){return t.map((function(t){return Tr([t],e)}))}));const Xi=l((function(t,e){if(!Sr(t)||!Sr(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n}));const Yi=g((function(t,e,n){for(var r=n.length-1;r>=0;){if((e=t(n[r],e))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r-=1}return e}));const Ki=d(4,[],(function(t,e,n,r){return D((function(n,r){return t(n,r)?e(n,r):_(n)}),n,r)}));const Ji=o(_);const Qi=l((function(t,e){var n,r=Number(e),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=t(i),i+=1;return n}));const Zi=l((function(t,e){return Qi(Z(t),e)}));const ts=g((function(t,e,n){return n.replace(t,e)}));const es=g((function(t,e,n){for(var r=0,i=n.length,s=[e];r<i;)e=t(e,n[r]),s[r+1]=e,r+=1;return s}));var ns=l((function(t,e){return"function"==typeof e.sequence?e.sequence(t):Yi((function(t,e){return it(G(Ii,t),e)}),t([]),e)}));const rs=ns;var is=g((function(t,e,n){return Si(t,Z(e),n)}));const ss=is;var as=l((function(t,e){return Array.prototype.slice.call(e,0).sort(t)}));const os=as;const ls=l((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0}))}));const cs=l((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){for(var r=0,i=0;0===r&&i<t.length;)r=t[i](e,n),i+=1;return r}))}));const us=fr(1,"split");const hs=l((function(t,e){return[qt(0,t,e),qt(t,wr(e),e)]}));const ds=l((function(t,e){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<e.length;)n.push(qt(r,r+=t,e));return n}));const ps=l((function(t,e){for(var n=0,r=e.length,i=[];n<r&&!t(e[n]);)i.push(e[n]),n+=1;return[i,Array.prototype.slice.call(e,n)]}));const fs=d(2,[],(function(t,e){for(var n=[],r=[],i=0;i<e.length;i+=1)t(e[i])||r.push(e[i]),(i<e.length-1&&t(e[i+1])||i===e.length-1)&&r.length>0&&(n.push(r),r=[]);return n}));const gs=l((function(t,e){return ae(Xe(t.length,e),t)}));const ms=l((function(t,e){return Number(t)-Number(e)}));const ys=l((function(t,e){return _e(Fe(t,e),Fe(e,t))}));const vs=g((function(t,e,n){return _e(Ne(t,e,n),Ne(t,n,e))}));const bs=l((function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return qt(n+1,1/0,e)}));var _s=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):_(t)},t}();const As=l(b(["takeWhile"],l((function(t,e){return new _s(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return qt(0,n,e)})));var Ss=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e),this.xf["@@transducer/step"](t,e)},t}();const ws=l(b([],l((function(t,e){return new Ss(t,e)})),(function(t,e){return t(e),e})));const xs=l((function(t,e){if(n=t,"[object RegExp]"!==Object.prototype.toString.call(n))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+be(t));var n;return Dt(t).test(e)}));const Ps=l((function(t,e){return vi("andThen",e),e.then(t)}));const Es=fr(0,"toLowerCase");var Cs=o((function(t){var e=[];for(var n in t)N(n,t)&&(e[e.length]=[n,t[n]]);return e}));const Ts=Cs;var Ms=o((function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e}));const ks=Ms;const Rs=fr(0,"toUpperCase");const Os=p(4,(function(t,e,n,r){return D(t("function"==typeof e?M(e):e),n,r)}));const Ls=o((function(t){for(var e=0,n=[];e<t.length;){for(var r=t[e],i=0;i<r.length;)void 0===n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;e+=1}return n}));var Ds=g((function(t,e,n){return"function"==typeof n["fantasy-land/traverse"]?n["fantasy-land/traverse"](e,t):"function"==typeof n.traverse?n.traverse(e,t):rs(t,G(e,n))}));const Is=Ds;var Fs="\t\n\v\f\r                　\u2028\u2029\ufeff";const Ns=o("function"==typeof String.prototype.trim&&!Fs.trim()&&"​".trim()?function(t){return t.trim()}:function(t){var e=new RegExp("^["+Fs+"]["+Fs+"]*"),n=new RegExp("["+Fs+"]["+Fs+"]*$");return t.replace(e,"").replace(n,"")});const js=l((function(t,e){return h(t.length,(function(){try{return t.apply(this,arguments)}catch(t){return e.apply(this,u([t],arguments))}}))}));const Bs=o((function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}}));const Us=o((function(t){return St(1,t)}));const Vs=l((function(t,e){return p(t,(function(){for(var n,r=1,i=e,s=0;r<=t&&"function"==typeof i;)n=r===t?arguments.length:s+i.length,i=i.apply(this,Array.prototype.slice.call(arguments,s,n)),r+=1,s=n;return i}))}));var Hs=l((function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r}));const Ws=Hs;const zs=l(Yt(er,u));var qs=function(){function t(t,e){this.xf=e,this.pred=t,this.items=[]}return t.prototype["@@transducer/init"]=A.init,t.prototype["@@transducer/result"]=A.result,t.prototype["@@transducer/step"]=function(t,e){return ne(this.pred,e,this.items)?t:(this.items.push(e),this.xf["@@transducer/step"](t,e))},t}();const Gs=l(b([],l((function(t,e){return new qs(t,e)})),(function(t,e){for(var n,r=0,i=e.length,s=[];r<i;)ne(t,n=e[r],s)||(s[s.length]=n),r+=1;return s})));const $s=g((function(t,e,n){return Gs(t,u(e,n))}));const Xs=g((function(t,e,n){return t(n)?n:e(n)}));const Ys=Rt(Jt);var Ks=g((function(t,e,n){for(var r=n;!t(r);)r=e(r);return r}));const Js=Ks;const Qs=l((function(t,e){return t in e&&y(e[t])?P((function(n){return mt(t,n,e)}),e[t]):[e]}));var Zs=o((function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n}));const ta=Zs;var ea=function(t){return{value:t,"fantasy-land/map":function(){return this}}},na=l((function(t,e){return t(ea)(e).value}));const ra=na;const ia=g((function(t,e,n){return t(n)?e(n):n}));var sa=l((function(t,e){for(var n in t)if(N(n,t)&&!t[n](e[n]))return!1;return!0}));const aa=sa;var oa=l((function(t,e){for(var n in t)if(N(n,t)&&t[n](e[n]))return!0;return!1}));const la=oa;const ca=l((function(t,e){return aa(G(ae,t),e)}));const ua=l((function(t,e){return ye(Mn(le)(t),e)}));const ha=l((function(t,e){return Boolean(!t^!e)}));const da=l((function(t,e){for(var n,r=0,i=t.length,s=e.length,a=[];r<i;){for(n=0;n<s;)a[a.length]=[t[r],e[n]],n+=1;r+=1}return a}));const pa=l((function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);r<i;)n[r]=[t[r],e[r]],r+=1;return n}));var fa=l((function(t,e){for(var n=0,r=Math.min(t.length,e.length),i={};n<r;)i[t[n]]=e[n],n+=1;return i}));const ga=fa;const ma=g((function(t,e,n){for(var r=[],i=0,s=Math.min(e.length,n.length);i<s;)r[i]=t(e[i],n[i]),i+=1;return r}));const ya=o((function(t){return p(t.length,(function(){var e=arguments;return function(){return t.apply(this,e)}}))}))}}]);
//# sourceMappingURL=async-DashAnnotator.js.map