"use strict";(self.webpackChunkdash_annotator=self.webpackChunkdash_annotator||[]).push([[432],{4505:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(9196),o=n.n(r),i=(n(9064),n(9719)),c=n(2723),u=n(1068),a=n(3574);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var f=["data_type"];function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(l,e);var t,n,r,i=d(l);function l(){var e;p(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(v(e=i.call.apply(i,[this].concat(n))),"_annotators",{pdf:c.default,html:u.default,text:a.default}),e}return t=l,(n=[{key:"render",value:function(){console.log("this",this);var e=this.props,t=e.data_type,n=s(e,f),r=this._annotators[t];if(void 0===r)throw new Error("Invalid data_type. Valid options are: pdf, html, & text.");return o().createElement(r,n)}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.Component);O.defaultProps=i.lG,O.propTypes=i.iG},1068:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(9196),o=(n(9064),n(8100));function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var O=function(e){y(n,e);var t=b(n);function n(){return s(this,n),t.apply(this,arguments)}return h(n,[{key:"annotationStyle",value:function(e,t){var n=t.color,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={position:"absolute",height:e.height+2,top:e.top-this.props.scrollPosition.scrollY,left:e.left-this.props.scrollPosition.scrollX,width:e.width,transform:"translate(2px)",backgroundColor:"none",opacity:1};return r&&(o=l(l({},o),{},{backgroundColor:n||this.props.color||"yellow",zIndex:-1})),o}},{key:"render",value:function(){var e=this;return React.createElement("div",null,e.props.highlights.map((function(t){return t.position.map((function(n,r){return React.createElement("div",{key:r},React.createElement("div",{style:e.annotationStyle(n,t),onClick:function(){return e.props.onClick(t)},onMouseOver:function(){return e.props.onMouseOver(t)}}),React.createElement("div",{style:e.annotationStyle(n,t,!0)}))}))})))}}]),n}(r.Component),w=function(e){y(n,e);var t=b(n);function n(e){var o;return s(this,n),f(m(o=t.call(this,e)),"state",{newAnnotationJustCreated:!1,selection:null,scrollPosition:{scrollY:0,scrollX:0}}),o.iframeRef=(0,r.createRef)(),o}return h(n,[{key:"componentDidMount",value:function(){this.removeIframeEventHandlers()}},{key:"componentWillUnmount",value:function(){this.removeIframeEventHandlers()}},{key:"removeIframeEventHandlers",value:function(){var e,t;null!==(e=this.iframeRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.contentDocument&&(this.iframeRef.current.contentDocument.removeEventListener("scroll",this.onScroll.bind(this)),this.iframeRef.current.contentDocument.removeEventListener("mouseup",this.onMouseUp.bind(this)))}},{key:"setIframeEventHandlers",value:function(){var e,t;null!==(e=this.iframeRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.contentDocument&&(this.iframeRef.current.contentDocument.addEventListener("scroll",this.onScroll.bind(this)),this.iframeRef.current.contentDocument.addEventListener("mouseup",this.onMouseUp.bind(this)))}},{key:"onScroll",value:function(){this.setState({scrollPosition:{scrollY:this.iframeRef.current.contentWindow.scrollY,scrollX:this.iframeRef.current.contentWindow.scrollX}})}},{key:"onMouseUp",value:function(){var e=this.iframeRef.current.contentWindow.getSelection(),t=e.toString();if(t){var n=function(e,t){return Array.from(e).map((function(e){return{left:e.left+t.scrollX,top:e.top+t.scrollY,height:e.height,width:e.width}}))}(e.getRangeAt(0).getClientRects(),this.state.scrollPosition);this.setState({selection:{position:n,text:t},newAnnotationJustCreated:!0}),this.onAnnotationCreated(this.state.selection),this.props.setProps({highlights:[].concat(c(this.props.highlights),[this.state.selection])})}this.setState({selection:null}),e.empty()}},{key:"triggerEvent",value:function(e,t){var n;this.props.setProps({event:{name:e,value:t,_:!(null!==(n=this.props.event)&&void 0!==n&&n._)}})}},{key:"onAnnotationCreated",value:function(e){this.triggerEvent("new_highlight",e)}},{key:"onAnnotationClick",value:function(e){this.triggerEvent("clicked_highlight",e)}},{key:"onAnnotationHover",value:function(e){this.state.newAnnotationJustCreated?this.setState({newAnnotationJustCreated:!1}):this.triggerEvent("hovered_highlight",e)}},{key:"render",value:function(){var e=this,t=this.props.width||"100%",n=this.props.height||"100%";return React.createElement("div",{onMouseLeave:function(){return e.setState({selection:null})},style:{overflow:"hidden",position:"relative",width:t,height:n}},React.createElement("iframe",{srcDoc:this.props.data,width:t,height:n,ref:this.iframeRef,onLoad:this.setIframeEventHandlers.bind(this)}),!!this.props.highlights&&React.createElement(O,{highlights:this.props.highlights,color:this.props.color,scrollPosition:this.state.scrollPosition,onClick:this.onAnnotationClick.bind(this),onMouseOver:this.onAnnotationHover.bind(this)}))}}]),n}(r.Component);w.defaultProps=o.lG,w.propTypes=o.iG},2723:(e,t,n)=>{n.r(t),n.d(t,{default:()=>me});var r=n(9196),o=n.n(r),i=(n(9064),n(8473)),c=n(1850),u=n.n(c),a=n(7963),l=n(5601);n(1739),n(5116);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var s=["position","id"],p=void 0;function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.R=l;var E=function(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var c=p;clearTimeout(n),n=setTimeout((function(){return e.apply(c,o)}),t)}},k=function(e,t){return e.top>=t.top&&e.bottom<=t.bottom&&e.right<=t.right&&e.left>=t.left},R=function(e,t){return e.page===t.page&&e.left<=t.left&&t.left<=e.left+e.width},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return e.page===t.page&&Math.abs(e.top-t.top)<n&&Math.abs(e.height-t.height)<n},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=e.left+e.width,o=t.left+t.width;return e.page===t.page&&e.left<=t.left&&r<=o&&t.left-r<=n},C=function(e,t){e.width=Math.max(t.width-e.left+t.left,e.width)},A=function(e){for(var t=e.sort((function(e,t){var n=(e.page||0)*e.top-(t.page||0)*t.top;return 0===n?e.left-t.left:n})),n=new Set,r=t.filter((function(e){return t.every((function(t){return r=t,!((n=e).page===r.page&&n.top>r.top&&n.left>r.left&&n.top+n.height<r.top+r.height&&n.left+n.width<r.left+r.width);var n,r}))})),o=0;o<=2;)r.forEach((function(e){r.forEach((function(t){e===t||n.has(e)||n.has(t)||_(e,t)&&(R(e,t)&&(C(e,t),e.height=Math.max(e.height,t.height),n.add(t)),D(e,t)&&(C(e,t),n.add(t)))}))})),o+=1;return r.filter((function(e){return!n.has(e)}))},x=function(e){return(e||{}).ownerDocument||document},T=function(e){return(x(e)||{}).defaultView||window},M=function(e){return e instanceof HTMLElement||e instanceof T(e).HTMLElement},L=function(e){var t=e.closest(".page");return t&&M(t)?{node:t,number:Number(t.dataset.pageNumber)}:null},B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,n,r,o=m(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),j(O(t=o.call(this,e)),"state",{isCollapsed:!0,range:null}),j(O(t),"eventBus",new a.EventBus),j(O(t),"linkService",new a.PDFLinkService({eventBus:t.eventBus,externalLinkTarget:2})),j(O(t),"resizeObserver",null),j(O(t),"containerNode",null),j(O(t),"unsubscribe",(function(){})),j(O(t),"attachRef",(function(e){var n=O(t),r=n.eventBus,o=n.resizeObserver;if(t.containerNode=e,t.unsubscribe(),e){var i,c=e.ownerDocument;r.on("textlayerrendered",t.onTextLayerRendered),r.on("pagesinit",t.onDocumentReady),c.addEventListener("selectionchange",t.onSelectionChange),c.addEventListener("keydown",t.handleKeyDown),null===(i=c.defaultView)||void 0===i||i.addEventListener("resize",t.debouncedScaleValue),o&&o.observe(e),t.unsubscribe=function(){var e;r.off("pagesinit",t.onDocumentReady),r.off("textlayerrendered",t.onTextLayerRendered),c.removeEventListener("selectionchange",t.onSelectionChange),c.removeEventListener("keydown",t.handleKeyDown),null===(e=c.defaultView)||void 0===e||e.removeEventListener("resize",t.debouncedScaleValue),o&&o.disconnect()}}})),j(O(t),"onTextLayerRendered",(function(){t.renderHighlights()})),j(O(t),"onDocumentReady",(function(){t.handleScaleValue()})),j(O(t),"onSelectionChange",(function(){var e=t.containerNode,n=T(e).getSelection();if(n){var r=n.rangeCount>0?n.getRangeAt(0):null;n.isCollapsed?t.setState({isCollapsed:!0}):r&&e&&e.contains(r.commonAncestorContainer)&&(t.setState({isCollapsed:!1,range:r}),t.debouncedAfterSelection())}})),j(O(t),"onScroll",(function(){t.renderHighlights(),t.viewer.container.removeEventListener("scroll",t.onScroll)})),j(O(t),"onMouseDown",(function(e){M(e.target)})),j(O(t),"afterSelection",(function(){var e=t.state,n=e.isCollapsed,r=e.range,o=function(e){var t,n,r=null==e||null===(t=e.startContainer)||void 0===t?void 0:t.parentElement,o=null==e||null===(n=e.endContainer)||void 0===n?void 0:n.parentElement;if(!M(r)||!M(o))return[];var i=L(r),c=L(o);if(null==i||!i.number||null==c||!c.number)return[];if(i.number===c.number)return[i];if(i.number===c.number-1)return[i,c];for(var u=[],a=i.number,l=i.node.ownerDocument;a<=c.number;){var f=L(l.querySelector("[data-page-number='".concat(f,"'")));f&&u.push(f)}return u}(r),i=function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Array.from(e.getClientRects()),o=[],i=0,c=r;i<c.length;i++){var u,a=c[i],l=P(t);try{for(l.s();!(u=l.n()).done;){var f=u.value,s=f.node.getBoundingClientRect();if(k(a,s)&&a.top>=0&&a.bottom>=0&&a.width>0&&a.height>0&&a.width<s.width&&a.height<s.height){var p={top:a.top+f.node.scrollTop-s.top,left:a.left+f.node.scrollLeft-s.left,width:a.width,height:a.height,page:f.number};o.push(p)}}}catch(e){l.e(e)}finally{l.f()}}return n?A(o):o}(r,o);if(r&&!n&&o&&0!=o.length&&0!==i.length){var c=function(e){var t=Array.from(e).map((function(e){var t=e.left,n=e.top;return{X0:t,X1:t+e.width,Y0:n,Y1:n+e.height,page:e.page}})),n=Number.MAX_SAFE_INTEGER;t.forEach((function(e){var t;n=Math.min(n,null!==(t=e.page)&&void 0!==t?t:n)}));var r=t.filter((function(e){return(e.X0>0||e.X1>0||e.Y0>0||e.Y1>0)&&e.page===n})),o=r.reduce((function(e,t){return{X0:Math.min(e.X0,t.X0),X1:Math.max(e.X1,t.X1),Y0:Math.min(e.Y0,t.Y0),Y1:Math.max(e.Y1,t.Y1),page:n}}),r[0]),i=o.X0,c=o.X1,u=o.Y0;return{left:i,top:u,width:c-i,height:o.Y1-u,page:o.page}}(i);t.props.onSelectionFinished({page:o[0].number,boundingRect:c,rects:i},r.toString())}})),j(O(t),"debouncedAfterSelection",E(t.afterSelection,500)),j(O(t),"handleScaleValue",(function(){t.viewer&&(t.viewer.currentScaleValue=t.props.pdfScaleValue)})),j(O(t),"debouncedScaleValue",E(t.handleScaleValue,500)),"undefined"!=typeof ResizeObserver&&(t.resizeObserver=new ResizeObserver(t.debouncedScaleValue)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){e.pdfDocument!==this.props.pdfDocument?this.init():e.highlights!==this.props.highlights&&this.renderHighlights(this.props)}},{key:"init",value:function(){var e=this.props.pdfDocument;this.findController=this.findController||new a.PDFFindController({linkService:this.linkService,eventBus:this.eventBus}),this.viewer=this.viewer||new a.PDFViewer({container:this.containerNode,eventBus:this.eventBus,findController:this.findController,textLayerMode:2,removePageBorders:!0,linkService:this.linkService,renderer:"canvas",l10n:null}),this.linkService.setDocument(e),this.linkService.setViewer(this.viewer),this.viewer.setDocument(e),console.log("highligher",this)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"findOrCreateHighlightLayer",value:function(e){var t=(this.viewer.getPageView(e-1)||{}).textLayer;if(!t)return null;var n=t.textLayerDiv.querySelector(".PdfHighlighter__highlight-layer");return n||((n=x(t.textLayerDiv).createElement("div")).className=".PdfHighlighter__highlight-layer",t.textLayerDiv.appendChild(n)),n}},{key:"renderHighlights",value:function(e){for(var t=e||this.props,n=t.highlightTransform,r=t.highlights,o=this.props.pdfDocument,i=l.groupBy(l.path(["position","page"]),l.filter(Boolean,r)),c=1;c<=o.numPages;c++){var a=this.findOrCreateHighlightLayer(c);a&&u().render(React.createElement("div",null,(i[String(c)]||[]).map((function(e,t){var r=e.position,o=e.id,i=d(e,s);return n(y({id:o,position:r},i),t)}))),a)}}},{key:"render",value:function(){return React.createElement("div",{onPointerDown:this.onMouseDown},React.createElement("div",{ref:this.attachRef,className:"PdfHighlighter",onContextMenu:function(e){return e.preventDefault()},style:{height:this.props.height,width:this.props.width}},React.createElement("div",{className:"pdfViewer"})))}}])&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);j(B,"defaultProps",{pdfScaleValue:"auto"});var H=n(9299);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=";base64,";function q(e){for(var t=e.indexOf($)+$.length,n=e.substring(t),r=window.atob(n),o=r.length,i=new Uint8Array(new ArrayBuffer(o)),c=0;c<o;c++)i[c]=r.charCodeAt(c);return i}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(c,e);var t,n,r,i=G(c);function c(){var e;Y(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return J(F(e=i.call.apply(i,[this].concat(n))),"state",{pdfDocument:null,error:null}),J(F(e),"documentRef",o().createRef()),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){var e=this.state.pdfDocument;e&&e.destroy()}},{key:"componentDidUpdate",value:function(e){var t=e.data;this.props.data!==t&&this.load()}},{key:"componentDidCatch",value:function(e,t){var n=this.props.onError;n&&n(e),this.setState({pdfDocument:null,error:e})}},{key:"load",value:function(){var e=this,t=(this.documentRef.current||{}).ownerDocument,n=void 0===t?document:t,r=this.props,o=r.data,i=r.cMapUrl,c=r.cMapPacked,u=r.workerSrc,a=this.state.pdfDocument;this.setState({pdfDocument:null,error:null}),"string"==typeof u&&(H.GlobalWorkerOptions.workerSrc=u),Promise.resolve().then((function(){return a&&a.destroy()})).then((function(){if(o)return(0,H.getDocument)(X(X({},e.props),{},{data:q(o),workerSrc:"https://unpkg.com/pdfjs-dist@2.11.338/build/pdf.worker.min.js",ownerDocument:n,cMapUrl:i,cMapPacked:c})).promise.then((function(t){e.setState({pdfDocument:t})}))})).catch((function(t){return e.componentDidCatch(t)}))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.beforeLoad,r=this.state,i=r.pdfDocument,c=r.error;return o().createElement(o().Fragment,null,o().createElement("span",{ref:this.documentRef}),c?this.renderError():i&&t?t(i):n)}},{key:"renderError",value:function(){var e=this.props.errorMessage;return e?o().cloneElement(e,{error:this.state.error}):null}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}J(K,"defaultProps",{workerSrc:"https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js"});var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(i,e);var t,n,r,o=ne(i);function i(){return Z(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.position,n=e.onClick,r=e.onMouseOver;return React.createElement("div",null,React.createElement("div",{className:"Highlight__parts"},t.rects.map((function(e,t){return React.createElement("div",{onMouseOver:r,onClick:n,key:t,style:e,className:"Highlight__part"})}))))}}])&&ee(t.prototype,n),r&&ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return be(this,n)}}function be(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}(i,e);var t,n,r,o=de(i);function i(){return pe(this,i),o.apply(this,arguments)}return t=i,n=[{key:"onAnnotationCreated",value:function(e){this.props.setProps({highlights:[e].concat(fe(this.props.highlights))}),this.triggerEvent("new_highlight",e)}},{key:"onAnnotationClick",value:function(e){this.triggerEvent("clicked_highlight",e)}},{key:"onAnnotationHover",value:function(e){this.triggerEvent("hovered_highlight",e)}},{key:"triggerEvent",value:function(e,t){var n;this.props.setProps({event:{name:e,value:t,_:!(null!==(n=this.props.event)&&void 0!==n&&n._)}})}},{key:"render",value:function(){var e=this;return React.createElement(K,{data:this.props.data},(function(t){return React.createElement(B,{height:e.props.height,width:e.props.width,pdfDocument:t,onSelectionFinished:function(t,n){return e.onAnnotationCreated({text:n,position:t})},highlightTransform:function(t,n){return React.createElement(ie,{position:ae(ae({},t.position),{},{rects:t.position.rects.map((function(n){return ae(ae({},n),{},{background:t.color||e.props.color||"yellow"})}))}),key:n,onClick:function(){e.onAnnotationClick(e.props.highlights[n])},onMouseOver:function(){e.onAnnotationHover(e.props.highlights[n])}})},highlights:e.props.highlights})}))}}],n&&he(t.prototype,n),r&&he(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);me.defaultProps=i.lG,me.propTypes=i.iG},3574:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(9196),o=n.n(r),i=(n(9064),n(3720)),c=n(1068);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,r,i=y(u);function u(){return s(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=l(l({},this.props),{},{data:"<pre>".concat(this.props.data,"</pre>")});return o().createElement(c.default,e)}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.Component);v.defaultProps=i.lG,v.propTypes=i.iG}}]);
//# sourceMappingURL=async-DashAnnotator-ded392ca.js.map