{"version":3,"file":"DashAnnotator.js","mappings":"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","sources":["webpack:///./src/lib/fragments/DashAnnotator.react.js","webpack:///./src/lib/fragments/HTMLAnnotator.react.js","webpack:///./src/lib/styles.css?175d","webpack:///./src/lib/fragments/PDFHighlighter.react.js","webpack:///./src/lib/fragments/PDFLoader.react.js","webpack:///./src/lib/fragments/Highlight.react.js","webpack:///./src/lib/fragments/PDFAnnotator.react.js","webpack:///./src/lib/fragments/TextAnnotator.react.js","webpack:///./src/lib/styles.css"],"sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {defaultProps, propTypes} from '../components/DashAnnotator.react';\r\nimport PDFAnnotator from './PDFAnnotator.react';\r\nimport HTMLAnnotator from './HTMLAnnotator.react';\r\nimport TextAnnotator from './TextAnnotator.react';\r\n\r\nexport default class DashAnnotator extends Component {\r\n    _annotators = {\r\n        pdf: PDFAnnotator,\r\n        html: HTMLAnnotator,\r\n        text: TextAnnotator\r\n    }\r\n\r\n    render() {\r\n        console.log('this', this)\r\n        const { data_type: dataType, ...props } = this.props;\r\n        const Annotator = this._annotators[dataType]\r\n\r\n        if (Annotator === undefined) {\r\n            throw new Error('Invalid data_type. Valid options are: pdf, html, & text.');\r\n        }\r\n\r\n        return <Annotator {...props} />\r\n    }\r\n}\r\n\r\n\r\nDashAnnotator.defaultProps = defaultProps;\r\nDashAnnotator.propTypes = propTypes;","import {Component, createRef} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {defaultProps, propTypes} from '../components/HTMLAnnotator.react';\r\n\r\n\r\nconst findSelectButtonPosition = position => {\r\n  return position.reduce((least, item) => {\r\n    if (item.top < least.top) {\r\n      least = item;\r\n    }\r\n    return { top: least.top, left: least.left };\r\n  }, position[0]);\r\n};\r\n\r\nconst structureClientRectangle = (\r\n  clientRectangleArray,\r\n  scrollPosition\r\n) => {\r\n  return Array.from(clientRectangleArray).map(item => {\r\n    return {\r\n      left: item.left + scrollPosition.scrollX,\r\n      top: item.top + scrollPosition.scrollY,\r\n      height: item.height,\r\n      width: item.width\r\n    };\r\n  });\r\n};\r\n\r\nclass Annotation extends Component {\r\n    annotationStyle(rect, { color }, hidden=false) {\r\n        let styles = {\r\n            position: 'absolute',\r\n            height: rect.height + 2,\r\n            top: rect.top - this.props.scrollPosition.scrollY,\r\n            left: rect.left - this.props.scrollPosition.scrollX,\r\n            width: rect.width,\r\n            transform: 'translate(2px)',\r\n            backgroundColor: 'none',\r\n            opacity: 1,\r\n        }\r\n\r\n        if (hidden) {\r\n            styles = {\r\n                ...styles,\r\n                backgroundColor: color || this.props.color || 'yellow',\r\n                zIndex: -1\r\n            }\r\n        }\r\n\r\n        return styles\r\n    }\r\n\r\n    render() {\r\n        const findAnnotations = () => {\r\n        return this.props.highlights.map(singleAnnotation => {\r\n          return singleAnnotation.position.map((rectangle, index) => {\r\n            return (\r\n              <div key={index}>\r\n                <div\r\n                    style={this.annotationStyle(rectangle, singleAnnotation)}\r\n                    onClick={() => this.props.onClick(singleAnnotation)}\r\n                    onMouseOver={() => this.props.onMouseOver(singleAnnotation)}\r\n                />\r\n                <div style={this.annotationStyle(rectangle, singleAnnotation, true)} />\r\n              </div>\r\n            );\r\n          });\r\n        });\r\n      };\r\n\r\n      return <div>{findAnnotations()}</div>;\r\n    }\r\n}\r\n\r\nexport default class HTMLAnnotator extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.iframeRef = createRef();\r\n    }\r\n\r\n    state = {\r\n        newAnnotationJustCreated: false,\r\n        selection: null,\r\n        scrollPosition: {\r\n            scrollY: 0,\r\n            scrollX: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.removeIframeEventHandlers()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.removeIframeEventHandlers()\r\n    }\r\n\r\n    removeIframeEventHandlers() {\r\n        if (this.iframeRef?.current?.contentDocument) {\r\n            this.iframeRef.current.contentDocument.removeEventListener(\r\n                'scroll', this.onScroll.bind(this))\r\n            this.iframeRef.current.contentDocument.removeEventListener(\r\n                'mouseup', this.onMouseUp.bind(this))\r\n        }\r\n    }\r\n\r\n    setIframeEventHandlers() {\r\n        if (this.iframeRef?.current?.contentDocument) {\r\n            this.iframeRef.current.contentDocument.addEventListener(\r\n                'scroll', this.onScroll.bind(this))\r\n            this.iframeRef.current.contentDocument.addEventListener(\r\n                'mouseup', this.onMouseUp.bind(this))\r\n        }\r\n      }\r\n\r\n    onScroll() {\r\n        this.setState({\r\n            scrollPosition: {\r\n                scrollY: this.iframeRef.current.contentWindow.scrollY,\r\n                scrollX: this.iframeRef.current.contentWindow.scrollX\r\n            }\r\n        })\r\n    }\r\n\r\n    onMouseUp() {\r\n        const selection = this.iframeRef.current.contentWindow.getSelection();\r\n        const text = selection.toString();\r\n        if (text) {\r\n            const clientRectangleArray = selection.getRangeAt(0).getClientRects();\r\n            const position = structureClientRectangle(\r\n                clientRectangleArray,\r\n                this.state.scrollPosition\r\n            );\r\n            this.setState({\r\n                selection: { position, text },\r\n                newAnnotationJustCreated: true\r\n            })\r\n            this.onAnnotationCreated(this.state.selection)\r\n            this.props.setProps({\r\n                highlights: [\r\n                    ...this.props.highlights,\r\n                    this.state.selection\r\n                ]\r\n            })\r\n                        \r\n        }\r\n\r\n        this.setState({ selection: null })\r\n        selection.empty()\r\n    }\r\n\r\n    triggerEvent(name, value) {\r\n        this.props.setProps({\r\n            event: { name, value, _: !this.props.event?._ }\r\n        })\r\n    }\r\n\r\n    onAnnotationCreated(highlight) {\r\n        this.triggerEvent('new_highlight', highlight)\r\n    }\r\n\r\n    onAnnotationClick(highlight) {\r\n        this.triggerEvent('clicked_highlight', highlight)\r\n    }\r\n\r\n    onAnnotationHover(highlight) {\r\n        if (!this.state.newAnnotationJustCreated) {\r\n            this.triggerEvent('hovered_highlight', highlight)\r\n        } else {\r\n            this.setState({\r\n                newAnnotationJustCreated: false\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n      const width = this.props.width || '100%';\r\n      const height = this.props.height || '100%';\r\n\r\n      return (\r\n        <div\r\n          onMouseLeave={() => this.setState({ selection: null })}\r\n          style={{\r\n            overflow: 'hidden',\r\n            position: 'relative',\r\n            width,\r\n            height\r\n          }}\r\n        >\r\n          <iframe\r\n            srcDoc={this.props.data}\r\n            width={width}\r\n            height={height}\r\n            ref={this.iframeRef}\r\n            onLoad={this.setIframeEventHandlers.bind(this)}\r\n          ></iframe>\r\n          {!!this.props.highlights && (\r\n            <Annotation\r\n              highlights={this.props.highlights}\r\n              color={this.props.color}\r\n              scrollPosition={this.state.scrollPosition}\r\n              onClick={this.onAnnotationClick.bind(this)}\r\n              onMouseOver={this.onAnnotationHover.bind(this)}\r\n            />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\n\r\nHTMLAnnotator.defaultProps = defaultProps;\r\nHTMLAnnotator.propTypes = propTypes;\r\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      \n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./styles.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = function insertAtTop(element) {\r\n                                    var parent = document.querySelector('head');\r\n\r\n                                    // eslint-disable-next-line no-underscore-dangle\r\n                                    var lastInsertedElement = \r\n                                        window._lastElementInsertedByStyleLoader;\r\n\r\n                                    if (!lastInsertedElement) {\r\n                                        parent.insertBefore(element, parent.firstChild);\r\n                                    } else if (lastInsertedElement.nextSibling) {\r\n                                        parent.insertBefore(element, lastInsertedElement.nextSibling);\r\n                                    } else {\r\n                                        parent.appendChild(element);\r\n                                    }\r\n                                    // eslint-disable-next-line no-underscore-dangle\r\n                                    window._lastElementInsertedByStyleLoader = element;\r\n                                };\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./styles.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { PureComponent } from 'react'\r\nimport ReactDom from 'react-dom'\r\n\r\nimport {\r\n  EventBus,\r\n  PDFViewer,\r\n  PDFLinkService,\r\n  PDFFindController\r\n} from 'pdfjs-dist/web/pdf_viewer'\r\nimport * as R from 'ramda'\r\nwindow.R = R\r\n\r\nimport 'pdfjs-dist/legacy/web/pdf_viewer.css'\r\nimport '../styles.css'\r\n\r\nconst debounce = (callback, wait) => {\r\n  let timeout\r\n  return (...args) => {\r\n    const context = this\r\n    clearTimeout(timeout)\r\n    timeout = setTimeout(() => callback.apply(context, args), wait)\r\n  }\r\n}\r\n\r\nconst getBoundingRect = clientRects => {\r\n  const rects = Array.from(clientRects).map(rect => {\r\n    const { left, top, width, height, page } = rect\r\n\r\n    const X0 = left\r\n    const X1 = left + width\r\n\r\n    const Y0 = top\r\n    const Y1 = top + height\r\n\r\n    return { X0, X1, Y0, Y1, page }\r\n  })\r\n\r\n  let firstPage = Number.MAX_SAFE_INTEGER\r\n\r\n  rects.forEach(rect => {\r\n    firstPage = Math.min(\r\n      firstPage,\r\n      rect.page ?? firstPage\r\n    )\r\n  })\r\n\r\n  const rectsWithSizeOnFirstPage = rects.filter(\r\n    rect =>\r\n      (rect.X0 > 0 || rect.X1 > 0 || rect.Y0 > 0 || rect.Y1 > 0) &&\r\n      rect.page === firstPage\r\n  )\r\n\r\n  const optimal = rectsWithSizeOnFirstPage.reduce((res, rect) => {\r\n    return {\r\n      X0: Math.min(res.X0, rect.X0),\r\n      X1: Math.max(res.X1, rect.X1),\r\n\r\n      Y0: Math.min(res.Y0, rect.Y0),\r\n      Y1: Math.max(res.Y1, rect.Y1),\r\n\r\n      page: firstPage\r\n    }\r\n  }, rectsWithSizeOnFirstPage[0])\r\n\r\n  const { X0, X1, Y0, Y1, page } = optimal\r\n\r\n  return {\r\n    left: X0,\r\n    top: Y0,\r\n    width: X1 - X0,\r\n    height: Y1 - Y0,\r\n    page\r\n  }\r\n}\r\n\r\nconst isClientRectInsidePageRect = (clientRect, pageRect) =>\r\n  clientRect.top >= pageRect.top &&\r\n  clientRect.bottom <= pageRect.bottom &&\r\n  clientRect.right <= pageRect.right &&\r\n  clientRect.left >= pageRect.left\r\n\r\nconst overlaps = (A, B) =>\r\n  A.page === B.page &&\r\n  A.left <= B.left &&\r\n  B.left <= A.left + A.width\r\n\r\nconst sameLine = (A, B, yMargin = 5) =>\r\n  A.page === B.page &&\r\n  Math.abs(A.top - B.top) < yMargin &&\r\n  Math.abs(A.height - B.height) < yMargin\r\n\r\nconst inside = (A, B) =>\r\n  A.page === B.page &&\r\n  A.top > B.top &&\r\n  A.left > B.left &&\r\n  A.top + A.height < B.top + B.height &&\r\n  A.left + A.width < B.left + B.width\r\n\r\nconst nextTo = (A, B, xMargin = 10) => {\r\n  const Aright = A.left + A.width\r\n  const Bright = B.left + B.width\r\n\r\n  return (\r\n    A.page === B.page &&\r\n    A.left <= B.left &&\r\n    Aright <= Bright &&\r\n    B.left - Aright <= xMargin\r\n  )\r\n}\r\n\r\nconst extendWidth = (A, B) => {\r\n  A.width = Math.max(B.width - A.left + B.left, A.width)\r\n}\r\n\r\nconst optimizeClientRects = clientRects => {\r\n  const rects = clientRects.sort((A, B) => {\r\n    const top = (A.page || 0) * A.top - (B.page || 0) * B.top\r\n    return top === 0 ? A.left - B.left : top\r\n  })\r\n\r\n  const toRemove = new Set()\r\n\r\n  const firstPass = rects.filter(rect => {\r\n    return rects.every(otherRect => {\r\n      return !inside(rect, otherRect)\r\n    })\r\n  })\r\n\r\n  let passCount = 0\r\n\r\n  while (passCount <= 2) {\r\n    firstPass.forEach(A => {\r\n      firstPass.forEach(B => {\r\n        if (A === B || toRemove.has(A) || toRemove.has(B)) {\r\n          return\r\n        }\r\n\r\n        if (!sameLine(A, B)) {\r\n          return\r\n        }\r\n\r\n        if (overlaps(A, B)) {\r\n          extendWidth(A, B)\r\n          A.height = Math.max(A.height, B.height)\r\n\r\n          toRemove.add(B)\r\n        }\r\n\r\n        if (nextTo(A, B)) {\r\n          extendWidth(A, B)\r\n\r\n          toRemove.add(B)\r\n        }\r\n      })\r\n    })\r\n    passCount += 1\r\n  }\r\n\r\n  return firstPass.filter(rect => !toRemove.has(rect))\r\n}\r\n\r\nconst getClientRects = (range, pages, shouldOptimize = true) => {\r\n  const clientRects = Array.from(range.getClientRects())\r\n\r\n  const rects = []\r\n\r\n  for (const clientRect of clientRects) {\r\n    for (const page of pages) {\r\n      const pageRect = page.node.getBoundingClientRect()\r\n\r\n      if (\r\n        isClientRectInsidePageRect(clientRect, pageRect) &&\r\n        clientRect.top >= 0 &&\r\n        clientRect.bottom >= 0 &&\r\n        clientRect.width > 0 &&\r\n        clientRect.height > 0 &&\r\n        clientRect.width < pageRect.width &&\r\n        clientRect.height < pageRect.height\r\n      ) {\r\n        const highlightedRect = {\r\n          top: clientRect.top + page.node.scrollTop - pageRect.top,\r\n          left: clientRect.left + page.node.scrollLeft - pageRect.left,\r\n          width: clientRect.width,\r\n          height: clientRect.height,\r\n          page: page.number\r\n        }\r\n\r\n        rects.push(highlightedRect)\r\n      }\r\n    }\r\n  }\r\n\r\n  return shouldOptimize ? optimizeClientRects(rects) : rects\r\n}\r\n\r\nconst getDocument = e => (e || {}).ownerDocument || document\r\nconst getWindow = e => (getDocument(e) || {}).defaultView || window\r\nconst isHTMLElement = e =>\r\n  e instanceof HTMLElement || e instanceof getWindow(e).HTMLElement\r\n\r\nconst getPageFromElement = target => {\r\n  const node = target.closest('.page')\r\n\r\n  if (!node || !isHTMLElement(node)) {\r\n    return null\r\n  }\r\n\r\n  const number = Number(node.dataset.pageNumber)\r\n\r\n  return { node, number }\r\n}\r\n\r\nconst getPagesFromRange = range => {\r\n  const startParentElement = range?.startContainer?.parentElement\r\n  const endParentElement = range?.endContainer?.parentElement\r\n\r\n  if (!isHTMLElement(startParentElement) || !isHTMLElement(endParentElement)) {\r\n    return []\r\n  }\r\n\r\n  const startPage = getPageFromElement(startParentElement)\r\n  const endPage = getPageFromElement(endParentElement)\r\n\r\n  if (!startPage?.number || !endPage?.number) {\r\n    return []\r\n  }\r\n\r\n  if (startPage.number === endPage.number) {\r\n    return [startPage]\r\n  }\r\n\r\n  if (startPage.number === endPage.number - 1) {\r\n    return [startPage, endPage]\r\n  }\r\n\r\n  const pages = []\r\n\r\n  let currentPage = startPage.number\r\n\r\n  const document = startPage.node.ownerDocument\r\n\r\n  while (currentPage <= endPage.number) {\r\n    const currentPage = getPageFromElement(\r\n      document.querySelector(`[data-page-number='${currentPage}'`)\r\n    )\r\n    if (currentPage) {\r\n      pages.push(currentPage)\r\n    }\r\n  }\r\n\r\n  return pages\r\n}\r\n\r\nexport default class PDFHighlighter extends PureComponent {\r\n  static defaultProps = {\r\n    pdfScaleValue: 'auto'\r\n  }\r\n\r\n  state = {\r\n    isCollapsed: true,\r\n    range: null\r\n  }\r\n\r\n  eventBus = new EventBus()\r\n  linkService = new PDFLinkService({\r\n    eventBus: this.eventBus,\r\n    externalLinkTarget: 2\r\n  })\r\n\r\n  resizeObserver = null\r\n  containerNode = null\r\n  unsubscribe = () => {}\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    if (typeof ResizeObserver !== 'undefined') {\r\n      this.resizeObserver = new ResizeObserver(this.debouncedScaleValue)\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.init()\r\n  }\r\n\r\n  attachRef = ref => {\r\n    const { eventBus, resizeObserver: observer } = this\r\n    this.containerNode = ref\r\n    this.unsubscribe()\r\n\r\n    if (ref) {\r\n      const { ownerDocument: doc } = ref\r\n      eventBus.on('textlayerrendered', this.onTextLayerRendered)\r\n      eventBus.on('pagesinit', this.onDocumentReady)\r\n      doc.addEventListener('selectionchange', this.onSelectionChange)\r\n      doc.addEventListener('keydown', this.handleKeyDown)\r\n      doc.defaultView?.addEventListener('resize', this.debouncedScaleValue)\r\n      if (observer) observer.observe(ref)\r\n\r\n      this.unsubscribe = () => {\r\n        eventBus.off('pagesinit', this.onDocumentReady)\r\n        eventBus.off('textlayerrendered', this.onTextLayerRendered)\r\n        doc.removeEventListener('selectionchange', this.onSelectionChange)\r\n        doc.removeEventListener('keydown', this.handleKeyDown)\r\n        doc.defaultView?.removeEventListener('resize', this.debouncedScaleValue)\r\n        if (observer) observer.disconnect()\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.pdfDocument !== this.props.pdfDocument) {\r\n      this.init()\r\n    } else if (prevProps.highlights !== this.props.highlights) {\r\n      this.renderHighlights(this.props)\r\n    }\r\n  }\r\n\r\n  init() {\r\n    const { pdfDocument } = this.props\r\n\r\n    this.findController = \r\n      this.findController ||\r\n      new PDFFindController({\r\n        linkService: this.linkService,\r\n        eventBus: this.eventBus\r\n      })\r\n\r\n    this.viewer =\r\n      this.viewer ||\r\n      new PDFViewer({\r\n        container: this.containerNode,\r\n        eventBus: this.eventBus,\r\n        findController: this.findController,\r\n        textLayerMode: 2,\r\n        removePageBorders: true,\r\n        linkService: this.linkService,\r\n        renderer: 'canvas',\r\n        l10n: null\r\n      })\r\n\r\n    this.linkService.setDocument(pdfDocument)\r\n    this.linkService.setViewer(this.viewer)\r\n    this.viewer.setDocument(pdfDocument)\r\n\r\n    console.log('highligher', this)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe()\r\n  }\r\n\r\n  findOrCreateHighlightLayer(page) {\r\n    const { textLayer } = this.viewer.getPageView(page - 1) || {}\r\n\r\n    if (!textLayer) {\r\n      return null\r\n    }\r\n\r\n    let containerLayer = textLayer.textLayerDiv.querySelector(\r\n      '.PdfHighlighter__highlight-layer'\r\n    )\r\n\r\n    if (!containerLayer) {\r\n      containerLayer = getDocument(textLayer.textLayerDiv).createElement('div')\r\n      containerLayer.className = '.PdfHighlighter__highlight-layer'\r\n      textLayer.textLayerDiv.appendChild(containerLayer)\r\n    }\r\n\r\n    return containerLayer\r\n  }\r\n\r\n  renderHighlights(nextProps) {\r\n    const { highlightTransform, highlights } = nextProps || this.props\r\n\r\n    const { pdfDocument } = this.props\r\n\r\n    const highlightsByPage = R.groupBy(\r\n      R.path(['position', 'page']),\r\n      R.filter(Boolean, highlights)\r\n    )\r\n\r\n    for (let page = 1; page <= pdfDocument.numPages; page++) {\r\n      const highlightLayer = this.findOrCreateHighlightLayer(page)\r\n\r\n      if (highlightLayer) {\r\n        ReactDom.render(\r\n          <div>\r\n            {(highlightsByPage[String(page)] || []).map(\r\n              ({ position, id, ...highlight }, index) => {\r\n                return highlightTransform(\r\n                  {\r\n                    id,\r\n                    position: position,\r\n                    ...highlight\r\n                  },\r\n                  index\r\n                )\r\n              }\r\n            )}\r\n          </div>,\r\n          highlightLayer\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  onTextLayerRendered = () => {\r\n    this.renderHighlights()\r\n  }\r\n\r\n  onDocumentReady = () => {\r\n    this.handleScaleValue()\r\n  }\r\n\r\n  onSelectionChange = () => {\r\n    const container = this.containerNode\r\n    const selection = getWindow(container).getSelection()\r\n\r\n    if (!selection) {\r\n      return\r\n    }\r\n\r\n    const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null\r\n\r\n    if (selection.isCollapsed) {\r\n      this.setState({ isCollapsed: true })\r\n      return\r\n    }\r\n\r\n    if (\r\n      !range ||\r\n      !container ||\r\n      !container.contains(range.commonAncestorContainer)\r\n    ) {\r\n      return\r\n    }\r\n\r\n    this.setState({\r\n      isCollapsed: false,\r\n      range\r\n    })\r\n\r\n    this.debouncedAfterSelection()\r\n  }\r\n\r\n  onScroll = () => {\r\n    this.renderHighlights()\r\n\r\n    this.viewer.container.removeEventListener('scroll', this.onScroll)\r\n  }\r\n\r\n  onMouseDown = event => {\r\n    if (!isHTMLElement(event.target)) {\r\n      return\r\n    }\r\n  }\r\n\r\n  afterSelection = () => {\r\n    const { isCollapsed, range } = this.state\r\n    const pages = getPagesFromRange(range)\r\n    const rects = getClientRects(range, pages)\r\n\r\n    if (\r\n      !range ||\r\n      isCollapsed ||\r\n      !pages ||\r\n      pages.length == 0 ||\r\n      rects.length === 0\r\n    )\r\n      return\r\n\r\n    const boundingRect = getBoundingRect(rects)\r\n\r\n    this.props.onSelectionFinished(\r\n      {\r\n        page: pages[0].number,\r\n        boundingRect,\r\n        rects\r\n      },\r\n      range.toString()\r\n    )\r\n  }\r\n\r\n  debouncedAfterSelection = debounce(this.afterSelection, 500)\r\n\r\n  handleScaleValue = () => {\r\n    if (this.viewer) {\r\n      this.viewer.currentScaleValue = this.props.pdfScaleValue\r\n    }\r\n  }\r\n\r\n  debouncedScaleValue = debounce(this.handleScaleValue, 500)\r\n\r\n  render() {\r\n    return (\r\n      <div onPointerDown={this.onMouseDown}>\r\n        <div\r\n          ref={this.attachRef}\r\n          className=\"PdfHighlighter\"\r\n          onContextMenu={e => e.preventDefault()}\r\n          style={{\r\n            height: this.props.height,\r\n            width: this.props.width\r\n          }}\r\n        >\r\n          <div className=\"pdfViewer\" />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport { getDocument, GlobalWorkerOptions } from 'pdfjs-dist/build/pdf'\r\n\r\n\r\nvar BASE64_MARKER = ';base64,';\r\n\r\nfunction convertDataURIToBinary(dataURI) {\r\n  var base64Index = dataURI.indexOf(BASE64_MARKER) + BASE64_MARKER.length;\r\n  var base64 = dataURI.substring(base64Index);\r\n  var raw = window.atob(base64);\r\n  var rawLength = raw.length;\r\n  var array = new Uint8Array(new ArrayBuffer(rawLength));\r\n\r\n  for(var i = 0; i < rawLength; i++) {\r\n    array[i] = raw.charCodeAt(i);\r\n  }\r\n  return array;\r\n}\r\n\r\n\r\nexport default class PDFLoader extends Component {\r\n  state = {\r\n    pdfDocument: null,\r\n    error: null\r\n  }\r\n\r\n  static defaultProps = {\r\n    workerSrc: 'https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js'\r\n  }\r\n\r\n  documentRef = React.createRef()\r\n\r\n  componentDidMount() {\r\n    this.load()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { pdfDocument: discardedDocument } = this.state\r\n    if (discardedDocument) {\r\n      discardedDocument.destroy()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate({ data }) {\r\n    if (this.props.data !== data) {\r\n      this.load()\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    const { onError } = this.props\r\n\r\n    if (onError) {\r\n      onError(error)\r\n    }\r\n\r\n    this.setState({ pdfDocument: null, error })\r\n  }\r\n\r\n  load() {\r\n    const { ownerDocument = document } = this.documentRef.current || {}\r\n    const { data, cMapUrl, cMapPacked, workerSrc } = this.props\r\n    const { pdfDocument: discardedDocument } = this.state\r\n    this.setState({ pdfDocument: null, error: null })\r\n\r\n    if (typeof workerSrc === 'string') {\r\n      GlobalWorkerOptions.workerSrc = workerSrc\r\n    }\r\n\r\n    Promise.resolve()\r\n      .then(() => discardedDocument && discardedDocument.destroy())\r\n      .then(() => {\r\n        if (!data) {\r\n          return\r\n        }\r\n\r\n        return getDocument({\r\n          ...this.props,\r\n          data: convertDataURIToBinary(data),\r\n          workerSrc: 'https://unpkg.com/pdfjs-dist@2.11.338/build/pdf.worker.min.js',\r\n          ownerDocument,\r\n          cMapUrl,\r\n          cMapPacked\r\n        }).promise.then(pdfDocument => {\r\n          this.setState({ pdfDocument })\r\n        })\r\n      })\r\n      .catch(e => this.componentDidCatch(e))\r\n  }\r\n\r\n  render() {\r\n    const { children, beforeLoad } = this.props\r\n    const { pdfDocument, error } = this.state\r\n    return (\r\n      <>\r\n        <span ref={this.documentRef} />\r\n        {error\r\n          ? this.renderError()\r\n          : !pdfDocument || !children\r\n          ? beforeLoad\r\n          : children(pdfDocument)}\r\n      </>\r\n    )\r\n  }\r\n\r\n  renderError() {\r\n    const { errorMessage } = this.props\r\n    if (errorMessage) {\r\n      return React.cloneElement(errorMessage, { error: this.state.error })\r\n    }\r\n\r\n    return null\r\n  }\r\n}\r\n","import { Component } from 'react'\r\n\r\n\r\nexport default class Highlight extends Component {\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tposition,\r\n\t\t\tonClick,\r\n\t\t\tonMouseOver,\r\n\t\t} = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"Highlight__parts\">\r\n\t\t\t\t\t{position.rects.map((rect, index) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonMouseOver={onMouseOver}\r\n\t\t\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\tstyle={rect}\r\n\t\t\t\t\t\t\tclassName={`Highlight__part`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n","import { Component, createRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { defaultProps, propTypes } from '../components/PDFAnnotator.react';\r\n\r\nimport PDFHighlighter from './PDFHighlighter.react';\r\nimport PDFLoader from './PDFLoader.react';\r\nimport Highlight from './Highlight.react';\r\n\r\n\r\nexport default class PDFAnnotator extends Component {\r\n  onAnnotationCreated(highlight) {\r\n    this.props.setProps({\r\n      highlights: [highlight, ...this.props.highlights]\r\n    })\r\n    this.triggerEvent('new_highlight', highlight)\r\n  }\r\n\r\n  onAnnotationClick(highlight) {\r\n    this.triggerEvent('clicked_highlight', highlight)\r\n  }\r\n\r\n  onAnnotationHover(highlight) {\r\n    this.triggerEvent('hovered_highlight', highlight)\r\n  }\r\n\r\n  triggerEvent(name, value) {\r\n    this.props.setProps({\r\n      event: { name, value, _: !this.props.event?._ }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <PDFLoader data={this.props.data}>\r\n        {(pdfDocument) => (\r\n          <PDFHighlighter\r\n            height={this.props.height}\r\n            width={this.props.width}\r\n            pdfDocument={pdfDocument}\r\n            onSelectionFinished={(position, text) => (\r\n              this.onAnnotationCreated({ text, position })\r\n            )}\r\n            highlightTransform={(highlight, index) => (\r\n              <Highlight\r\n                position={{\r\n                  ...highlight.position,\r\n                  rects: highlight.position.rects.map(rect => {\r\n                    return {\r\n                      ...rect,\r\n                      background: highlight.color || this.props.color || 'yellow'\r\n                    }\r\n                  })\r\n                }}\r\n                key={index}\r\n                onClick={() => {\r\n                  this.onAnnotationClick(this.props.highlights[index]);\r\n                }}\r\n                onMouseOver={() => {\r\n                  this.onAnnotationHover(this.props.highlights[index]);\r\n                }}\r\n              />\r\n            )}\r\n            highlights={this.props.highlights}\r\n          />\r\n        )}\r\n      </PDFLoader>\r\n    );\r\n  }\r\n}\r\n\r\nPDFAnnotator.defaultProps = defaultProps;\r\nPDFAnnotator.propTypes = propTypes;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {defaultProps, propTypes} from '../components/TextAnnotator.react';\r\nimport HTMLAnnotator from './HTMLAnnotator.react';\r\n\r\nexport default class TextAnnotator extends Component {\r\n    render() {\r\n        const props = {\r\n            ...this.props,\r\n            data: `<pre>${this.props.data}</pre>`\r\n        }\r\n\r\n        return (\r\n            <HTMLAnnotator {...props} />\r\n        );\r\n    }\r\n}\r\n\r\n\r\nTextAnnotator.defaultProps = defaultProps;\r\nTextAnnotator.propTypes = propTypes;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".Highlight__parts {\\r\\n  opacity: 1;\\r\\n}\\r\\n\\r\\n.PdfHighlighter {\\r\\n  position: absolute;\\r\\n  overflow: auto;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.Highlight__part {\\r\\n  cursor: pointer;\\r\\n  position: absolute;\\r\\n  background: rgba(255, 226, 143, 1);\\r\\n  transition: background 0.3s;\\r\\n}\\r\\n\\r\\n.textLayer {\\r\\n  z-index: 2;\\r\\n  opacity: 1;\\r\\n  mix-blend-mode: multiply;\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.annotationLayer {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n\\r\\n  z-index: 3;\\r\\n}\\r\\n\\r\\nhtml body .textLayer > div {\\r\\n  opacity: 1;\\r\\n  mix-blend-mode: multiply;\\r\\n}\\r\\n\\r\\n.textLayer ::selection {\\r\\n  background: rgba(252, 232, 151, 1);\\r\\n  mix-blend-mode: multiply;\\r\\n}\\r\\n\\r\\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\\r\\n  .textLayer {opacity: 0.5;}\\r\\n}\\r\\n\\r\\n/* Internet Explorer support method */\\r\\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\\r\\n  .textLayer {opacity: 0.5 }\\r\\n}\\r\\n\\r\\n/* Microsoft Edge Browser 12+ (All) - @supports method */\\r\\n@supports (-ms-ime-align:auto) {\\r\\n  .textLayer {opacity: 0.5 }\\r\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/lib/styles.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,WAAW;EACX,YAAY;AACd;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,kCAAkC;EAClC,2BAA2B;AAC7B;;AAEA;EACE,UAAU;EACV,UAAU;EACV,wBAAwB;EACxB,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,MAAM;;EAEN,UAAU;AACZ;;AAEA;EACE,UAAU;EACV,wBAAwB;AAC1B;;AAEA;EACE,kCAAkC;EAClC,wBAAwB;AAC1B;;AAEA;EACE,YAAY,YAAY,CAAC;AAC3B;;AAEA,qCAAqC;AACrC;EACE,YAAY,aAAa;AAC3B;;AAEA,wDAAwD;AACxD;EACE,YAAY,aAAa;AAC3B\",\"sourcesContent\":[\".Highlight__parts {\\r\\n  opacity: 1;\\r\\n}\\r\\n\\r\\n.PdfHighlighter {\\r\\n  position: absolute;\\r\\n  overflow: auto;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.Highlight__part {\\r\\n  cursor: pointer;\\r\\n  position: absolute;\\r\\n  background: rgba(255, 226, 143, 1);\\r\\n  transition: background 0.3s;\\r\\n}\\r\\n\\r\\n.textLayer {\\r\\n  z-index: 2;\\r\\n  opacity: 1;\\r\\n  mix-blend-mode: multiply;\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.annotationLayer {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n\\r\\n  z-index: 3;\\r\\n}\\r\\n\\r\\nhtml body .textLayer > div {\\r\\n  opacity: 1;\\r\\n  mix-blend-mode: multiply;\\r\\n}\\r\\n\\r\\n.textLayer ::selection {\\r\\n  background: rgba(252, 232, 151, 1);\\r\\n  mix-blend-mode: multiply;\\r\\n}\\r\\n\\r\\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\\r\\n  .textLayer {opacity: 0.5;}\\r\\n}\\r\\n\\r\\n/* Internet Explorer support method */\\r\\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\\r\\n  .textLayer {opacity: 0.5 }\\r\\n}\\r\\n\\r\\n/* Microsoft Edge Browser 12+ (All) - @supports method */\\r\\n@supports (-ms-ime-align:auto) {\\r\\n  .textLayer {opacity: 0.5 }\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["DashAnnotator","pdf","PDFAnnotator","html","HTMLAnnotator","text","TextAnnotator","console","log","this","props","dataType","data_type","Annotator","_annotators","undefined","Error","Component","defaultProps","propTypes","Annotation","rect","color","hidden","styles","position","height","top","scrollPosition","scrollY","left","scrollX","width","transform","backgroundColor","opacity","zIndex","highlights","map","singleAnnotation","rectangle","index","key","style","annotationStyle","onClick","onMouseOver","newAnnotationJustCreated","selection","iframeRef","createRef","removeIframeEventHandlers","current","contentDocument","removeEventListener","onScroll","bind","onMouseUp","addEventListener","setState","contentWindow","getSelection","toString","clientRectangleArray","Array","from","item","structureClientRectangle","getRangeAt","getClientRects","state","onAnnotationCreated","setProps","empty","name","value","event","_","highlight","triggerEvent","onMouseLeave","overflow","srcDoc","data","ref","onLoad","setIframeEventHandlers","onAnnotationClick","onAnnotationHover","options","styleTagTransform","setAttributes","insert","element","parent","document","querySelector","lastInsertedElement","window","_lastElementInsertedByStyleLoader","nextSibling","insertBefore","appendChild","firstChild","domAPI","insertStyleElement","R","debounce","callback","wait","timeout","args","context","clearTimeout","setTimeout","apply","isClientRectInsidePageRect","clientRect","pageRect","bottom","right","overlaps","A","B","page","sameLine","yMargin","Math","abs","nextTo","xMargin","Aright","Bright","extendWidth","max","optimizeClientRects","clientRects","rects","sort","toRemove","Set","firstPass","filter","every","otherRect","passCount","forEach","has","add","getDocument","e","ownerDocument","getWindow","defaultView","isHTMLElement","HTMLElement","getPageFromElement","target","node","closest","number","Number","dataset","pageNumber","PDFHighlighter","isCollapsed","range","EventBus","PDFLinkService","eventBus","externalLinkTarget","observer","resizeObserver","containerNode","unsubscribe","doc","on","onTextLayerRendered","onDocumentReady","onSelectionChange","handleKeyDown","debouncedScaleValue","observe","off","disconnect","renderHighlights","handleScaleValue","container","rangeCount","contains","commonAncestorContainer","debouncedAfterSelection","viewer","pages","startParentElement","startContainer","parentElement","endParentElement","endContainer","startPage","endPage","currentPage","push","getPagesFromRange","shouldOptimize","getBoundingClientRect","highlightedRect","scrollTop","scrollLeft","length","boundingRect","X0","X1","Y0","Y1","firstPage","MAX_SAFE_INTEGER","min","rectsWithSizeOnFirstPage","optimal","reduce","res","getBoundingRect","onSelectionFinished","afterSelection","currentScaleValue","pdfScaleValue","ResizeObserver","init","prevProps","pdfDocument","findController","PDFFindController","linkService","PDFViewer","textLayerMode","removePageBorders","renderer","l10n","setDocument","setViewer","textLayer","getPageView","containerLayer","textLayerDiv","createElement","className","nextProps","highlightTransform","highlightsByPage","Boolean","numPages","highlightLayer","findOrCreateHighlightLayer","ReactDom","String","id","onPointerDown","onMouseDown","attachRef","onContextMenu","preventDefault","PureComponent","BASE64_MARKER","convertDataURIToBinary","dataURI","base64Index","indexOf","base64","substring","raw","atob","rawLength","array","Uint8Array","ArrayBuffer","i","charCodeAt","PDFLoader","error","React","load","discardedDocument","destroy","info","onError","documentRef","cMapUrl","cMapPacked","workerSrc","GlobalWorkerOptions","Promise","resolve","then","promise","componentDidCatch","children","beforeLoad","renderError","errorMessage","Highlight","background","___CSS_LOADER_EXPORT___","module"],"sourceRoot":""}